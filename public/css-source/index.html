<!DOCTYPE html>
<html lang="en">
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION: HEAD - Meta, PWA, External Dependencies, Styles
       Purpose: Document metadata, PWA configuration, CDN resources
       Future Module: Could be templated via build system
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“š DSA Study Sanctuary</title>
  <link rel="manifest" href="/assets/manifest-BB48oMGC.json">
  <link rel="icon" type="image/svg+xml" href="https://rdpviz.vercel.app/favicon.svg">
  <meta name="theme-color" content="#2f6a57">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <!-- Register Service Worker for Offline Caching -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('https://rdpviz.vercel.app/sw.js')
          .then(reg => console.log('[SW] Registered:', reg.scope))
          .catch(err => console.warn('[SW] Registration failed:', err));
      });
    }
  </script>

  <!-- Tailwind (required by project constraints; app uses custom CSS primarily) -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <link
    href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400&amp;family=Inter:wght@400;500;600;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap"
    rel="stylesheet" />

  <!-- CodeMirror (SQL editor) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/neo.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Main Application Styles (served from /public for correct Vite handling) -->
  <link rel="stylesheet" href="https://rdpviz.vercel.app/css/styles.css">
  <link rel="stylesheet" href="https://rdpviz.vercel.app/css-source/css-source/solution-viewer.css">

  <!-- SQL Editor CodeMirror Fix: Line numbers properly positioned without overlapping code -->
  <style>
    /* Ensure CodeMirror container is properly positioned */
    .sql-editor-wrap .CodeMirror {
      position: relative !important;
      height: auto !important;
      min-height: 150px;
      max-height: 400px;
      background: #1e1e1e !important;
    }

    /* Gutter (line numbers container) - must be visible and positioned left */
    .sql-editor-wrap .CodeMirror-gutters {
      position: absolute !important;
      left: 0 !important;
      top: 0 !important;
      bottom: 0 !important;
      height: auto !important;
      min-height: 100% !important;
      width: 40px !important;
      min-width: 40px !important;
      z-index: 3 !important;
      background: #252526 !important;
      border-right: 1px solid #404040 !important;
      display: block !important;
      visibility: visible !important;
    }

    /* Line numbers column */
    .sql-editor-wrap .CodeMirror-linenumbers {
      width: 39px !important;
      min-width: 39px !important;
      display: block !important;
      visibility: visible !important;
    }

    /* Individual line number - ensure visible */
    .sql-editor-wrap .CodeMirror-linenumber {
      padding: 0 8px 0 4px !important;
      min-width: 24px !important;
      text-align: right !important;
      color: #858585 !important;
      display: block !important;
      visibility: visible !important;
    }

    /* CRITICAL: Push code content to the right to avoid gutter overlap */
    .sql-editor-wrap .CodeMirror-sizer {
      margin-left: 45px !important;
      border-right: none !important;
    }

    /* Code scroll container */
    .sql-editor-wrap .CodeMirror-scroll {
      margin-left: 0 !important;
      padding-left: 0 !important;
      overflow: auto !important;
    }

    /* Individual code lines - small left padding for readability */
    .sql-editor-wrap .CodeMirror-line,
    .sql-editor-wrap .CodeMirror pre.CodeMirror-line,
    .sql-editor-wrap .CodeMirror-code>div>pre {
      padding-left: 6px !important;
    }
    /* HEAP VISUALIZER LAYOUT FIXES (User Feedback: "Too Tall") */
    #section-ds-heap .hero-section {
       min-height: auto !important; /* Don't force full height */
       height: auto !important;
       display: flex;
       flex-direction: column;
    }
    
    #section-ds-heap .hero-canvas-container {
       flex: 0 0 auto !important; /* Do NOT expand to fill empty space */
       height: auto !important;   /* Let canvas define height */
       min-height: 0 !important;
       display: flex;
       justify-content: center;
       /* background: transparent !important;  <-- REMOVED to restore box */
    }

    #heapCanvas {
       height: 450px !important;    /* Force the compact height */
       max-height: 50vh !important; /* Cap at 50% viewport just in case */
       width: 100% !important;
       object-fit: contain;
    }

    /* Bring controls closer */
    #section-ds-heap .hero-controls {
       margin-top: 0 !important;
       padding-top: 0.5rem !important;
    }

    /* EMERGENCY FIX: Search Bar Layout Override 
       Directly applied to ensure specificity over all other files.
    */
    .electure-controls {
       justify-content: space-between !important;
    }
    
    .search-wrapper {
       display: block !important;
       width: 350px !important;
       min-width: 350px !important;
       margin-left: auto !important;
       flex: 0 0 350px !important;
    }
    
    /* Ensure input takes full width of the wrapper */
    .search-input {
       width: 100% !important;
       padding-left: 3.5rem !important; /* Force text to clear the icon */
       box-sizing: border-box !important;
    }
  </style>

  <!-- Live State Inspector Styles -->
  <style>
    /* BFS/DFS Panel Switching */
    #liveInspector[data-algo="bfs"] .inspector-dfs {
      display: none;
    }

    #liveInspector[data-algo="dfs"] .inspector-bfs {
      display: none;
    }

    #liveInspector[data-algo="bfs"] .inspector-bfs {
      display: block;
    }

    #liveInspector[data-algo="dfs"] .inspector-dfs {
      display: block;
    }

    /* Node Badges */
    .node-badge {
      display: inline-block;
      padding: 0.2rem 0.4rem;
      background: rgba(76, 155, 184, 0.15);
      border-radius: 4px;
      font-size: 0.65rem;
      font-weight: 600;
      color: var(--text-primary);
      border: 1px solid rgba(76, 155, 184, 0.3);
    }

    .node-badge.queue {
      background: rgba(76, 175, 80, 0.15);
      border-color: rgba(76, 175, 80, 0.3);
    }

    .node-badge.stack {
      background: rgba(124, 77, 255, 0.15);
      border-color: rgba(124, 77, 255, 0.3);
    }

    .node-badge.more {
      background: rgba(158, 158, 158, 0.1);
      border-color: rgba(158, 158, 158, 0.2);
    }

    .empty-state {
      font-size: 0.7rem;
      color: var(--text-muted);
      font-style: italic;
    }

    /* Table Styling */
    #liveInspector table td {
      padding: 0.25rem 0.4rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    #liveInspector table td:first-child {
      font-weight: 600;
      color: var(--text-primary);
    }

    #liveInspector table td:last-child {
      color: var(--text-muted);
    }

    /* ===== HERO VIZ LAYOUT (CRITICAL INLINE FIX) ===== */
    .hero-section {
      width: 100%;
      padding: 2rem;
      background: var(--bg-card);
      border-radius: 20px;
      box-shadow: 0 10px 30px var(--shadow-deep);
      margin-bottom: 2rem;
      border: 1px solid var(--border-soft);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Glassmorphism background effect */
    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
      background: var(--accent-forest); /* Solid color as requested */
    }

    .hero-controls {
      width: fit-content;
      margin: 0 auto;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      padding: 1rem 3rem; /* Generous padding for "spacing" */
      background: var(--bg-paper);
      border-radius: 16px; /* slightly rounder corners */
      border: 1px solid var(--border-soft);
      gap: 2rem; /* Restore gap */
      box-shadow: 0 4px 20px rgba(0,0,0,0.08); /* Lift it up */
    }
    .hero-header {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border-soft);
    }

    .hero-title {
      font-family: 'Crimson Text', serif;
      font-size: 2rem;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .hero-canvas-container {
      width: 100%;
      min-height: 250px;
      background: var(--bg-warm);
      border-radius: 12px;
      position: relative;
      margin-bottom: 1.5rem;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .hero-canvas {
      width: 100%;
      height: 100%;
    }

    /* Left side: Inputs */
    .control-group {
      display: flex;
      flex-direction: row !important;
      flex-wrap: nowrap !important;
      gap: 0.75rem;
      align-items: center;
    }

    /* Right side: Actions */
    .action-group {
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: nowrap; /* Prevent wrapping on desktop */
    }

    .hero-input {
      background: var(--bg-card);
      border: 1px solid var(--border-soft);
      color: var(--text-dark);
      padding: 0.75rem 1rem;
      border-radius: 8px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.95rem;
      transition: all 0.2s;
      height: 48px; /* Fixed height matching buttons */
    }

    /* Specific widths */
    #arrayInput { width: 110px; }
    #arrayIndex { width: 90px; }

    .hero-label {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-right: 0.25rem;
      font-weight: 600;
      white-space: nowrap;
    }

    .hero-input:focus {
      border-color: var(--accent-forest);
      box-shadow: 0 0 0 3px var(--focus-ring);
      outline: none;
    }

    .hero-btn {
      padding: 0 1.25rem; /* Horizontal padding only */
      height: 48px;       /* Fixed height matching inputs */
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.2s;
      border: none;
      font-size: 0.95rem;
      color: white;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      white-space: nowrap;
    }

    .hero-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .hero-btn:active {
      transform: translateY(0);
    }

    .btn-primary { background: linear-gradient(135deg, var(--accent-forest), #1d4634) !important; }
    .btn-danger { background: linear-gradient(135deg, var(--accent-coral), #c0392b) !important; }
    .btn-warning { background: linear-gradient(135deg, var(--accent-amber), #dda926) !important; }
    .btn-info { background: linear-gradient(135deg, var(--accent-sky), #2980b9) !important; }

    .viz-stat-display {
      margin-left: auto;
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg-sidebar);
      color: var(--text-light);
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.85rem;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Big-O Cards in Hero Style */
    .complexity-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 1rem;
      width: 100%;
      margin-top: 1rem;
    }

    .complexity-item {
      background: var(--bg-card);
      padding: 0.75rem;
      border-radius: 8px;
      text-align: center;
      border: 1px solid var(--border-soft);
    }

    .complexity-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      color: var(--text-muted);
      letter-spacing: 0.05em;
      margin-bottom: 0.25rem;
    }

    .complexity-val {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 700;
      font-size: 1.1rem;
    }

    .val-good { color: var(--accent-forest); }
    .val-bad { color: var(--accent-coral); }
    .val-mid { color: var(--accent-amber); }

    @media (max-width: 1024px) {
      .hero-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 1rem;
        padding: 1rem;
      }
      .control-group, .action-group {
        justify-content: center;
        width: 100%;
      }
      .action-group {
        flex-wrap: wrap; 
      }
      .viz-stat-display {
        margin-left: 0;
        justify-content: center;
        margin-top: 0.5rem;
      }
    }
  </style>

  <!-- meSpeak.js - Browser-based TTS fallback (for Linux compatibility) -->
  <script src="https://cdn.jsdelivr.net/npm/mespeak@2.0.2/mespeak.min.js"></script>
  <script>
    // Initialize meSpeak when loaded
    if (typeof meSpeak !== 'undefined') {
      meSpeak.loadConfig("https://cdn.jsdelivr.net/npm/mespeak@2.0.2/mespeak_config.json");
      meSpeak.loadVoice("https://cdn.jsdelivr.net/npm/mespeak@2.0.2/voices/en/en-us.json");
      console.log('[meSpeak] Initialized as TTS fallback');

      // Firefox/Chromium require user gesture to unlock AudioContext
      // Play a silent sound on first user interaction to unlock audio
      const unlockMeSpeakAudio = () => {
        if (typeof meSpeak !== 'undefined' && meSpeak.speak) {
          // Speak empty/silent to initialize AudioContext after user gesture
          meSpeak.speak('', { amplitude: 0, volume: 0 });
          console.log('[meSpeak] AudioContext unlocked via user gesture');
        }
        document.removeEventListener('click', unlockMeSpeakAudio);
        document.removeEventListener('keydown', unlockMeSpeakAudio);
        document.removeEventListener('touchstart', unlockMeSpeakAudio);
      };

      document.addEventListener('click', unlockMeSpeakAudio, { once: true });
      document.addEventListener('keydown', unlockMeSpeakAudio, { once: true });
      document.addEventListener('touchstart', unlockMeSpeakAudio, { once: true });
    }
  </script>

  <script type="module" crossorigin src="https://rdpviz.vercel.app/assets/main-DaT4__Z1.js"></script>
</head>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION: BODY - Main Application Container
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

<body>
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION: ACCESSIBILITY - Skip Links & ARIA Live Region
         Purpose: Screen reader support and keyboard navigation
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Skip Link for Keyboard Users -->
  <a href="#section-algorithms" class="skip-link" style="
      position: absolute;
      top: -100px;
      left: 0;
      background: var(--accent-forest);
      color: white;
      padding: 0.75rem 1.5rem;
      z-index: 10000;
      font-weight: 600;
      border-radius: 0 0 8px 0;
      transition: top 0.2s;
    " onfocus="this.style.top='0'" onblur="this.style.top='-100px'">Skip to Main Content</a>

  <!-- ARIA Live Region for Announcements -->
  <div id="ariaLiveRegion" role="status" aria-live="polite" aria-atomic="true" class="sr-only" style="
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    "></div>

  <!-- Mobile Hamburger Menu Button -->
  <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle navigation menu" aria-expanded="false">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <!-- Sidebar Toggle Button (Desktop) -->
  <button id="sidebarToggle" class="sidebar-toggle-btn" aria-label="Toggle sidebar" aria-expanded="true">
    <span id="sidebarToggleIcon">â—€</span>
  </button>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION: OVERLAYS > Welcome Overlay
         Purpose: First-time user welcome screen and onboarding entry
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- WELCOME OVERLAY (Phase 1: Core UX Revolution) -->
  <div id="welcomeOverlay" class="welcome-overlay hidden">
    <div class="welcome-content">
      <div class="welcome-icon">ğŸ“š</div>
      <h1 class="welcome-title">Welcome to DSA Study Sanctuary</h1>
      <p class="welcome-subtitle">Master algorithms through beautiful visualizations and interactive learning</p>
      <div class="welcome-features">
        <div class="feature-pill">ğŸ¯ Interactive Visualizations</div>
        <div class="feature-pill">ğŸ”Š Audio Sonification</div>
        <div class="feature-pill">ğŸ’¾ SQL Playground</div>
        <div class="feature-pill">ğŸ† Achievements & XP</div>
      </div>
      <button class="welcome-cta" onclick="startOnboarding()">Begin Your Journey â†’</button>
    </div>
  </div>

  <!-- ONBOARDING SURVEY (Phase 1) -->
  <div id="onboardingSurvey" class="onboarding-survey hidden">
    <div class="survey-card">
      <div class="survey-progress">
        <div class="survey-dot active" id="surveyDot1"></div>
        <div class="survey-dot" id="surveyDot2"></div>
      </div>
      <h3 class="survey-question" id="surveyQuestion">What brings you here today?</h3>
      <div class="survey-options" id="surveyOptions">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION: OVERLAYS > Command Palette
         Purpose: Ctrl+K quick navigation and search interface
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- COMMAND PALETTE (Phase 1) -->
  <div id="commandPaletteOverlay" class="command-palette-overlay" onclick="closeCommandPalette()">
    <div class="command-palette" onclick="event.stopPropagation()">
      <input type="text" class="command-palette-input" id="commandPaletteInput"
        placeholder="Type to search... (Ctrl+K to open)" autocomplete="off" oninput="filterCommands()">
      <div class="command-palette-results" id="commandPaletteResults">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- TOAST CONTAINER (Phase 1) -->
  <div id="toastContainer" class="toast-container"></div>



  <!-- Keyboard Shortcuts Modal -->
  <div id="keyboardShortcutsModal" class="shortcuts-modal collapsed" style="
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    " onclick="this.classList.add('collapsed')">
    <div class="modal-content" style="
        background: var(--bg-card);
        border-radius: 16px;
        padding: 1.5rem;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      " onclick="event.stopPropagation()">
      <h2 style="margin-bottom: 1rem; color: var(--accent-forest)">âŒ¨ï¸ Keyboard Shortcuts</h2>
      <div style="font-size: 0.9rem; line-height: 2">
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">Space</kbd>
          Play/Pause</div>
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">â†’</kbd>
          Step Forward</div>
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">â†</kbd>
          Step Back</div>
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">R</kbd>
          Reset</div>
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">M</kbd>
          Toggle Sound</div>
        <div><kbd
            style="background: var(--bg-paper); padding: 0.2rem 0.5rem; border-radius: 4px; font-family: 'JetBrains Mono', monospace">?</kbd>
          Show this Help</div>
      </div>
      <button class="btn btn-primary" style="margin-top: 1rem; width: 100%"
        onclick="document.getElementById('keyboardShortcutsModal').classList.add('collapsed')">Got it!</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SECTION: NAVIGATION > Sidebar
         Purpose: Main navigation with course sections and progress tracking
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- SIDEBAR -->
  <!-- Component: Sidebar Navigation -->
  <!-- Main navigation with course sections and progress tracking -->
  <nav class="sidebar" id="sidebar" role="navigation" aria-label="Study Sanctuary Sidebar">
    <!-- Back to Dashboard Button (compact) -->
    <div id="courseBackBtn" class="back-btn"
      style="margin: 0.75rem 1rem; padding: 0.5rem 0.85rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
      <span style="font-size: 1.1rem;">â†</span> Back to Dashboard
    </div>

    <!-- Daily Challenge Section -->
    <div class="nav-section">
      <div class="nav-section-title">Today</div>
      <button class="nav-item nav-item-feature theme-quiz" data-section="quiz-mode">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ </span>
        Quiz Mode
      </button>
    </div>

    <!-- Your Coding World -->
    <div class="nav-section">
      <div class="nav-section-title">Sandbox</div>
      <button class="nav-item sandbox-nav-btn" data-section="algorithm-sandbox" style="
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
      animation: sandboxGlow 2s ease-in-out infinite;
    ">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        Code Sandbox
        <span class="nav-item-badge" style="background: white; color: #059669">Try</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Visualizers</div>
      <button class="nav-item active" data-section="algorithms" aria-current="page">
        <span class="nav-item-icon" aria-hidden="true">âš¡</span>
        Sorting Algorithms
      </button>
      <button class="nav-item" data-section="searching">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”</span>
        Searching
      </button>
      <button class="nav-item" data-section="pathfinding">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—ºï¸</span>
        Pathfinding
      </button>
      <button class="nav-item" data-section="algorithm-race">
        <span class="nav-item-icon" aria-hidden="true">ğŸ</span>
        Algorithm Race
      </button>
      <button class="nav-item" data-section="divide-conquer">
        <span class="nav-item-icon" aria-hidden="true">âœ‚ï¸</span>
        Divide & Conquer
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-algorithms"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
      <!-- Exam Solutions -->
      <div style="margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
        <div
          style="font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); padding: 0 0.75rem 0.25rem; letter-spacing: 0.05em;">
          Exam Solutions</div>
        <button class="nav-item" data-section="algo-midterm-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Midterm Solutions
        </button>
        <button class="nav-item" data-section="algo-final-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Final Solutions
        </button>
      </div>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Data Structures</div>
      <button class="nav-item" data-section="ds-array">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“Š</span>
        Arrays
      </button>
      <button class="nav-item" data-section="ds-stack">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“š</span>
        Stacks
      </button>
      <button class="nav-item" data-section="ds-queue">
        <span class="nav-item-icon" aria-hidden="true">ğŸ«</span>
        Queues
      </button>
      <button class="nav-item" data-section="ds-linkedlist">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”—</span>
        Linked Lists
      </button>
      <button class="nav-item" data-section="ds-tree">
        <span class="nav-item-icon" aria-hidden="true">ğŸŒ³</span>
        Binary Trees
      </button>
      <button class="nav-item" data-section="ds-hash">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—‚ï¸</span>
        Hash Tables
      </button>
      <button class="nav-item" data-section="ds-heap"
        style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-elevated));">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”º</span>
        Heaps
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="ds-graph">
        <span class="nav-item-icon" aria-hidden="true">ğŸ•¸ï¸</span>
        Graphs
      </button>
      <button class="nav-item sandbox-nav-btn" data-section="ds-sandbox" style="
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      color: white;
      box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
      animation: sandboxGlow 2s ease-in-out infinite;
    ">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        DS Sandbox
        <span class="nav-item-badge" style="background: white; color: #0891b2">Try</span>
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-datastructures"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
      <!-- Exam Solutions -->
      <div style="margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
        <div
          style="font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); padding: 0 0.75rem 0.25rem; letter-spacing: 0.05em;">
          Exam Solutions</div>
        <button class="nav-item" data-section="lab-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
          Lab Solutions
        </button>
        <button class="nav-item" data-section="midterm-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Midterm Solutions
        </button>
        <button class="nav-item" data-section="final-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Final Solutions
        </button>
      </div>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Database / SQL</div>
      <button class="nav-item" data-section="sql-lab">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        SQL Lab
      </button>
      <button class="nav-item" data-section="sql-practice">
        <span class="nav-item-icon" aria-hidden="true">ğŸ</span>
        SQL Practice
      </button>
      <button class="nav-item" data-section="sql-visualizer">
        <span class="nav-item-icon" aria-hidden="true">ğŸ‘ï¸</span>
        SQL Visualizer
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="sql-lessons">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“˜</span>
        SQL Lessons
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="sql-drills">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ </span>
        SQL Interview Drills
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-sql"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Database Concepts (v3)</div>
      <button class="nav-item" data-section="relational-algebra">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”¢</span>
        Relational Algebra
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="db-erd">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“Š</span>
        ER Diagrams
      </button>
      <button class="nav-item" data-section="db-eerd">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“ˆ</span>
        EER Diagrams
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="db-schema">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—ï¸</span>
        Schema Design
      </button>
      <button class="nav-item" data-section="db-normalization">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        Normalization
      </button>
      <button class="nav-item" data-section="transactions">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”</span>
        Transactions & ACID
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="btree">
        <span class="nav-item-icon" aria-hidden="true">ğŸŒ³</span>
        B-Tree Index
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="nosql">
        <span class="nav-item-icon" aria-hidden="true">ğŸƒ</span>
        NoSQL Intro
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Story Lessons</div>
      <button class="nav-item" data-section="story-recursion">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”„</span>
        Recursion
        <span class="nav-item-badge">Story</span>
      </button>
      <button class="nav-item" data-section="story-bigo">
        <span class="nav-item-icon" aria-hidden="true">ğŸï¸</span>
        Big O Notation
        <span class="nav-item-badge">Story</span>
      </button>
    </div>

    <div class="nav-section" aria-label="Progress">
      <div class="nav-section-title">Your Progress</div>
      <div id="progressBadge" class="progress-badge">
        <div class="progress-badge-icon">ğŸ†</div>
        <div class="progress-badge-info">
          <div id="progressLevel" class="progress-level">ğŸŒ± Beginner</div>
          <div class="progress-xp-row">
            <span id="progressXP" class="progress-xp">0 XP</span>
            <span id="progressStreak" class="progress-streak">ğŸ”¥ 1</span>
          </div>
          <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <nav class="sidebar-legacy" id="sidebar-legacy" style="display:none" aria-hidden="true">
    <!-- Back to Dashboard Button (compact) -->
    <div id="courseBackBtn" class="back-btn"
      style="margin: 0.75rem 1rem; padding: 0.5rem 0.85rem; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
      <span style="font-size: 1.1rem;">â†</span> Back to Dashboard
    </div>

    <!-- Daily Challenge Section -->
    <div class="nav-section">
      <div class="nav-section-title">Today</div>
      <button class="nav-item" data-section="quiz-mode"
        style="background: linear-gradient(135deg, #8B5CF6, #A78BFA); color: white;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ </span>
        Quiz Mode
      </button>
    </div>

    <!-- Your Coding World -->
    <div class="nav-section">
      <div class="nav-section-title">Sandbox</div>
      <button class="nav-item sandbox-nav-btn" data-section="algorithm-sandbox" style="
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
      animation: sandboxGlow 2s ease-in-out infinite;
    ">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        Code Sandbox
        <span class="nav-item-badge" style="background: white; color: #059669">Try</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Visualizers</div>
      <button class="nav-item active" data-section="algorithms" aria-current="page">
        <span class="nav-item-icon" aria-hidden="true">âš¡</span>
        Sorting Algorithms
      </button>
      <button class="nav-item" data-section="searching">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”</span>
        Searching
      </button>
      <button class="nav-item" data-section="pathfinding">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—ºï¸</span>
        Pathfinding
      </button>
      <button class="nav-item" data-section="algorithm-race">
        <span class="nav-item-icon" aria-hidden="true">ğŸ</span>
        Algorithm Race
      </button>
      <button class="nav-item" data-section="divide-conquer">
        <span class="nav-item-icon" aria-hidden="true">âœ‚ï¸</span>
        Divide & Conquer
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-algorithms"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
      <!-- Exam Solutions -->
      <div style="margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
        <div
          style="font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); padding: 0 0.75rem 0.25rem; letter-spacing: 0.05em;">
          Exam Solutions</div>
        <button class="nav-item" data-section="algo-midterm-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Midterm Solutions
        </button>
        <button class="nav-item" data-section="algo-final-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Final Solutions
        </button>
      </div>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Data Structures</div>
      <button class="nav-item" data-section="ds-array">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“Š</span>
        Arrays
      </button>
      <button class="nav-item" data-section="ds-stack">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“š</span>
        Stacks
      </button>
      <button class="nav-item" data-section="ds-queue">
        <span class="nav-item-icon" aria-hidden="true">ğŸ«</span>
        Queues
      </button>
      <button class="nav-item" data-section="ds-linkedlist">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”—</span>
        Linked Lists
      </button>
      <button class="nav-item" data-section="ds-tree">
        <span class="nav-item-icon" aria-hidden="true">ğŸŒ³</span>
        Binary Trees
      </button>
      <button class="nav-item" data-section="ds-hash">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—‚ï¸</span>
        Hash Tables
      </button>
      <button class="nav-item" data-section="ds-heap"
        style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-elevated));">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”º</span>
        Heaps
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="ds-graph">
        <span class="nav-item-icon" aria-hidden="true">ğŸ•¸ï¸</span>
        Graphs
      </button>
      <button class="nav-item sandbox-nav-btn" data-section="ds-sandbox" style="
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      color: white;
      box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
      animation: sandboxGlow 2s ease-in-out infinite;
    ">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        DS Sandbox
        <span class="nav-item-badge" style="background: white; color: #0891b2">Try</span>
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-datastructures"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
      <!-- Exam Solutions -->
      <div style="margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle);">
        <div
          style="font-size: 0.7rem; text-transform: uppercase; color: var(--text-muted); padding: 0 0.75rem 0.25rem; letter-spacing: 0.05em;">
          Exam Solutions</div>
        <button class="nav-item" data-section="lab-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
          Lab Solutions
        </button>
        <button class="nav-item" data-section="midterm-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Midterm Solutions
        </button>
        <button class="nav-item" data-section="final-solutions">
          <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
          Final Solutions
        </button>
      </div>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Database / SQL</div>
      <button class="nav-item" data-section="sql-lab">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ª</span>
        SQL Lab
      </button>
      <button class="nav-item" data-section="sql-practice">
        <span class="nav-item-icon" aria-hidden="true">ğŸ</span>
        SQL Practice
      </button>
      <button class="nav-item" data-section="sql-visualizer">
        <span class="nav-item-icon" aria-hidden="true">ğŸ‘ï¸</span>
        SQL Visualizer
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="sql-lessons">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“˜</span>
        SQL Lessons
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="sql-drills">
        <span class="nav-item-icon" aria-hidden="true">ğŸ§ </span>
        SQL Interview Drills
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item electure-nav-btn" data-section="electure-sql"
        style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 0.5rem;">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        E-Lectures
        <span class="nav-item-badge" style="background: white; color: #667eea">Learn</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Database Concepts (v2)</div>
      <button class="nav-item" data-section="relational-algebra">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”¢</span>
        Relational Algebra
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="db-erd">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“Š</span>
        ER Diagrams
      </button>
      <button class="nav-item" data-section="db-schema">
        <span class="nav-item-icon" aria-hidden="true">ğŸ—ï¸</span>
        Schema Design
      </button>
      <button class="nav-item" data-section="db-normalization">
        <span class="nav-item-icon" aria-hidden="true">ğŸ“</span>
        Normalization
      </button>
      <button class="nav-item" data-section="transactions">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”</span>
        Transactions & ACID
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="btree">
        <span class="nav-item-icon" aria-hidden="true">ğŸŒ³</span>
        B-Tree Index
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
      <button class="nav-item" data-section="nosql">
        <span class="nav-item-icon" aria-hidden="true">ğŸƒ</span>
        NoSQL Intro
        <span class="nav-item-badge" style="background: var(--accent-coral)">New</span>
      </button>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Story Lessons</div>
      <button class="nav-item" data-section="story-recursion">
        <span class="nav-item-icon" aria-hidden="true">ğŸ”„</span>
        Recursion
        <span class="nav-item-badge">Story</span>
      </button>
      <button class="nav-item" data-section="story-bigo">
        <span class="nav-item-icon" aria-hidden="true">ğŸï¸</span>
        Big O Notation
        <span class="nav-item-badge">Story</span>
      </button>
    </div>

    <div class="nav-section" aria-label="Progress">
      <div class="nav-section-title">Your Progress</div>
      <div id="progressBadge" class="progress-badge">
        <div class="progress-badge-icon">ğŸ†</div>
        <div class="progress-badge-info">
          <div id="progressLevel" class="progress-level">ğŸŒ± Beginner</div>
          <div class="progress-xp-row">
            <span id="progressXP" class="progress-xp">0 XP</span>
            <span id="progressStreak" class="progress-streak">ğŸ”¥ 1</span>
          </div>
          <div class="progress-bar-container">
            <div id="progressBar" class="progress-bar-fill" style="width: 0%"></div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- WELCOME MODAL (First-time visitors) -->
  <div id="welcomeOverlay" class="welcome-overlay" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
    <div class="welcome-modal">
      <h1 id="welcomeTitle">ğŸ‘‹ Welcome to Study Sanctuary!</h1>
      <p class="welcome-subtitle">
        Your calm space for learning Data Structures & Algorithms
      </p>

      <div class="welcome-features">
        <div class="welcome-feature">
          <div class="welcome-feature-icon">ğŸ“Š</div>
          <span class="welcome-feature-text">Visualize sorting algorithms step by step</span>
        </div>
        <div class="welcome-feature">
          <div class="welcome-feature-icon">ğŸ—ºï¸</div>
          <span class="welcome-feature-text">Explore pathfinding with BFS, DFS & A*</span>
        </div>
        <div class="welcome-feature">
          <div class="welcome-feature-icon">ğŸ§ª</div>
          <span class="welcome-feature-text">Practice SQL queries interactively</span>
        </div>
      </div>

      <div class="welcome-actions">
        <button id="welcomeStart" class="btn btn-primary btn-large">
          Start Learning â†’
        </button>
        <button id="welcomeSkip" class="btn-skip">
          Skip, I've been here before
        </button>
      </div>
    </div>
  </div>

  <!-- KEYBOARD SHORTCUTS OVERLAY -->
  <div id="shortcutsOverlay" class="shortcuts-overlay" role="dialog" aria-modal="true" aria-labelledby="shortcutsTitle">
    <div class="shortcuts-modal">
      <h2 id="shortcutsTitle">âŒ¨ï¸ Keyboard Shortcuts</h2>

      <div class="shortcut-row">
        <span class="shortcut-desc">Play / Pause</span>
        <kbd class="shortcut-key">Space</kbd>
      </div>
      <div class="shortcut-row">
        <span class="shortcut-desc">Reset visualization</span>
        <kbd class="shortcut-key">R</kbd>
      </div>
      <div class="shortcut-row">
        <span class="shortcut-desc">Step forward</span>
        <kbd class="shortcut-key">â†’</kbd>
      </div>
      <div class="shortcut-row">
        <span class="shortcut-desc">Step backward</span>
        <kbd class="shortcut-key">â†</kbd>
      </div>
      <div class="shortcut-row">
        <span class="shortcut-desc">Show shortcuts</span>
        <kbd class="shortcut-key">?</kbd>
      </div>
      <div class="shortcut-row">
        <span class="shortcut-desc">Toggle dark mode</span>
        <kbd class="shortcut-key">D</kbd>
      </div>

      <button id="shortcutsClose" class="btn btn-secondary shortcuts-close">
        Got it!
      </button>
    </div>
  </div>

  <!-- ACHIEVEMENT GALLERY MODAL -->
  <div id="achievementGalleryOverlay" class="achievement-gallery-overlay" role="dialog" aria-modal="true"
    aria-labelledby="achievementGalleryTitle">
    <div class="achievement-gallery-modal">
      <h2 id="achievementGalleryTitle">ğŸ† Achievement Gallery</h2>
      <p class="achievement-gallery-subtitle">
        <span id="achievementCount">0</span> of
        <span id="achievementTotal">0</span> unlocked
      </p>

      <div id="achievementGrid" class="achievement-grid">
        <!-- Populated by JS -->
      </div>

      <div class="achievement-gallery-footer">
        <div class="streak-freeze-display">
          <span>â„ï¸ Streak Freezes: <strong id="freezeCount">0</strong>/2</span>
        </div>
        <button id="achievementGalleryClose" class="btn btn-secondary">
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- Fixed Top-Right Theme Controls (stays at top, doesn't follow scroll) -->
  <div id="topRightControls" style="
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 1rem;
      background: var(--bg-card);
      padding: 0.5rem 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    ">
    <!-- Theme Toggle -->
    <div class="theme-toggle" id="themeToggleBtn" title="Toggle Dark/Light Mode" role="switch" aria-checked="false"
      tabindex="0" style="cursor: pointer;">
      <span class="theme-toggle-label" id="themeLabel" style="font-size: 0.8rem; margin-right: 0.5rem;">Light</span>
      <div class="theme-toggle-track" style="width: 40px; height: 22px;">
        <div class="theme-toggle-thumb"></div>
      </div>
    </div>

    <!-- E-Lecture button placeholder (appears when scrolled) -->
    <div id="eLecturePlaceholder" style="display: none;"></div>

    <!-- Color Theme Dots -->
    <!-- Color Theme Dots REMOVED (Enforced Sunset) -->
    <div style="display: none;"></div>
  </div>

  <!-- MAIN CONTENT -->
  <main class="main-content dashboard-fullwidth" id="mainContent" role="main">

    <!-- ROUTER OUTLET: Dynamic content is loaded here -->
    <div id="routerOutlet" style="display: none;"></div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: MAIN CONTENT > Dashboard
           Purpose: Course selection grid and quick action buttons
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- DASHBOARD -->
    <section id="section-dashboard" class="animate-in" aria-label="Course Dashboard">
      <div class="dashboard-container">
        <div class="dashboard-header">
          <h1>ğŸ“ Welcome to CSE Helper</h1>
          <p>Choose a course to start learning algorithms, data structures, and SQL</p>
        </div>

        <div class="courses-grid stagger-in">
          <!-- CSE 220: Data Structures -->
          <div class="course-card cse220" data-course="cse220">
            <span class="course-icon">ğŸ“š</span>
            <div class="course-code">CSE 220</div>
            <h3 class="course-title">Data Structures</h3>
            <p class="course-desc">Arrays, Stacks, Queues, Linked Lists, Trees, Heaps</p>
            <div class="course-progress">
              <div class="course-progress-bar">
                <div class="course-progress-fill" style="width: 0%"></div>
              </div>
              <span>0/6</span>
            </div>
          </div>

          <!-- CSE 221: Algorithms -->
          <div class="course-card cse221" data-course="cse221">
            <span class="course-icon">âš¡</span>
            <div class="course-code">CSE 221</div>
            <h3 class="course-title">Algorithms</h3>
            <p class="course-desc">Sorting, Pathfinding, Algorithm Analysis & Racing</p>
            <div class="course-progress">
              <div class="course-progress-bar">
                <div class="course-progress-fill" style="width: 0%"></div>
              </div>
              <span>0/4</span>
            </div>
          </div>

          <!-- CSE 370: SQL -->
          <div class="course-card cse370" data-course="cse370">
            <span class="course-icon">ğŸ—„ï¸</span>
            <div class="course-code">CSE 370</div>
            <h3 class="course-title">Database Systems</h3>
            <p class="course-desc">SQL Lab, Practice Challenges, Lessons & Visualizer</p>
            <div class="course-progress">
              <div class="course-progress-bar">
                <div class="course-progress-fill" style="width: 0%"></div>
              </div>
              <span>0/4</span>
            </div>
          </div>
        </div>

        <div class="dashboard-extras stagger-in">
          <button class="dashboard-btn daily" id="btnDashboardDaily">
            ğŸ¯ Daily Challenge
          </button>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: VISUALIZERS > Algorithm Visualizer (Sorting/Searching/D&C)
           Purpose: Multi-category algorithm visualization with controls
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- SORTING ALGORITHMS -->
    <!-- SORTING ALGORITHMS -->
    <section id="section-algorithms" class="section-hidden animate-in" aria-label="Sorting Algorithms">
      <div class="page-header" style="margin-bottom: 1.5rem;">
        <h1 style="font-size: 1.75rem; margin-bottom: 0px;">âš¡ Sorting Algorithms</h1>
      </div>

      <!-- Tabs Removed for specialized Sorting Page -->

      <!-- SORTING VISUALIZATION (Dashboard Layout) -->
      <div id="sortingVizContent" class="sorting-dashboard">
        
        <!-- ZONE 1: THE STAGE (Canvas + HUD) -->
        <div class="viz-stage">
          <div class="viz-stage-header">
            <div class="hud-stats">
              <div class="hud-stat-item">
                <span>Compares</span>
                <span class="hud-stat-value" id="statCompares">0</span>
              </div>
              <div class="hud-stat-item">
                <span>Swapping</span>
                <span class="hud-stat-value" id="statSwaps">0</span>
              </div>
              <div class="hud-stat-item">
                <span>Steps</span>
                <span class="hud-stat-value" id="statSteps">0</span>
              </div>
            </div>
            
            <!-- Integrated Legend (Pill Style) -->
            <div class="legend-pill" style="display: flex; gap: 1rem; font-size: 0.8rem;">
               <span style="color:var(--viz-sorted, #2F6A57)">â— Sorted</span>
               <span style="color:var(--viz-compare, #5B8BA0)">â— Compare</span>
               <span style="color:var(--viz-swap, #E07A5F)">â— Swap</span>
               <span style="color:var(--viz-pivot, #D4A853)">â— Pivot</span>
            </div>
          </div>

          <div class="viz-canvas-wrapper">
            <canvas
              id="sortCanvas"
              class="viz-canvas"
              height="340"
              role="img"
              aria-label="Sorting bars visualization"
            ></canvas>
            <!-- Shimmer & CTA -->
            <div id="shimmerOverlay" class="shimmer-overlay"></div>
            <div id="canvasCta" class="canvas-cta hidden">
              <div class="cta-play-btn">â–¶</div>
              <span class="cta-text">Click to see it in action!</span>
            </div>
          </div>
        </div>

        <!-- ZONE 2: COMMAND DECK (Unified Controls) -->
        <div class="command-deck">
          <!-- Left: Settings -->
          <div class="deck-group">
            <select id="algoSelect" class="select-field deck-select" aria-label="Sorting algorithm">
              <option value="bubble">ğŸ«§ Bubble Sort</option>
              <option value="insertion">ğŸ“¥ Insertion Sort</option>
              <option value="selection">ğŸ‘† Selection Sort</option>
              <option value="quick" selected>âš¡ Quick Sort</option>
              <option value="merge">ğŸ”€ Merge Sort</option>
              <option value="heap">ğŸ”ï¸ Heap Sort</option>
            </select>
            
            <select id="arrayTypeSelect" class="select-field deck-select" aria-label="Array type">
              <option value="random" selected>ğŸ² Random</option>
              <option value="reversed">â¬‡ï¸ Reversed</option>
              <option value="nearly">ğŸ“ˆ Nearly Sorted</option>
              <option value="few">ğŸ”¢ Unique</option>
            </select>
          </div>

          <!-- Center: Playback -->
          <div class="playback-cluster">
             <button id="btnStepBack" class="btn btn-secondary btn-icon" title="Step Back">â¬…ï¸</button>
             
             <!-- Play/Pause Toggle group -->
             <button id="btnPlay" class="btn btn-primary btn-icon" title="Play" style="width: 48px; height: 48px; border-radius: 12px;">â–¶ï¸</button>
             <button id="btnPause" class="btn btn-accent btn-icon section-hidden" title="Pause" style="width: 48px; height: 48px; border-radius: 12px;">â¸ï¸</button>
             
             <button id="btnReset" class="btn btn-coral btn-icon" title="Reset" style="width: 40px; height: 40px;">ğŸ”„</button>
             <button id="btnStepFwd" class="btn btn-secondary btn-icon" title="Step Forward">â¡ï¸</button>
          </div>

          <!-- Right: Config sliders -->
          <div class="deck-group">
            <div style="display: flex; flex-direction: column; gap: 2px;">
               <label style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase;">Size</label>
               <input type="range" id="sizeSlider" min="10" max="100" value="40" class="slider" style="width: 80px;" title="Array Size">
            </div>
            <div style="display: flex; flex-direction: column; gap: 2px;">
               <label style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase;">Speed</label>
               <input type="range" id="speedSlider" min="1" max="50" value="10" class="slider" style="width: 80px;" title="Speed">
            </div>
            
            <div class="deck-divider"></div>
            
            <!-- Compact Toggle for Values -->
            <label class="checkbox-label" style="font-size: 0.75rem; gap: 0.4rem; cursor: pointer;">
                <input type="checkbox" id="showValuesToggle">
                <span>Values</span>
            </label>
            
            <div class="deck-divider"></div>

             <button id="btnRandom" class="btn btn-accent btn-icon" title="Generate New Array" style="width: 40px;">ğŸ²</button>
          </div>
          
          <!-- Custom Input Toggler -->
          <!-- Custom Input Toggler -->
           <div class="custom-input-group">
              <input type="text" id="customArrayInput" class="input-field" placeholder="Custom: 5, 2, 9..." autocomplete="off">
              <button id="btnApplyCustomArray" class="btn btn-sm btn-primary">Apply</button>
           </div>
        </div>

        <!-- ZONE 3: DEEP DIVE (Info & Code) -->
        <div class="info-grid">
          <!-- Left: Info Panel -->
          <div class="info-panel">
             <div class="notebook-card">
                <h3 id="algoTitle" class="mb-2">âš¡ Quick Sort</h3>
                <p id="algoDesc" class="mb-3" style="font-size: 0.9rem; line-height: 1.6;">
                  Quick Sort picks a "pivot" element and partitions the array into two sub-arrays: elements less than pivot vs. elements greater. It then recursively sorts the sub-arrays. Efficient and widely used!
                </p>
                
                <h4 style="font-size: 0.85rem; text-transform: uppercase; color: var(--text-muted); margin-bottom: 0.5rem;">Time Complexity</h4>
                <div class="complexity-table">
                  <div class="complexity-cell">
                    <div class="complexity-label">Best</div>
                    <div class="complexity-value good" id="bestCase">O(n log n)</div>
                  </div>
                  <div class="complexity-cell">
                    <div class="complexity-label">Avg</div>
                    <div class="complexity-value medium" id="avgCase">O(n log n)</div>
                  </div>
                  <div class="complexity-cell">
                    <div class="complexity-label">Worst</div>
                    <div class="complexity-value bad" id="worstCase">O(nÂ²)</div>
                  </div>
                </div>
             </div>
             
             <!-- REMOVED: Extra Options Card (Rainbow Mode, Hints) as requested -->
          </div>

          <!-- Right: Code Panel (Already Modern) -->
          <div class="code-panel-unified" style="height: 100%; min-height: 400px;
            background: linear-gradient(145deg, rgba(30, 35, 45, 0.95), rgba(20, 25, 32, 0.98));
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.08);
          ">
            <div class="code-panel-header" style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.5rem 1rem;
              background: rgba(255, 255, 255, 0.03);
              border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            ">
              <div class="code-lang-tabs" style="display: flex; gap: 0.25rem;">
                <button type="button" class="lang-tab active" data-lang="js" onclick="switchCodeLanguage('js')">JS</button>
                <button type="button" class="lang-tab" data-lang="python" onclick="switchCodeLanguage('python')">Python</button>
                <button type="button" class="lang-tab" data-lang="java" onclick="switchCodeLanguage('java')">Java</button>
              </div>
              <button class="copy-btn" onclick="copyAlgorithmCode()" style="
                display: flex;
                align-items: center;
                gap: 0.4rem;
                padding: 0.4rem 0.75rem;
                font-size: 0.75rem;
                font-weight: 500;
                border-radius: 6px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                background: rgba(255, 255, 255, 0.05);
                color: rgba(255, 255, 255, 0.8);
                cursor: pointer;
                transition: all 0.2s ease;
              ">
                <span style="font-size: 0.9rem;">ğŸ“‹</span> Copy
              </button>
            </div>
            
            <!-- Clean Code Content -->
            <pre id="algorithmCode" style="
              margin: 0;
              padding: 1.25rem;
              font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
              font-size: 0.85rem;
              line-height: 1.65;
              color: #e4e4e4;
              background: transparent;
              overflow-x: auto;
              white-space: pre;
            "><code style="color: inherit; background: transparent;">function quickSort(arr, lo = 0, hi = arr.length - 1) {
if (lo &lt; hi) {
  const pivot = arr[hi];
  let i = lo - 1;
  for (let j = lo; j &lt; hi; j++) {
    if (arr[j] &lt;= pivot) {
      i++;
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
  [arr[i + 1], arr[hi]] = [arr[hi], arr[i + 1]];
  const p = i + 1;
  quickSort(arr, lo, p - 1);
  quickSort(arr, p + 1, hi);
}
return arr;
}</code></pre>
          </div>
        </div>
        
        <!-- End Dashboard Layout -->
      </div><!-- End sortingVizContent -->

        <!-- Sound Panel (Full Width) -->
        <div class="control-panel mb-4">
          <div class="flex items-center justify-between mb-2">
            <span class="control-label">ğŸ”Š Sound</span>
          </div>
          <div id="soundToggle" class="sound-toggle" role="button" tabindex="0" aria-label="Toggle sound">
            <span class="icon" aria-hidden="true">ğŸ”‡</span>
            <span class="label">Sound Off</span>
            <span class="preset" id="currentPreset" style="display: none">Piano</span>
          </div>
          <div id="soundPresets" class="sound-presets" style="display: none" aria-label="Sound presets">
            <button class="preset-btn active" data-preset="piano" aria-label="Piano preset">
              ğŸ¹ Piano
            </button>
            <button class="preset-btn" data-preset="marimba" aria-label="Marimba preset">
              ğŸ¶ Marimba
            </button>
            <button class="preset-btn" data-preset="synth" aria-label="Synth preset">
              ğŸ¸ Synth
            </button>
            <button class="preset-btn" data-preset="bells" aria-label="Bells preset">
              ğŸ”” Bells
            </button>
            <button class="preset-btn" data-preset="lofi" aria-label="Lo-Fi preset">
              ğŸŒŠ Lo-Fi
            </button>
            <button class="preset-btn" data-preset="arcade" aria-label="Arcade preset">
              ğŸš€ Arcade
            </button>
            <button class="preset-btn" data-preset="orchestra" aria-label="Orchestra preset">
              ğŸ» Orchestra
            </button>
            <button class="preset-btn" data-preset="silent" aria-label="Silent preset">
              ğŸ”‡ Silent
            </button>
          </div>
          <div class="volume-row" aria-label="Master volume">
            <span class="vol-label">Volume</span>
            <input id="volumeSlider" type="range" min="0" max="100" value="70" class="slider"
              aria-label="Master volume slider" />
            <span id="volumeLabel" style="
                font-weight: 800;
                color: var(--text-muted);
                font-size: 0.9rem;
                width: 48px;
                text-align: right;
              ">70%</span>
          </div>
        </div>





        <!-- Mini-Quiz for Active Recall -->
        <div id="sortingQuizContainer" class="mt-4"></div>
      </div><!-- End sortingVizContent -->

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SUBSECTION: Searching Visualization Panel
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- SEARCHING VISUALIZATION -->
      <div id="viz-panel-searching" class="viz-category-panel" style="display: none;">
        <div class="paper-card mb-4">
          <!-- Algorithm Selector -->
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
            <h3 style="margin: 0;">ğŸ” Search Algorithm</h3>
            <select id="searchAlgoSelect" class="select-field" style="width: auto;">
              <option value="linear">ğŸ“ Linear Search</option>
              <option value="binary" selected>ğŸ¯ Binary Search</option>
            </select>
          </div>

          <!-- Top Row: Controls and Pseudo-code side by side -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">

            <!-- Left: Controls -->
            <div>
              <div style="display: flex; gap: 1rem; align-items: end; flex-wrap: wrap; margin-bottom: 1rem;">
                <div>
                  <label class="control-label">Search for</label>
                  <input type="number" id="searchTarget" class="input-field" value="377" style="width: 100px;">
                </div>
                <button class="btn btn-primary" id="btnSearchStart">â–¶ï¸ Search</button>
                <button class="btn btn-secondary" id="btnSearchReset">ğŸ”„ Reset</button>
              </div>

              <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                <div>
                  <label class="control-label">Array Size</label>
                  <input type="range" id="searchSizeSlider" min="8" max="20" value="15" class="slider"
                    style="width: 100px;">
                  <span id="searchSizeLabel" style="font-weight: 600; margin-left: 0.5rem;">15</span>
                </div>
                <button class="btn btn-secondary" id="btnSearchRandomize">ğŸ² Randomize</button>
                <div>
                  <label class="control-label">Speed</label>
                  <input type="range" id="searchSpeedSlider" min="200" max="2000" value="800" class="slider"
                    style="width: 80px;">
                </div>
              </div>

              <!-- Pointer Indicators (Binary Search only) -->
              <div id="searchPointers" style="display: flex; gap: 2rem; margin-top: 1.5rem; align-items: center;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-weight: 500;">low</span>
                  <div id="ptrLow"
                    style="width: 40px; height: 35px; background: #3b82f6; color: white; display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600;">
                    0</div>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-weight: 500;">mid</span>
                  <div id="ptrMid"
                    style="width: 40px; height: 35px; background: #22c55e; color: white; display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600;">
                    7</div>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-weight: 500;">high</span>
                  <div id="ptrHigh"
                    style="width: 40px; height: 35px; background: #f97316; color: white; display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600;">
                    14</div>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-left: 1rem;">
                  <span style="font-weight: 500;">Result</span>
                  <div id="searchResult"
                    style="width: 50px; height: 35px; background: var(--bg-card); border: 2px solid var(--border-soft); display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600; color: var(--text-muted);">
                    -</div>
                </div>
              </div>

              <!-- Linear Search Pointer (hidden by default) -->
              <div id="linearSearchPointers" style="display: none; gap: 2rem; margin-top: 1.5rem; align-items: center;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-weight: 500;">Current Index</span>
                  <div id="ptrLinearIdx"
                    style="width: 40px; height: 35px; background: #8b5cf6; color: white; display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600;">
                    0</div>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-left: 1rem;">
                  <span style="font-weight: 500;">Result</span>
                  <div id="linearSearchResult"
                    style="width: 50px; height: 35px; background: var(--bg-card); border: 2px solid var(--border-soft); display: flex; align-items: center; justify-content: center; border-radius: 6px; font-weight: 600; color: var(--text-muted);">
                    -</div>
                </div>
              </div>

              <!-- Playback Controls -->
              <div id="searchPlaybackControlsTop"
                style="display: flex; gap: 0.5rem; align-items: center; margin-top: 1rem; flex-wrap: wrap;">
                <button class="btn btn-secondary" id="btnSearchSkipBack" title="Skip to Start"
                  style="padding: 0.4rem 0.75rem; font-size: 0.85rem;">â®ï¸ Skip Back</button>
                <button class="btn btn-secondary" id="btnSearchStepBack" title="Step Back"
                  style="padding: 0.4rem 0.75rem; font-size: 0.85rem;">â—€ï¸ Step Back</button>
                <button class="btn btn-primary" id="btnSearchPlayPause" title="Play/Pause"
                  style="padding: 0.4rem 1rem; font-size: 0.85rem;">â–¶ï¸ Play</button>
                <button class="btn btn-secondary" id="btnSearchStepForward" title="Step Forward"
                  style="padding: 0.4rem 0.75rem; font-size: 0.85rem;">Step Forward â–¶ï¸</button>
                <button class="btn btn-secondary" id="btnSearchSkipForward" title="Skip to End"
                  style="padding: 0.4rem 0.75rem; font-size: 0.85rem;">Skip Forward â­ï¸</button>
                <span id="searchStepIndicator"
                  style="margin-left: 0.5rem; font-size: 0.85rem; color: var(--text-muted);">Step 0 / 0</span>
              </div>
            </div>

            <!-- Right: Pseudo-code -->
            <div id="searchPseudocode"
              style="background: #1e1e1e; border-radius: 8px; padding: 1rem; font-family: monospace; font-size: 0.85rem; color: #d4d4d4;">
              <!-- Binary Search pseudocode (default) -->
              <div id="binarySearchPseudo">
                <div id="pseudo-0" style="padding: 0.25rem 0.5rem; border-radius: 4px;">def binarySearch(arr, target):
                </div>
                <div id="pseudo-1" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">low = 0</div>
                <div id="pseudo-2" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">high =
                  len(arr) - 1</div>
                <div id="pseudo-3" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">while (low
                  &lt;= high):</div>
                <div id="pseudo-4" style="padding: 0.25rem 0.5rem; margin-left: 2rem; border-radius: 4px;">mid = (low +
                  high) // 2</div>
                <div id="pseudo-5" style="padding: 0.25rem 0.5rem; margin-left: 2rem; border-radius: 4px;">if (arr[mid]
                  == target):</div>
                <div id="pseudo-6" style="padding: 0.25rem 0.5rem; margin-left: 3rem; border-radius: 4px;">return mid
                </div>
                <div id="pseudo-7" style="padding: 0.25rem 0.5rem; margin-left: 2rem; border-radius: 4px;">elif
                  (arr[mid] &lt; target):</div>
                <div id="pseudo-8"
                  style="padding: 0.25rem 0.5rem; margin-left: 3rem; border-radius: 4px; color: #3b82f6;">low = mid + 1
                </div>
                <div id="pseudo-9" style="padding: 0.25rem 0.5rem; margin-left: 2rem; border-radius: 4px;">else:</div>
                <div id="pseudo-10"
                  style="padding: 0.25rem 0.5rem; margin-left: 3rem; border-radius: 4px; color: #f97316;">high = mid - 1
                </div>
                <div id="pseudo-11" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">return -1
                </div>
              </div>
              <!-- Linear Search pseudocode (hidden) -->
              <div id="linearSearchPseudo" style="display: none;">
                <div id="linear-pseudo-0" style="padding: 0.25rem 0.5rem; border-radius: 4px;">def linearSearch(arr,
                  target):</div>
                <div id="linear-pseudo-1" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">for i
                  in range(len(arr)):</div>
                <div id="linear-pseudo-2" style="padding: 0.25rem 0.5rem; margin-left: 2rem; border-radius: 4px;">if
                  arr[i] == target:</div>
                <div id="linear-pseudo-3" style="padding: 0.25rem 0.5rem; margin-left: 3rem; border-radius: 4px;">return
                  i</div>
                <div id="linear-pseudo-4" style="padding: 0.25rem 0.5rem; margin-left: 1rem; border-radius: 4px;">return
                  -1</div>
              </div>
            </div>
          </div>

          <!-- Explanation -->
          <div id="searchExplanation" style="
              padding: 0.75rem 1rem;
              background: var(--bg-cream);
              border-left: 4px solid var(--accent-forest);
              border-radius: 8px;
              color: var(--text-body);
              margin-bottom: 1rem;
              font-size: 0.95rem;
            ">
            Click "Search" to begin. The algorithm will automatically step through the search process.
          </div>

          <!-- Legend -->
          <div id="searchLegend" style="display: flex; gap: 1.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
            <!-- Binary Search Legend (default) -->
            <div id="binarySearchLegend">
              <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #3b82f6; border-radius: 50%;"></div>
                  <span style="font-size: 0.8rem;">Low</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 50%;"></div>
                  <span style="font-size: 0.8rem;">Mid</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #f97316; border-radius: 50%;"></div>
                  <span style="font-size: 0.8rem;">High</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: var(--text-muted); border-radius: 4px;"></div>
                  <span style="font-size: 0.8rem;">Eliminated</span>
                </div>
              </div>
            </div>
            <!-- Linear Search Legend (hidden) -->
            <div id="linearSearchLegend" style="display: none;">
              <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #8b5cf6; border-radius: 50%;"></div>
                  <span style="font-size: 0.8rem;">Current</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #6b7280; border-radius: 4px;"></div>
                  <span style="font-size: 0.8rem;">Checked</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 50%;"></div>
                  <span style="font-size: 0.8rem;">Found</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Array Visualization -->
          <div id="searchVizContainer"
            style="background: var(--bg-elevated); border-radius: 12px; padding: 1.5rem; overflow-x: auto;">
            <div id="searchVisualization" style="display: flex; gap: 2px; justify-content: center; min-height: 100px;">
              <!-- Array elements will be rendered here -->
            </div>
          </div>

          <!-- Code Snippets Panel -->
          <div style="margin-top: 1.5rem;">
            <h4 style="margin-bottom: 0.75rem;">ğŸ’» Code Implementation</h4>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
              <button class="btn btn-secondary search-code-tab active" data-lang="python"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">ğŸ Python</button>
              <button class="btn btn-secondary search-code-tab" data-lang="java"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">â˜• Java</button>
              <button class="btn btn-secondary search-code-tab" data-lang="cpp"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">âš¡ C++</button>
            </div>
            <div id="searchCodeContainer"
              style="background: #1e1e1e; border-radius: 8px; padding: 1rem; font-family: monospace; font-size: 0.8rem; color: #d4d4d4; overflow-x: auto; max-height: 300px;">
              <!-- Code will be dynamically inserted -->
            </div>
          </div>

        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SUBSECTION: Divide & Conquer Visualization Panel
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- DIVIDE & CONQUER VISUALIZATION -->
      <div id="viz-panel-divide-conquer" class="viz-category-panel" style="display: none;">
        <div class="paper-card mb-4">
          <!-- Algorithm Selector -->
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
            <h3 style="margin: 0;">âœ‚ï¸ Divide & Conquer Algorithm</h3>
            <select id="dcAlgoSelect" class="select-field" style="width: auto;">
              <option value="merge" selected>ğŸ”€ Merge Sort</option>
              <option value="quick">âš¡ Quick Sort</option>
            </select>
          </div>
          <p class="mb-3" style="color: var(--text-muted);">Watch how the algorithm divides the array, conquers
            subproblems, and combines results step-by-step.</p>

          <!-- Two-column layout: Controls + Pseudo-code -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1rem;">
            <!-- Left: Controls -->
            <div>
              <!-- Row 1: Array input -->
              <div style="display: flex; gap: 0.5rem; align-items: end; margin-bottom: 0.75rem; flex-wrap: wrap;">
                <div>
                  <label class="control-label" style="font-size: 0.75rem; text-transform: uppercase;">Array</label>
                  <input type="text" id="dcArray" class="input-field" value="38, 27, 43, 3, 9, 82, 10"
                    style="width: 180px;">
                </div>
                <button class="btn btn-primary" id="btnDCStart">â–¶ï¸ Start</button>
                <button class="btn btn-secondary" id="btnDCReset">ğŸ”„ Reset</button>
              </div>

              <!-- Row 2: Size and Speed -->
              <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 0.75rem; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <label class="control-label"
                    style="font-size: 0.75rem; text-transform: uppercase; margin: 0;">Size</label>
                  <input type="range" id="dcSizeSlider" min="4" max="12" value="7" class="slider" style="width: 60px;">
                  <span id="dcSizeLabel" style="font-size: 0.85rem; min-width: 20px;">7</span>
                </div>
                <button class="btn btn-secondary" id="btnDCRandomize">ğŸ² Randomize</button>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <label class="control-label"
                    style="font-size: 0.75rem; text-transform: uppercase; margin: 0;">Speed</label>
                  <input type="range" id="dcSpeedSlider" min="200" max="2000" value="800" class="slider"
                    style="width: 60px;">
                </div>
              </div>

              <!-- Playback Controls -->
              <div id="dcPlaybackControls" style="display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap;">
                <button class="btn btn-secondary" id="btnDCSkipBack" title="Skip to Start"
                  style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">â®ï¸ Skip Back</button>
                <button class="btn btn-secondary" id="btnDCStepBack" title="Step Back"
                  style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">â—€ï¸ Step Back</button>
                <button class="btn btn-primary" id="btnDCPlayPause" title="Play/Pause"
                  style="padding: 0.4rem 0.8rem; font-size: 0.8rem;">â–¶ï¸ Play</button>
                <button class="btn btn-secondary" id="btnDCStepForward" title="Step Forward"
                  style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">Step â–¶ï¸</button>
                <button class="btn btn-secondary" id="btnDCSkipForward" title="Skip to End"
                  style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">Skip â­ï¸</button>
                <span id="dcStepIndicator"
                  style="margin-left: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Step 0 / 0</span>
              </div>
            </div>

            <!-- Right: Pseudo-code -->
            <div id="dcPseudocode"
              style="background: #1e1e1e; border-radius: 8px; padding: 0.75rem; font-family: monospace; font-size: 0.8rem; color: #d4d4d4;">
              <!-- Merge Sort pseudocode (default) -->
              <div id="mergeSortPseudo">
                <div id="dc-pseudo-0" style="padding: 0.2rem 0.5rem; border-radius: 4px;">def mergeSort(arr, l, r):
                </div>
                <div id="dc-pseudo-1" style="padding: 0.2rem 0.5rem; margin-left: 1rem; border-radius: 4px;">if l &lt;
                  r:</div>
                <div id="dc-pseudo-2" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">mid = (l +
                  r) // 2</div>
                <div id="dc-pseudo-3"
                  style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fef3c7;">mergeSort(arr,
                  l, mid) # DIVIDE left</div>
                <div id="dc-pseudo-4"
                  style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fef3c7;">mergeSort(arr,
                  mid+1, r) # DIVIDE right</div>
                <div id="dc-pseudo-5"
                  style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #93c5fd;">merge(arr, l,
                  mid, r) # COMBINE</div>
              </div>
              <!-- Quick Sort pseudocode (hidden) -->
              <div id="quickSortPseudo" style="display: none;">
                <div id="qs-pseudo-0" style="padding: 0.2rem 0.5rem; border-radius: 4px;">def quickSort(arr, low, high):
                </div>
                <div id="qs-pseudo-1" style="padding: 0.2rem 0.5rem; margin-left: 1rem; border-radius: 4px;">if low &lt;
                  high:</div>
                <div id="qs-pseudo-2"
                  style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fcd34d;">pi =
                  partition(arr, low, high)</div>
                <div id="qs-pseudo-3" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">
                  quickSort(arr, low, pi - 1)</div>
                <div id="qs-pseudo-4" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">
                  quickSort(arr, pi + 1, high)</div>
              </div>
            </div>
          </div>

          <!-- Explanation (sticky) -->
          <div id="dcExplanation" style="
              position: sticky;
              top: 60px;
              z-index: 10;
              padding: 0.6rem 1rem;
              background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-cream) 100%);
              border-left: 4px solid var(--accent-forest);
              border-radius: 8px;
              color: var(--text-body);
              margin-bottom: 0.75rem;
              font-size: 0.85rem;
              box-shadow: 0 2px 8px rgba(0,0,0,0.1);
              backdrop-filter: blur(8px);
            ">
            Click "Start" to begin the visualization. Use the playback controls to step through the algorithm.
          </div>

          <!-- Legend -->
          <div id="dcLegend" style="display: flex; gap: 1.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
            <!-- Merge Sort Legend (default) -->
            <div id="mergeSortLegend">
              <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #f59e0b; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Dividing</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Base Case</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #3b82f6; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Merging</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #a855f7; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Sorted</span>
                </div>
              </div>
            </div>
            <!-- Quick Sort Legend (hidden) -->
            <div id="quickSortLegend" style="display: none;">
              <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #fcd34d; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Pivot</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #ef4444; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Swapping</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Sorted</span>
                </div>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <div style="width: 14px; height: 14px; background: #3b82f6; border-radius: 3px;"></div>
                  <span style="font-size: 0.8rem;">Partition</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Visualization Area -->
          <div id="dcVisualization" style="
              padding: 1.5rem;
              background: var(--bg-elevated);
              border-radius: 12px;
              min-height: 350px;
              overflow-x: auto;
            ">
            <div id="dcLevels" style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
              <!-- Levels will be rendered here -->
              <p style="color: var(--text-muted); font-size: 0.9rem;">Click "Start" to visualize the algorithm</p>
            </div>
          </div>

          <!-- Code Snippets Panel -->
          <div style="margin-top: 1.5rem;">
            <h4 style="margin-bottom: 0.75rem;">ğŸ’» Code Implementation</h4>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
              <button class="btn btn-secondary dc-code-tab active" data-lang="python"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">ğŸ Python</button>
              <button class="btn btn-secondary dc-code-tab" data-lang="java"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">â˜• Java</button>
              <button class="btn btn-secondary dc-code-tab" data-lang="cpp"
                style="padding: 0.4rem 1rem; font-size: 0.85rem;">âš¡ C++</button>
            </div>
            <div id="dcCodeContainer"
              style="background: #1e1e1e; border-radius: 8px; padding: 1rem; font-family: monospace; font-size: 0.8rem; color: #d4d4d4; overflow-x: auto; max-height: 300px;">
              <!-- Code will be dynamically inserted -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ALGORITHM SANDBOX -->
    <section id="section-algorithm-sandbox" class="section-hidden animate-in" aria-label="Algorithm Sandbox"
      data-section-accent="algorithms">
      <div class="page-header" style="position: relative;">
        <h1>ğŸ§ª Your Coding World</h1>
        <p>
          <strong>This is YOUR space!</strong> Write code, experiment freely, and watch your algorithms come to life.
          You're in control here â€” make mistakes, learn from them, and grow! ğŸš€
        </p>
      </div>



      <div class="sandbox-container">
        <!-- Left: Code Editor Panel -->
        <div class="sandbox-editor-panel">
          <div class="sandbox-code-editor" style="display: flex; flex-direction: column; flex: 1;">
            <div class="sandbox-editor-header">
              <h4>ğŸ“ Your Code</h4>
              <div class="sandbox-lang-selector">
                <button class="sandbox-lang-btn active" data-lang="python">ğŸ Python</button>
                <button class="sandbox-lang-btn" data-lang="java">â˜• Java</button>
                <button class="sandbox-lang-btn" data-lang="js">JS</button>
              </div>
            </div>
            <div class="control-group" style="padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-soft);">
              <label class="control-label" for="sandboxAlgoSelect">Algorithm Template</label>
              <select id="sandboxAlgoSelect" class="select-field" style="width: 100%;">
                <option value="bubble">ğŸ«§ Bubble Sort</option>
                <option value="insertion">ğŸ“¥ Insertion Sort</option>
                <option value="selection">ğŸ‘† Selection Sort</option>
                <option value="quick">âš¡ Quick Sort</option>
                <option value="merge">ğŸ”€ Merge Sort</option>
                <option value="linear">ğŸ” Linear Search</option>
                <option value="binary">ğŸ¯ Binary Search</option>
              </select>
            </div>
            <div class="sandbox-code-area" style="flex: 1; display: flex; flex-direction: column;">
              <!-- CodeMirror 6 Editor Mount Point -->
              <div id="sandboxEditorMount" class="sandbox-editor-container" style="
                flex: 1;
                width: 100%;
                height: 100%;
                border-radius: 0; /* Let parent handle it */
                overflow: hidden;
                background: #1a1a2e;
              "></div>

              <!-- Python Error Panel (hidden by default) - Enhanced Design -->
              <div id="sandboxErrorPanel" class="sandbox-error-panel" style="
                display: none;
                background: #fff;
                border: 2px solid #ef4444;
                border-radius: 8px;
                margin-top: 0.5rem;
                overflow: hidden;
                box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
                animation: slideDown 0.3s ease;
              ">
                <!-- Error Header - HIGH CONTRAST -->
                <div id="errorHeader" style="
                  background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
                  color: white;
                  padding: 0.75rem 1rem;
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                ">
                  <span style="font-size: 1.25rem;">âŒ</span>
                  <span id="errorTypeLabel" style="font-weight: 700; flex: 1; font-size: 1rem;">IndexError</span>
                  <span id="errorLineLabel" style="
                    background: rgba(255,255,255,0.2);
                    padding: 0.25rem 0.75rem;
                    border-radius: 12px;
                    font-size: 0.8rem;
                  ">Line <span id="errorLineNum">?</span></span>
                  <button id="errorDismissBtn" style="
                    background: rgba(255,255,255,0.2);
                    border: none;
                    cursor: pointer;
                    font-size: 1rem;
                    color: white;
                    padding: 0.25rem 0.5rem;
                    border-radius: 4px;
                    transition: background 0.2s;
                  " onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                    onmouseout="this.style.background='rgba(255,255,255,0.2)'">âœ•</button>
                </div>

                <!-- Error Body -->
                <div style="padding: 1rem;">
                  <!-- Main Error Message -->
                  <div id="errorMessage" style="
                    font-size: 1rem;
                    font-weight: 600;
                    color: #1f2937;
                    margin-bottom: 0.75rem;
                  ">Array index out of bounds</div>

                  <!-- Code Context Box -->
                  <div id="errorCodeContext" style="
                    background: #1e293b;
                    color: #e2e8f0;
                    padding: 0.75rem;
                    border-radius: 6px;
                    font-family: 'JetBrains Mono', 'Fira Code', monospace;
                    font-size: 0.85rem;
                    margin-bottom: 0.75rem;
                    display: none;
                  ">
                    <div style="color: #94a3b8; margin-bottom: 0.5rem;">What you tried:</div>
                    <div id="errorCodeLine" style="color: #f87171; padding-left: 1rem;">arr[j + 2000]</div>
                    <div style="color: #94a3b8; margin-top: 0.5rem;">Array info:</div>
                    <div id="errorArrayInfo" style="color: #60a5fa; padding-left: 1rem;">7 elements (indices 0-6)</div>
                  </div>

                  <!-- Explanation -->
                  <div id="errorExplanation" style="
                    color: #4b5563;
                    font-size: 0.9rem;
                    line-height: 1.5;
                    margin-bottom: 0.75rem;
                  "></div>

                  <!-- Suggestion Box -->
                  <div id="errorSuggestion" style="
                    background: #ecfdf5;
                    border-left: 4px solid #10b981;
                    padding: 0.75rem;
                    border-radius: 0 6px 6px 0;
                    display: none;
                  ">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                      <span>ğŸ’¡</span>
                      <strong style="color: #065f46;">How to fix:</strong>
                    </div>
                    <div id="errorSuggestionText" style="color: #047857; font-size: 0.9rem;"></div>
                    <code id="errorFixCode" style="
                      display: none;
                      background: #d1fae5;
                      padding: 0.5rem;
                      border-radius: 4px;
                      margin-top: 0.5rem;
                      font-family: 'JetBrains Mono', monospace;
                      font-size: 0.85rem;
                      color: #064e3b;
                    "></code>
                  </div>
                </div>
              </div>


            </div>
          </div>

          <!-- Algorithm Guidance Panel -->

        </div>

        <!-- Right: Visualization Panel -->
        <div class="sandbox-viz-panel">
          <!-- Algorithm Guidance Panel (Moved Here) -->


          <div class="sandbox-viz-container">
            <div class="sandbox-viz-header" style="display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                
                <!-- Left: Title & Toggle Button -->
                <div id="sandboxHeaderLeft" style="display: flex; align-items: center; gap: 1rem;">
                  <!-- Dynamic Toggle Button will be injected here -->
                </div>

                <!-- Center: Stats Counters -->
                <div class="hud-stats" style="margin: 0; background: transparent; padding: 0; box-shadow: none; border: none; gap: 1rem; justify-content: center;">
                   <div class="hud-stat-item" style="background: rgba(255,255,255,0.05); padding: 0.25rem 0.75rem; border-radius: 8px;">
                      <span style="font-size: 0.7rem; color: var(--text-muted);">Steps</span>
                      <span class="hud-stat-value" id="sandboxStepNum" style="font-size: 1rem;">0</span>
                   </div>
                   <div class="hud-stat-item" style="background: rgba(255,255,255,0.05); padding: 0.25rem 0.75rem; border-radius: 8px;">
                      <span style="font-size: 0.7rem; color: var(--text-muted);">Compares</span>
                      <span class="hud-stat-value" id="sandboxComparisons" style="font-size: 1rem;">0</span>
                   </div>
                   <div class="hud-stat-item" style="background: rgba(255,255,255,0.05); padding: 0.25rem 0.75rem; border-radius: 8px;">
                      <span style="font-size: 0.7rem; color: var(--text-muted);">Swaps</span>
                      <span class="hud-stat-value" id="sandboxSwaps" style="font-size: 1rem;">0</span>
                   </div>
                </div>
                
                <!-- Right: Array Input -->
                <div style="display: flex; align-items: center; justify-content: flex-end; gap: 0.75rem;">
                  <div class="control-group" style="margin: 0;">
                    <input type="text" id="sandboxArrayInput" class="input-field" 
                      placeholder="e.g., 5,2,8,1,9" 
                      style="width: 140px; font-size: 0.8rem; padding: 0.4rem; text-align: center;"
                      value="38,27,43,3,9,82,10">
                  </div>
                </div>
              </div>



            <!-- Canvas Visualization (60fps) - Restored & Taller -->
            <canvas id="sandboxCanvas" style="
              width: 100%;
              height: 300px;
              background: #0f0f1a;
              border-radius: 8px;
              display: block;
              margin-bottom: 0.75rem;
            "></canvas>

            <!-- DOM Fallback (hidden by default) -->
            <div id="sandboxArrayViz" class="sandbox-array-viz" style="display: none; height: 300px;"></div>
            <div id="sandboxPointers" class="sandbox-pointers"></div>

            <!-- Controls - right below visualization -->
            <div class="sandbox-controls" style="margin-top: 0.75rem;">
              <button id="sandboxRun" class="btn btn-primary">â–¶ï¸ Run</button>
              <button id="sandboxPause" class="btn btn-accent section-hidden">â¸ï¸ Pause</button>
              <button id="sandboxStepBack" class="btn btn-secondary">â®ï¸ Back</button>
              <button id="sandboxStep" class="btn btn-secondary">â­ï¸ Step</button>
              <button id="sandboxReset" class="btn btn-secondary">ğŸ”„ Reset</button>
              <div class="control-group" style="margin-left: 1rem; margin-bottom: 0;">
                <label class="control-label" style="font-size: 0.75rem; margin-bottom: 0.25rem;">Speed</label>
                <input type="range" id="sandboxSpeed" min="1" max="10" value="5" class="slider" style="width: 80px;">
              </div>
            </div>


            <!-- Variable Inspector: REMOVED - Now using inline annotations in code editor -->

            <!-- Timeline Scrubber -->
            <div id="sandboxTimeline" class="sandbox-timeline" style="margin-top: 0.75rem; display: none;">
              <div style="display: flex; align-items: center; gap: 0.75rem;">
                <span style="font-size: 0.75rem; color: var(--text-muted); min-width: 50px;" id="timelineStepLabel">Step
                  0</span>
                <input type="range" id="timelineSlider" min="0" max="100" value="0" class="slider"
                  style="flex: 1; height: 6px; accent-color: var(--accent-forest);">
                <span style="font-size: 0.75rem; color: var(--text-muted); min-width: 60px;" id="timelineMaxLabel">of
                  0</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-top: 0.25rem;">
                <span style="font-size: 0.7rem; color: var(--text-muted);">â®ï¸ Start</span>
                <span style="font-size: 0.7rem; color: var(--text-muted);">End â­ï¸</span>
              </div>
            </div>

            <!-- Enhanced Variable Inspector -->
            <div id="sandboxVarInspectorEnhanced" class="sandbox-var-inspector-enhanced"
              style="margin-top: 0.75rem; display: none;">
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
                <h5 style="margin: 0;">ğŸ” All Variables</h5>
                <button id="toggleVarInspector" class="btn btn-secondary"
                  style="padding: 0.2rem 0.5rem; font-size: 0.7rem;">
                  Collapse
                </button>
              </div>
              <div id="sandboxVarGridEnhanced" class="sandbox-var-grid-enhanced" style="
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 0.5rem;
                max-height: 150px;
                overflow-y: auto;
                padding: 0.5rem;
                background: var(--bg-elevated);
                border-radius: 8px;
              ">
                <!-- Variables will be dynamically populated -->
                <div class="var-empty-state" style="
                  grid-column: 1 / -1;
                  text-align: center;
                  color: var(--text-muted);
                  font-size: 0.8rem;
                  padding: 1rem;
                ">
                  Run or step to see variables
                </div>
              </div>
            </div>

            <!-- Step Explanation -->
            <div id="sandboxStepExplanation" class="sandbox-step-explanation" style="
              margin-top: 0.75rem;
              padding: 0.75rem;
              background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1));
              border-left: 3px solid var(--accent-forest);
              border-radius: 0 8px 8px 0;
              display: none;
            ">
              <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
                <span style="font-size: 1rem;">ğŸ’¡</span>
                <span style="font-weight: 600; font-size: 0.85rem; color: var(--accent-forest);">Current Step</span>
              </div>
              <div id="stepExplanationText" style="font-size: 0.85rem; color: var(--text-body);">
                Click Step or Run to see step-by-step explanations.
              </div>
            </div>

            <!-- Loop Progress: REMOVED - Now using inline annotations in code editor -->

            <!-- Control Flow Visualizer (Python Tutor-style) -->
            <div id="controlFlowContainer" style="margin-top: 0.75rem;"></div>

            <!-- Call Stack Viewer -->
            <div id="sandboxCallStack" class="sandbox-call-stack" style="
              margin-top: 0.75rem;
              padding: 0.75rem;
              background: var(--bg-elevated);
              border-radius: 8px;
              display: none;
            ">
              <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span style="font-size: 1rem;">ğŸ“š</span>
                <span style="font-weight: 600; font-size: 0.85rem;">Call Stack</span>
              </div>
              <div id="callStackFrames" style="
                display: flex;
                flex-direction: column-reverse;
                gap: 0.25rem;
                max-height: 120px;
                overflow-y: auto;
              ">
                <!-- Dynamic stack frames will be inserted here -->
                <div class="stack-frame-empty" style="
                  text-align: center;
                  color: var(--text-muted);
                  font-size: 0.8rem;
                  padding: 0.5rem;
                ">
                  No active function calls
                </div>
              </div>
            </div>

            <!-- Stats -->
            <!-- Stats moved to header -->
          </div>
        </div>
      </div>

      <!-- Algorithm Info Card -->
      <div class="paper-card mt-4">
        <h3 class="mb-2" id="sandboxAlgoTitle">ğŸ«§ Bubble Sort</h3>
        <p id="sandboxAlgoDesc" class="mb-3">
          Like bubbles rising in water, larger elements "bubble up" to the end of the array.
          We repeatedly step through the list, compare adjacent elements, and swap them if they're in the wrong order.
        </p>
        <div class="complexity-table">
          <div class="complexity-cell">
            <div class="complexity-label">Best Case</div>
            <div class="complexity-value good" id="sandboxBestCase">O(n)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">Average</div>
            <div class="complexity-value medium" id="sandboxAvgCase">O(nÂ²)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">Worst Case</div>
            <div class="complexity-value bad" id="sandboxWorstCase">O(nÂ²)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ALGORITHM RACE -->
    <section id="section-algorithm-race" class="section-hidden animate-in" aria-label="Algorithm Race">
      <div class="page-header">
        <h1>ğŸ Algorithm Race</h1>
        <p>
          Watch two sorting algorithms compete head-to-head on the same data set!
        </p>
      </div>

      <!-- Race Setup -->
      <div class="paper-card mb-4">
        <h3 class="mb-2">âš™ï¸ Race Setup</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
          <div class="control-group">
            <label class="control-label">Left Algorithm</label>
            <select id="raceAlgoLeft" class="select-field">
              <option value="bubble">Bubble Sort</option>
              <option value="selection">Selection Sort</option>
              <option value="insertion">Insertion Sort</option>
              <option value="merge" selected>Merge Sort</option>
              <option value="quick">Quick Sort</option>
              <option value="heap">Heap Sort</option>
            </select>
          </div>
          <div class="control-group">
            <label class="control-label">Right Algorithm</label>
            <select id="raceAlgoRight" class="select-field">
              <option value="bubble" selected>Bubble Sort</option>
              <option value="selection">Selection Sort</option>
              <option value="insertion">Insertion Sort</option>
              <option value="merge">Merge Sort</option>
              <option value="quick">Quick Sort</option>
              <option value="heap">Heap Sort</option>
            </select>
          </div>
        </div>
        <div class="control-group mt-3">
          <label class="control-label">Array Size</label>
          <input type="range" id="raceArraySize" min="10" max="50" value="20" class="slider" />
          <span id="raceArraySizeLabel">20 elements</span>
        </div>
        <div class="control-row mt-3" style="gap: 0.75rem;">
          <button id="btnRaceStart" class="btn btn-primary" style="flex: 1;">ğŸ Start Race!</button>
          <button id="btnRaceReset" class="btn btn-secondary">ğŸ”„ Reset</button>
        </div>
      </div>

      <!-- Race Visualizations -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <!-- Left Contestant -->
        <div class="paper-card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
            <h4 id="raceLeftTitle" style="color: var(--accent-forest)">Merge Sort</h4>
            <span id="raceLeftStatus"
              style="padding: 0.25rem 0.75rem; border-radius: 20px; background: var(--bg-card); font-size: 0.85rem;">Ready</span>
          </div>
          <div id="raceLeftCanvas"
            style="height: 200px; background: var(--bg-paper); border-radius: 8px; position: relative; overflow: hidden;">
            <!-- Bars rendered here -->
          </div>
          <div style="display: flex; justify-content: space-around; margin-top: 0.75rem; font-size: 0.9rem;">
            <span>Comparisons: <strong id="raceLeftComparisons">0</strong></span>
            <span>Swaps: <strong id="raceLeftSwaps">0</strong></span>
            <span>Time: <strong id="raceLeftTime">0ms</strong></span>
          </div>
          <div id="raceLeftProgress"
            style="height: 6px; background: var(--border-soft); border-radius: 3px; margin-top: 0.5rem; overflow: hidden;">
            <div id="raceLeftProgressBar"
              style="height: 100%; width: 0%; background: var(--accent-forest); transition: width 0.1s;"></div>
          </div>
        </div>

        <!-- Right Contestant -->
        <div class="paper-card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
            <h4 id="raceRightTitle" style="color: var(--accent-coral)">Bubble Sort</h4>
            <span id="raceRightStatus"
              style="padding: 0.25rem 0.75rem; border-radius: 20px; background: var(--bg-card); font-size: 0.85rem;">Ready</span>
          </div>
          <div id="raceRightCanvas"
            style="height: 200px; background: var(--bg-paper); border-radius: 8px; position: relative; overflow: hidden;">
            <!-- Bars rendered here -->
          </div>
          <div style="display: flex; justify-content: space-around; margin-top: 0.75rem; font-size: 0.9rem;">
            <span>Comparisons: <strong id="raceRightComparisons">0</strong></span>
            <span>Swaps: <strong id="raceRightSwaps">0</strong></span>
            <span>Time: <strong id="raceRightTime">0ms</strong></span>
          </div>
          <div id="raceRightProgress"
            style="height: 6px; background: var(--border-soft); border-radius: 3px; margin-top: 0.5rem; overflow: hidden;">
            <div id="raceRightProgressBar"
              style="height: 100%; width: 0%; background: var(--accent-coral); transition: width 0.1s;"></div>
          </div>
        </div>
      </div>

      <!-- Winner Banner -->
      <div id="raceWinnerBanner" class="paper-card mt-4 collapsed"
        style="text-align: center; padding: 2rem; border: 3px solid var(--accent-amber);">
        <span style="font-size: 3rem">ğŸ†</span>
        <h2 id="raceWinnerText" style="color: var(--accent-amber); margin: 0.5rem 0">Winner!</h2>
        <p id="raceWinnerStats" style="color: var(--text-muted)">Stats here</p>
      </div>
    </section>

    <!-- SEARCHING ALGORITHMS -->
    <section id="section-searching" class="section-hidden animate-in" aria-label="Searching Algorithms">
      <div class="page-header" style="margin-bottom: 1.5rem;">
        <h1 style="font-size: 1.75rem; margin-bottom: 0px;">ğŸ” Searching</h1>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO: Interactive Search Visualizer (Moved to Top)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO: Interactive Search Visualizer (Data Scanner Layout)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO: Immersive Search Stage (Big Bold Glass)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO: Precision Search Lab (Clean & Professional)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO: Reference Search Visualizer (Array Layout Replica)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="viz-panel-searching" class="search-ref-container mb-8">
        
        <!-- THE STAGE -->
        <div class="search-ref-stage">
           <div class="search-ref-header">Contiguous Memory</div>
           
           <!-- HUD (Heads Up Display) - Variables -->
           <div class="ref-stats-hud">
               <div class="hud-item">
                   <span class="hud-lbl" style="color: var(--accent-primary);">LOW</span>
                   <span id="hudLow" class="hud-val">-</span>
               </div>
               <div class="hud-item">
                   <span class="hud-lbl" style="color: var(--accent-amber);">MID</span>
                   <span id="hudMid" class="hud-val">-</span>
               </div>
               <div class="hud-item">
                   <span class="hud-lbl" style="color: var(--accent-secondary);">HIGH</span>
                   <span id="hudHigh" class="hud-val">-</span>
               </div>
           </div>

           <div class="search-ref-bracket"></div>
           
           <div id="searchVizContainer2" class="search-ref-array">
              <div id="searchVisualization2" style="display: flex; gap: 0; width: 100%; justify-content: center;"></div>
           </div>
           
           <!-- Overlay for Independent Pointers (Phase 6 Animation) -->
           <div id="searchPointerContainer2" class="ref-pointer-container">
              <!-- Pointers injected by JS -->
           </div>
        </div>

        <!-- CONTROLS & INPUTS (Phase 2 & 3 Placeholder) -->
        <div class="search-ref-controls-container" style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 2rem;">
           
           <!-- Row 1: The Input Deck -->
           <div class="search-control-wrapper">
              <span class="search-input-label">Custom Array:</span>
              <input type="text" id="searchCustomInput2" class="custom-array-input" placeholder="e.g. 10, 20, 30, 40...">
              <button id="btnSearchLoadCustom2" class="ref-btn primary">Load</button>
              <button id="btnSearchRandomize2" class="ref-btn" style="padding: 0.75rem 1rem;" title="Generate Random Array">ğŸ² Random</button>
           </div>
           
           <!-- Row 2: The Control Deck -->
           <div class="search-controls-bottom-row">
                <!-- Target -->
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span class="control-item-label">Target:</span>
                    <input type="number" id="searchTarget2" class="ref-input" value="377" style="width: 80px; text-align: center;">
                </div>

                <!-- Vertical Divider -->
                <div style="width: 1px; height: 24px; background: var(--border-soft); margin: 0 0.5rem;"></div>

                <!-- Edge Case -->
                <select id="searchScenarioSelect2" class="ref-btn" style="min-width: 300px;">
                    <option value="" disabled selected>Select Edge Case...</option>
                    <option value="first">Target at First (Best Case)</option>
                    <option value="last">Target at Last (Worst Case)</option>
                    <option value="missing">Target Not Found</option>
                    <option value="single">Single Element</option>
                    <option value="large">Large Dataset (30)</option>
                </select>

                <!-- Algorithm (Moved Here) -->
                <select id="searchAlgoSelect2" class="ref-btn" style="min-width: 220px;">
                    <option value="linear">Linear Search</option>
                    <option value="binary" selected>Binary Search</option>
                    <option value="ternary">Ternary Search</option> 
                </select>

                <!-- Vertical Divider -->
                <div style="width: 1px; height: 24px; background: var(--border-soft); margin: 0 0.5rem;"></div>

                <!-- Controls -->
                <div style="display: flex; gap: 0.5rem;">
                    <button id="btnSearchPlayPause2" class="ref-btn primary">â–¶ Search</button>
                    <button id="btnSearchReset2" class="ref-btn">Reset</button>
                </div>
           </div>
        </div>

        <!-- INFO & STATS (Phase 4 & 7) -->
        <!-- INFO & STATS (Phase 4 & 7) -->
        <!-- INFO & STATS (Phase 4 & 7) -->
        <div style="display: flex; justify-content: center; width: 100%;">
            <!-- Code (Centered) -->
            <div class="code-terminal">
               <div class="code-terminal-header">
                   <div class="code-terminal-title">Implementation</div>
                   <div class="code-terminal-tabs">
                       <span class="search-code-tab active" data-lang="python">Py</span>
                       <span class="search-code-tab" data-lang="java">Java</span>
                       <span class="search-code-tab" data-lang="cpp">C++</span>
                   </div>
               </div>
               <div id="searchCodeContainer2" class="code-terminal-body" style="padding: 1.5rem;"></div>
            </div>
        </div>

        <!-- Legacy Hooks (Hidden) -->
        <div style="display: none;">
           <div id="searchPointers2"><div id="ptrLow2"></div><div id="ptrMid2"></div><div id="ptrHigh2"></div><div id="searchResult2"></div></div>
           <div id="linearSearchPointers2"><div id="ptrLinearIdx2"></div><div id="linearSearchResult2"></div></div>
           <div id="searchExplanation2"></div><div id="searchStepIndicator2"></div>
           <div id="binarySearchPseudo2"></div><div id="linearSearchPseudo2"></div>
           <button id="btnSearchSkipBack2"></button><button id="btnSearchStepBack2"></button><button id="btnSearchStepForward2"></button>
           <input type="range" id="searchSizeSlider2"><span id="searchSizeLabel2"></span><input type="range" id="searchSpeedSlider2">
           <button id="btnSearchRandomize2"></button>
           <div id="ptrLowValue"></div><div id="ptrMidValue"></div><div id="ptrHighValue"></div><div id="searchResultValue"></div>
        </div>

      </div>

        <!-- Hidden Legacy Elements (Kept for JS compatibility if needed, though most IDs are re-mapped above) -->
        <div style="display: none;">
           <!-- Old Pointers Wrapper - Logic will need to target new elements or we map them in JS -->
           <div id="searchPointers2">
              <div id="ptrLow2"></div><div id="ptrMid2"></div><div id="ptrHigh2"></div><div id="searchResult2"></div>
           </div>
           <div id="linearSearchPointers2">
              <div id="ptrLinearIdx2"></div><div id="linearSearchResult2"></div>
           </div>
           <div id="searchPlaybackControlsTop2"></div>
           <div id="searchExplanation2"></div>
           <div id="searchLegend2"></div>
           <div id="searchPseudocode2"></div>
        </div>

      </div>

      <!-- Algorithm Category Tabs - REMOVED per user request to isolate Searching -->
      <div class="viz-tabs mb-4" style="display: none;"></div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸ“– The Library Story</h3>
        <p>You're in a library. A massive one. Your book is somewhere among 1,000 shelves...</p>
        <p class="mt-2"><strong>The Slow Way (Linear Search):</strong> Check every single book. One by one. Starting
          from aisle one. You might be here all dayâ€”or all week.</p>
        <p class="mt-2"><strong>The Smart Way (Binary Search):</strong> Books are alphabetized. Open to the middleâ€”is
          your book before or after? Cut the remaining books in half. Repeat. 1,000 books? That's about 10 checks. A
          billion books? Only 30 checks. <em>That's the power of logarithms.</em></p>
      </div>

      <!-- Problem-First Challenge (Brilliant-style) -->
      <div class="paper-card mb-4"
        style="background: linear-gradient(135deg, rgba(212, 168, 83, 0.1), rgba(224, 122, 95, 0.08)); border: 2px dashed var(--accent-gold);">
        <h3 class="mb-2" style="color: var(--accent-gold);">ğŸ§  Think First Challenge</h3>
        <p class="mb-3">Before we dive in, try this: You have a sorted list of 1 million numbers. How many comparisons
          would you need to find any number using:</p>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
          <div style="background: var(--bg-paper); padding: 1rem; border-radius: 8px; text-align: center;">
            <p style="font-weight: 600;">Linear Search?</p>
            <input type="text" id="thinkLinear" placeholder="Your guess..."
              style="width: 100%; padding: 0.5rem; border-radius: 6px; border: 1px solid var(--border-soft); margin-top: 0.5rem;">
          </div>
          <div style="background: var(--bg-paper); padding: 1rem; border-radius: 8px; text-align: center;">
            <p style="font-weight: 600;">Binary Search?</p>
            <input type="text" id="thinkBinary" placeholder="Your guess..."
              style="width: 100%; padding: 0.5rem; border-radius: 6px; border: 1px solid var(--border-soft); margin-top: 0.5rem;">
          </div>
        </div>
        <details style="cursor: pointer;">
          <summary style="font-weight: 600; color: var(--accent-forest);">ğŸ“– Reveal Answer</summary>
          <p style="margin-top: 0.75rem; padding: 0.75rem; background: var(--bg-paper); border-radius: 8px;">
            <strong>Linear:</strong> Up to 1,000,000 comparisons (worst case). <strong>Binary:</strong> Only ~20
            comparisons! (logâ‚‚ of 1 million â‰ˆ 20). That's why understanding algorithms matters.
          </p>
        </details>
      </div>

      <div class="grid-2 mb-4">
        <!-- Linear Search -->
        <div class="paper-card">
          <h3 class="mb-2">ğŸ“‹ Linear Search</h3>
          <p class="mb-3" style="color: var(--text-muted);">Check each element one by one until found. Works on any
            list.</p>

          <div class="complexity-table mb-3">
            <div class="complexity-cell">
              <div class="complexity-label">Time</div>
              <div class="complexity-value bad">O(n)</div>
            </div>
            <div class="complexity-cell">
              <div class="complexity-label">Space</div>
              <div class="complexity-value good">O(1)</div>
            </div>
            <div class="complexity-cell">
              <div class="complexity-label">Sorted?</div>
              <div class="complexity-value">No</div>
            </div>
          </div>

          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def linear_search(arr, target):
    for i in range(len(arr)):
        if arr[i] == target:
            return i  # Found!
    return -1  # Not found</code></pre>
          </div>
        </div>

        <!-- Binary Search -->
        <div class="paper-card" style="border: 2px solid var(--accent-forest);">
          <h3 class="mb-2">âš¡ Binary Search</h3>
          <p class="mb-3" style="color: var(--text-muted);">Repeatedly divide the search space in half. <strong>Requires
              sorted array!</strong></p>

          <div class="complexity-table mb-3">
            <div class="complexity-cell">
              <div class="complexity-label">Time</div>
              <div class="complexity-value good">O(log n)</div>
            </div>
            <div class="complexity-cell">
              <div class="complexity-label">Space</div>
              <div class="complexity-value good">O(1)</div>
            </div>
            <div class="complexity-cell">
              <div class="complexity-label">Sorted?</div>
              <div class="complexity-value">Yes</div>
            </div>
          </div>

          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def binary_search(arr, target):
    left, right = 0, len(arr) - 1
    while left &lt;= right:
        mid = (left + right) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1
    return -1</code></pre>
          </div>
        </div>
      </div>

      <div class="paper-card">
        <h3 class="mb-2">ğŸ¯ When to Use What?</h3>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="background: var(--bg-elevated);">
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-soft);">Scenario</th>
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-soft);">Best Choice
              </th>
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--border-soft);">Why</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Unsorted small list</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Linear Search</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Sorting overhead not worth it
              </td>
            </tr>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Sorted array, search once</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Binary Search</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(log n) is much faster</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem;">Unsorted, many searches</td>
              <td style="padding: 0.75rem;">Sort first, then Binary</td>
              <td style="padding: 0.75rem;">O(n log n) sort + O(log n) Ã— searches</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Interactive Search Visualizer MOVED to top -->
    </section>

    <!-- DIVIDE AND CONQUER -->
    <section id="section-divide-conquer" class="section-hidden animate-in" aria-label="Divide and Conquer">
      <div class="page-header">
        <h1>âœ‚ï¸ Divide and Conquer</h1>
        <p>The oldest trick in the algorithm book: got a huge problem? Split it. Solve the pieces. Combine the answers.
          Merge Sort, Quick Sort, Binary Searchâ€”they all use this pattern.</p>
      </div>

      <!-- Algorithm Category Tabs -->
      <div class="viz-tabs mb-4"
        style="display: flex; gap: 0.5rem; flex-wrap: wrap; background: var(--bg-elevated); padding: 0.5rem; border-radius: 12px;">
        <button class="viz-tab" data-viz-category="sorting" style="
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            background: transparent;
            color: var(--text-body);
          ">âš¡ Sorting</button>
        <button class="viz-tab" data-viz-category="searching" style="
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            background: transparent;
            color: var(--text-body);
          ">ğŸ” Searching</button>
        <button class="viz-tab active" data-viz-category="divide-conquer" style="
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            background: var(--accent-forest);
            color: white;
          ">âœ‚ï¸ D&C</button>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸ• The Pizza Problem</h3>
        <p>You've got a pizza the size of a table. How do you count every pepperoni? Don't stare at the whole thingâ€”cut
          it in half. Count each half separately. Add them up.</p>
        <p class="mt-2">Still too big? Cut again. Keep going until counting is easy. Then work backwards and combine
          your counts. That's <strong>Divide and Conquer</strong>: split â†’ solve â†’ combine.</p>
        <p class="mt-2" style="color: var(--text-muted); font-style: italic;">If this feels like recursion, that's
          because it is. D&amp;C and recursion are best friends.</p>
      </div>

      <div class="paper-card mb-4">
        <h3 class="mb-2">ğŸ”‘ The Three Steps</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
          <div style="background: var(--bg-elevated); padding: 1rem; border-radius: 8px;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">1ï¸âƒ£</div>
            <div style="font-weight: 600; color: var(--accent-forest);">DIVIDE</div>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">Break problem into smaller
              subproblems</p>
          </div>
          <div style="background: var(--bg-elevated); padding: 1rem; border-radius: 8px;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">2ï¸âƒ£</div>
            <div style="font-weight: 600; color: var(--accent-forest);">CONQUER</div>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">Solve subproblems recursively
            </p>
          </div>
          <div style="background: var(--bg-elevated); padding: 1rem; border-radius: 8px;">
            <div style="font-size: 2rem; margin-bottom: 0.5rem;">3ï¸âƒ£</div>
            <div style="font-weight: 600; color: var(--accent-forest);">COMBINE</div>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">Merge solutions together</p>
          </div>
        </div>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸ”€ Merge Sort (Classic D&C)</h3>
          <p class="mb-3" style="color: var(--text-muted);">Divide array in half, sort each half, merge sorted halves.
          </p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def merge_sort(arr):
    if len(arr) &lt;= 1:
        return arr
    
    mid = len(arr) // 2
    left = merge_sort(arr[:mid])   # Divide
    right = merge_sort(arr[mid:])  # Divide
    return merge(left, right)       # Combine

def merge(left, right):
    result = []
    i = j = 0
    while i &lt; len(left) and j &lt; len(right):
        if left[i] &lt;= right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    result.extend(left[i:])
    result.extend(right[j:])
    return result</code></pre>
          </div>
        </div>

        <div class="paper-card">
          <h3 class="mb-2">âš¡ Quick Sort</h3>
          <p class="mb-3" style="color: var(--text-muted);">Pick pivot, partition around it, recursively sort
            partitions.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def quick_sort(arr):
    if len(arr) &lt;= 1:
        return arr
    
    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x &lt; pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x &gt; pivot]
    
    return quick_sort(left) + middle + quick_sort(right)</code></pre>
          </div>
          <div class="complexity-table mt-3">
            <div class="complexity-cell">
              <div class="complexity-label">Best/Avg</div>
              <div class="complexity-value good">O(n log n)</div>
            </div>
            <div class="complexity-cell">
              <div class="complexity-label">Worst</div>
              <div class="complexity-value bad">O(nÂ²)</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recursion Fundamentals Card -->
      <div class="paper-card mb-4"
        style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-sage);">
        <h3 class="mb-2" style="color: var(--accent-sage);">ğŸ”„ Recursion Fundamentals</h3>
        <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1rem;">
          A function that calls itself. Every recursive function needs TWO parts:
        </p>
        <div class="grid-2 mb-3">
          <div
            style="background: var(--bg-elevated); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-forest);">
            <strong style="color: var(--accent-forest);">Base Case</strong>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">
              The condition that STOPS recursion. Without it = infinite loop!
            </p>
            <code style="font-size: 0.8rem; color: var(--accent-forest);">if n &lt;= 1: return n</code>
          </div>
          <div
            style="background: var(--bg-elevated); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-coral);">
            <strong style="color: var(--accent-coral);">Recursive Case</strong>
            <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem;">
              The function calls itself with a SMALLER problem.
            </p>
            <code style="font-size: 0.8rem; color: var(--accent-coral);">return n * factorial(n-1)</code>
          </div>
        </div>
        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
          <thead>
            <tr style="background: var(--accent-sage); color: white;">
              <th style="padding: 0.5rem; text-align: left;">Pattern</th>
              <th style="padding: 0.5rem; text-align: left;">Description</th>
              <th style="padding: 0.5rem; text-align: center;">Example</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Linear</strong></td>
              <td style="padding: 0.5rem;">One recursive call per level</td>
              <td style="padding: 0.5rem; text-align: center;">factorial(n)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
              <td style="padding: 0.5rem;"><strong>Binary</strong></td>
              <td style="padding: 0.5rem;">Two recursive calls (tree shape)</td>
              <td style="padding: 0.5rem; text-align: center;">fibonacci(n)</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Tail</strong></td>
              <td style="padding: 0.5rem;">Return is the recursive call itself</td>
              <td style="padding: 0.5rem; text-align: center;">loop(n, acc)</td>
            </tr>
            <tr>
              <td style="padding: 0.5rem;"><strong>Mutual</strong></td>
              <td style="padding: 0.5rem;">A calls B, B calls A</td>
              <td style="padding: 0.5rem; text-align: center;">isEven/isOdd</td>
            </tr>
          </tbody>
        </table>
        <div class="complexity-table mt-3">
          <div class="complexity-cell">
            <div class="complexity-label">Space (Stack)</div>
            <div class="complexity-value medium">O(depth)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">Factorial</div>
            <div class="complexity-value medium">O(n)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">Fib (naive)</div>
            <div class="complexity-value bad">O(2â¿)*</div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             Interactive D&C Visualizer
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="paper-card mb-4">
        <!-- Algorithm Selector -->
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
          <h3 style="margin: 0;">âœ‚ï¸ Interactive D&C Visualizer</h3>
          <select id="dcAlgoSelect2" class="select-field" style="width: auto;">
            <option value="merge" selected>ğŸ”€ Merge Sort</option>
            <option value="quick">âš¡ Quick Sort</option>
          </select>
        </div>
        <p class="mb-3" style="color: var(--text-muted);">Watch how the algorithm divides the array, conquers
          subproblems, and combines results step-by-step.</p>

        <!-- Two-column layout: Controls + Pseudo-code -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1rem;">
          <!-- Left: Controls -->
          <div>
            <!-- Row 1: Array input -->
            <div style="display: flex; gap: 0.5rem; align-items: end; margin-bottom: 0.75rem; flex-wrap: wrap;">
              <div>
                <label class="control-label" style="font-size: 0.75rem; text-transform: uppercase;">Array</label>
                <input type="text" id="dcArray2" class="input-field" value="38, 27, 43, 3, 9, 82, 10"
                  style="width: 180px;">
              </div>
              <button class="btn btn-primary" id="btnDCStart2">â–¶ï¸ Start</button>
              <button class="btn btn-secondary" id="btnDCReset2">ğŸ”„ Reset</button>
            </div>

            <!-- Row 2: Size and Speed -->
            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 0.75rem; flex-wrap: wrap;">
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <label class="control-label"
                  style="font-size: 0.75rem; text-transform: uppercase; margin: 0;">Size</label>
                <input type="range" id="dcSizeSlider2" min="4" max="12" value="7" class="slider" style="width: 60px;">
                <span id="dcSizeLabel2" style="font-size: 0.85rem; min-width: 20px;">7</span>
              </div>
              <button class="btn btn-secondary" id="btnDCRandomize2">ğŸ² Randomize</button>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <label class="control-label"
                  style="font-size: 0.75rem; text-transform: uppercase; margin: 0;">Speed</label>
                <input type="range" id="dcSpeedSlider2" min="200" max="2000" value="800" class="slider"
                  style="width: 60px;">
              </div>
            </div>

            <!-- Playback Controls -->
            <div id="dcPlaybackControls2" style="display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap;">
              <button class="btn btn-secondary" id="btnDCSkipBack2" title="Skip to Start"
                style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">â®ï¸ Skip Back</button>
              <button class="btn btn-secondary" id="btnDCStepBack2" title="Step Back"
                style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">â—€ï¸ Step Back</button>
              <button class="btn btn-primary" id="btnDCPlayPause2" title="Play/Pause"
                style="padding: 0.4rem 0.8rem; font-size: 0.8rem;">â–¶ï¸ Play</button>
              <button class="btn btn-secondary" id="btnDCStepForward2" title="Step Forward"
                style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">Step â–¶ï¸</button>
              <button class="btn btn-secondary" id="btnDCSkipForward2" title="Skip to End"
                style="padding: 0.4rem 0.6rem; font-size: 0.8rem;">Skip â­ï¸</button>
              <span id="dcStepIndicator2" style="margin-left: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Step
                0 / 0</span>
            </div>
          </div>

          <!-- Right: Pseudo-code -->
          <div id="dcPseudocode2"
            style="background: #1e1e1e; border-radius: 8px; padding: 0.75rem; font-family: monospace; font-size: 0.8rem; color: #d4d4d4;">
            <!-- Merge Sort pseudocode (default) -->
            <div id="mergeSortPseudo2">
              <div id="dc-pseudo2-0" style="padding: 0.2rem 0.5rem; border-radius: 4px;">def mergeSort(arr, l, r):
              </div>
              <div id="dc-pseudo2-1" style="padding: 0.2rem 0.5rem; margin-left: 1rem; border-radius: 4px;">if l &lt;
                r:</div>
              <div id="dc-pseudo2-2" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">mid = (l +
                r) // 2</div>
              <div id="dc-pseudo2-3"
                style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fef3c7;">mergeSort(arr,
                l, mid) # DIVIDE left</div>
              <div id="dc-pseudo2-4"
                style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fef3c7;">mergeSort(arr,
                mid+1, r) # DIVIDE right</div>
              <div id="dc-pseudo2-5"
                style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #93c5fd;">merge(arr, l,
                mid, r) # COMBINE</div>
            </div>
            <!-- Quick Sort pseudocode (hidden) -->
            <div id="quickSortPseudo2" style="display: none;">
              <div id="qs-pseudo2-0" style="padding: 0.2rem 0.5rem; border-radius: 4px;">def quickSort(arr, low, high):
              </div>
              <div id="qs-pseudo2-1" style="padding: 0.2rem 0.5rem; margin-left: 1rem; border-radius: 4px;">if low &lt;
                high:</div>
              <div id="qs-pseudo2-2"
                style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px; color: #fcd34d;">pi =
                partition(arr, low, high)</div>
              <div id="qs-pseudo2-3" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">
                quickSort(arr, low, pi - 1)</div>
              <div id="qs-pseudo2-4" style="padding: 0.2rem 0.5rem; margin-left: 2rem; border-radius: 4px;">
                quickSort(arr, pi + 1, high)</div>
            </div>
          </div>
        </div>

        <!-- Explanation (sticky) -->
        <div id="dcExplanation2" style="
            position: sticky;
            top: 60px;
            z-index: 10;
            padding: 0.6rem 1rem;
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-cream) 100%);
            border-left: 4px solid var(--accent-forest);
            border-radius: 8px;
            color: var(--text-body);
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            backdrop-filter: blur(8px);
          ">
          Click "Start" to begin the visualization. Use the playback controls to step through the algorithm.
        </div>

        <!-- Legend -->
        <div id="dcLegend2" style="display: flex; gap: 1.5rem; margin-bottom: 0.75rem; flex-wrap: wrap;">
          <!-- Merge Sort Legend (default) -->
          <div id="mergeSortLegend2">
            <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #f59e0b; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Dividing</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Base Case</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #3b82f6; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Merging</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #a855f7; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Sorted</span>
              </div>
            </div>
          </div>
          <!-- Quick Sort Legend (hidden) -->
          <div id="quickSortLegend2" style="display: none;">
            <div style="display: flex; gap: 1.5rem; flex-wrap: wrap;">
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #fcd34d; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Pivot</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #ef4444; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Swapping</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Sorted</span>
              </div>
              <div style="display: flex; align-items: center; gap: 0.5rem;">
                <div style="width: 14px; height: 14px; background: #3b82f6; border-radius: 3px;"></div>
                <span style="font-size: 0.8rem;">Partition</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Visualization Area -->
        <div id="dcVisualization2" style="
            padding: 1.5rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            min-height: 350px;
            overflow-x: auto;
          ">
          <div id="dcLevels2" style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
            <!-- Levels will be rendered here -->
            <p style="color: var(--text-muted); font-size: 0.9rem;">Click "Start" to visualize the algorithm</p>
          </div>
        </div>

        <!-- Code Snippets Panel -->
        <div style="margin-top: 1.5rem;">
          <h4 style="margin-bottom: 0.75rem;">ğŸ’» Code Implementation</h4>
          <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
            <button class="btn btn-secondary dc-code-tab active" data-lang="python"
              style="padding: 0.4rem 1rem; font-size: 0.85rem;">ğŸ Python</button>
            <button class="btn btn-secondary dc-code-tab" data-lang="java"
              style="padding: 0.4rem 1rem; font-size: 0.85rem;">â˜• Java</button>
            <button class="btn btn-secondary dc-code-tab" data-lang="cpp"
              style="padding: 0.4rem 1rem; font-size: 0.85rem;">âš¡ C++</button>
          </div>
          <div id="dcCodeContainer2"
            style="background: #1e1e1e; border-radius: 8px; padding: 1rem; font-family: monospace; font-size: 0.8rem; color: #d4d4d4; overflow-x: auto; max-height: 300px;">
            <!-- Code will be dynamically inserted -->
          </div>
        </div>
      </div>
    </section>

    <!-- DYNAMIC PROGRAMMING -->
    <section id="section-dp" class="section-hidden animate-in" aria-label="Dynamic Programming">
      <div class="page-header">
        <h1>ğŸ“ˆ Dynamic Programming</h1>
        <p>DP trips up everyone at first. If you're confused, welcome to the club. The core idea? <em>Remember what
            you've already computed so you don't calculate it twice.</em> That's it. Let's see why that's powerful.</p>
      </div>

      <!-- Prerequisite Box -->
      <div
        style="background: rgba(212, 168, 83, 0.15); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--accent-gold);">
        <p style="font-size: 0.8rem; margin: 0;"><strong>ğŸ“š Before you start:</strong> Make sure you understand
          <strong>recursion</strong> first. DP builds directly on recursive thinking.
        </p>
      </div>

      <!-- Problem-First Challenge (Brilliant-style) -->
      <div class="paper-card mb-4"
        style="background: linear-gradient(135deg, rgba(212, 168, 83, 0.1), rgba(224, 122, 95, 0.08)); border: 2px dashed var(--accent-gold);">
        <h3 class="mb-2" style="color: var(--accent-gold);">ğŸ§  Think First Challenge</h3>
        <p class="mb-3">Calculate <code>fib(5)</code> by hand. How many times do you calculate <code>fib(2)</code>?</p>
        <div
          style="background: var(--bg-paper); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem;">
          fib(5) = fib(4) + fib(3)<br>
          fib(4) = fib(3) + fib(2)<br>
          fib(3) = fib(2) + fib(1)<br>
          ...keep going...
        </div>
        <details style="cursor: pointer;">
          <summary style="font-weight: 600; color: var(--accent-forest);">ğŸ“– Reveal The Problem</summary>
          <p style="margin-top: 0.75rem; padding: 0.75rem; background: var(--bg-paper); border-radius: 8px;">You
            calculate <code>fib(2)</code> <strong>3 times</strong>, <code>fib(3)</code> <strong>2 times</strong>. This
            is the duplicate work DP eliminates. By storing results, each fib(n) is calculated only once. That's
            memoization.</p>
        </details>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸªœ The Staircase Problem</h3>
        <p>You're climbing a staircase with <strong>n</strong> steps. You can take 1 or 2 steps at a time. How many
          distinct ways can you reach the top?</p>
        <p class="mt-2"><strong>The insight:</strong> To reach step n, you either came from step n-1 (took 1 step) or
          step n-2 (took 2 steps). So: ways(n) = ways(n-1) + ways(n-2). Waitâ€”that's <em>Fibonacci</em>!</p>
        <p class="mt-2" style="color: var(--text-muted); font-style: italic;">Once this clicks, you'll start seeing DP
          problems everywhere. It clicked for me on the third example.</p>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸ”„ Top-Down (Memoization)</h3>
          <p class="mb-3" style="color: var(--text-muted);">Recursive approach with caching. "Remember what you've
            computed."</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def climb_stairs(n, memo={}):
    if n in memo:
        return memo[n]
    if n &lt;= 2:
        return n
    
    memo[n] = climb_stairs(n-1, memo) + climb_stairs(n-2, memo)
    return memo[n]

# Without memo: O(2^n) - exponential!
# With memo: O(n) - linear!</code></pre>
          </div>
        </div>

        <div class="paper-card" style="border: 2px solid var(--accent-forest);">
          <h3 class="mb-2">ğŸ“Š Bottom-Up (Tabulation)</h3>
          <p class="mb-3" style="color: var(--text-muted);">Iterative approach building up from base cases. Often more
            efficient.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def climb_stairs(n):
    if n &lt;= 2:
        return n
    
    dp = [0] * (n + 1)
    dp[1] = 1
    dp[2] = 2
    
    for i in range(3, n + 1):
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]

# Time: O(n), Space: O(n)
# Can optimize to O(1) space!</code></pre>
          </div>
        </div>
      </div>

      <div class="paper-card">
        <h3 class="mb-2">ğŸ’ Classic DP Problems</h3>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="background: var(--bg-elevated);">
              <th style="padding: 0.75rem; text-align: left;">Problem</th>
              <th style="padding: 0.75rem; text-align: left;">Key Insight</th>
              <th style="padding: 0.75rem; text-align: left;">Complexity</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Fibonacci</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">F(n) = F(n-1) + F(n-2)</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(n)</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">0/1 Knapsack</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Include item or skip it</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(n Ã— W)</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Longest Common Subsequence</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Match chars or skip</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(m Ã— n)</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem;">Coin Change</td>
              <td style="padding: 0.75rem;">Min coins for each amount</td>
              <td style="padding: 0.75rem;">O(n Ã— amount)</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Memoization vs Tabulation Comparison -->
      <div class="paper-card mb-4"
        style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-coral);">
        <h3 class="mb-2" style="color: var(--accent-coral);">âš”ï¸ Memoization vs Tabulation</h3>
        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
          <thead>
            <tr style="background: var(--accent-coral); color: white;">
              <th style="padding: 0.5rem; text-align: left;">Aspect</th>
              <th style="padding: 0.5rem; text-align: center;">Top-Down (Memo)</th>
              <th style="padding: 0.5rem; text-align: center;">Bottom-Up (Tab)</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Approach</strong></td>
              <td style="padding: 0.5rem; text-align: center;">Recursive + cache</td>
              <td style="padding: 0.5rem; text-align: center;">Iterative + table</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
              <td style="padding: 0.5rem;"><strong>Computes</strong></td>
              <td style="padding: 0.5rem; text-align: center;">Only needed subproblems</td>
              <td style="padding: 0.5rem; text-align: center;">All subproblems</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Stack Usage</strong></td>
              <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(depth) - can overflow</td>
              <td style="padding: 0.5rem; text-align: center; color: var(--accent-forest);">O(1) - no recursion</td>
            </tr>
            <tr>
              <td style="padding: 0.5rem;"><strong>Best When</strong></td>
              <td style="padding: 0.5rem; text-align: center;">Not all subproblems needed</td>
              <td style="padding: 0.5rem; text-align: center;">Need all / optimize space</td>
            </tr>
          </tbody>
        </table>
        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; text-align: center;">
          ğŸ’¡ Interview tip: Start with memoization (easier to write), optimize to tabulation if needed!
        </p>
      </div>
    </section>

    <!-- GREEDY ALGORITHMS -->
    <section id="section-greedy" class="section-hidden animate-in" aria-label="Greedy Algorithms">
      <div class="page-header">
        <h1>ğŸ’° Greedy Algorithms</h1>
        <p>The lazy genius strategy: at each step, just take the best option available right now. Sometimes it works
          perfectly. Sometimes it completely fails. The trick is knowing when it's safe to be greedy.</p>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸª™ The Coin Change Story</h3>
        <p>You're a cashier. Someone needs $0.63 in change. You want to use as few coins as possible. What do you do?
        </p>
        <p class="mt-2"><strong>The greedy instinct:</strong> Grab the biggest coin that fits! Quarter (25Â¢) â†’ Quarter
          (25Â¢) â†’ Dime (10Â¢) â†’ Penny â†’ Penny â†’ Penny = 6 coins. Pretty good!</p>
        <p class="mt-2" style="color: var(--accent-coral);"><strong>âš ï¸ Plot twist:</strong> Greedy doesn't always win.
          With coins [1, 3, 4] for amount 6: greedy picks 4+1+1 = 3 coins. But 3+3 = 2 coins is better! Sometimes you
          need DP.</p>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸ“… Activity Selection</h3>
          <p class="mb-3" style="color: var(--text-muted);">Given activities with start/end times, select max
            non-overlapping activities.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def activity_selection(activities):
    # Sort by end time (greedy choice!)
    activities.sort(key=lambda x: x[1])
    
    selected = [activities[0]]
    last_end = activities[0][1]
    
    for start, end in activities[1:]:
        if start >= last_end:
            selected.append((start, end))
            last_end = end
    
    return selected

# Why it works: Earliest finish leaves
# most room for other activities!</code></pre>
          </div>
        </div>

        <div class="paper-card">
          <h3 class="mb-2">ğŸ’ Fractional Knapsack</h3>
          <p class="mb-3" style="color: var(--text-muted);">Unlike 0/1 knapsack, you can take fractions of items.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def fractional_knapsack(items, capacity):
    # Sort by value/weight ratio
    items.sort(key=lambda x: x[0]/x[1], reverse=True)
    
    total_value = 0
    for value, weight in items:
        if capacity >= weight:
            total_value += value
            capacity -= weight
        else:
            # Take fraction
            total_value += value * (capacity / weight)
            break
    
    return total_value</code></pre>
          </div>
        </div>
      </div>

      <div class="paper-card">
        <h3 class="mb-2">âœ… When Greedy Works</h3>
        <ul style="color: var(--text-body); line-height: 1.8;">
          <li><strong>Greedy Choice Property:</strong> A locally optimal choice leads to globally optimal solution</li>
          <li><strong>Optimal Substructure:</strong> Optimal solution contains optimal solutions to subproblems</li>
          <li>Common examples: Huffman coding, Dijkstra's shortest path, Prim's/Kruskal's MST</li>
        </ul>
      </div>
    </section>
    <!-- PATHFINDING - Enhanced Educational Design -->
    <section id="section-pathfinding" class="section-hidden animate-in" aria-label="Pathfinding Algorithms">
      <div class="page-header">
        <h1>ğŸ§­ BFS Simulation (Breadth-First Search)</h1>
        <p id="pathAlgoDescription">
          Google Maps, social network "friend suggestions", and web crawlers all use graph algorithms. Watch BFS explore
          a graph level by levelâ€”once you see it, you'll understand why it always finds the shortest path.
        </p>
      </div>

      <!-- Step Counter Header -->
      <div id="stepHeader" class="step-counter-header"
        style="background: linear-gradient(135deg, rgba(209,196,233,0.3), rgba(237,231,246,0.2)); padding: 1rem 1.5rem; border-radius: 12px; margin-bottom: 1rem;">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <span id="stepNumber" style="font-size: 1.4rem; font-weight: 700; color: var(--accent-forest);">Step 0</span>
          <span style="color: var(--text-muted); font-size: 0.9rem;">â€” Click Step <span
              style="background: #4299e1; color: white; padding: 0.15rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Step</span>
            to advance one step at a time</span>
        </div>
      </div>

      <div class="grid-2 mb-4" style="gap: 1.5rem;">
        <!-- Left: Graph Canvas and Controls -->
        <div>
          <!-- Graph Canvas -->
          <div class="viz-container mb-3"
            style="background: #FAF5EF; border-radius: 16px; padding: 1rem; position: relative;">
            <canvas id="pathCanvas" class="viz-canvas" height="450" role="img" aria-label="Graph visualization"
              style="background: transparent; width: 100%;"></canvas>

            <!-- Instruction Overlay - Modern Glassmorphism -->
            <div id="pathInstructionOverlay"
              style="position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg, rgba(30,40,50,0.92), rgba(20,30,40,0.88));backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10;border-radius:16px;padding:2rem;text-align:center;">

              <!-- Decorative icon -->
              <div style="font-size: 2.5rem; margin-bottom: 1rem; filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));">ğŸ§­
              </div>

              <h2 style="font-size:1.25rem;font-weight:700;color:#fff;margin-bottom:1rem;letter-spacing:-0.02em;">
                Understanding Algorithm Colors</h2>

              <!-- Color Legend Cards -->
              <div style="display:flex;flex-wrap:wrap;gap:0.75rem;justify-content:center;margin-bottom:1.25rem;">
                <div
                  style="display:flex;align-items:center;gap:0.5rem;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);padding:0.6rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                  <div
                    style="width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg, #FFFFFF, #E8E8E8);border:2px solid rgba(255,255,255,0.5);box-shadow:0 2px 8px rgba(0,0,0,0.15);">
                  </div>
                  <div style="text-align:left;">
                    <div style="font-size:0.85rem;color:#fff;font-weight:600;">White</div>
                    <div style="font-size:0.7rem;color:#a0aec0;">Undiscovered</div>
                  </div>
                </div>
                <!-- Grey Color - In Queue/Stack -->
                <div
                  style="display:flex;align-items:center;gap:0.5rem;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);padding:0.6rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                  <div
                    style="width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg, #A0A0A0, #808080);border:2px solid rgba(255,255,255,0.3);box-shadow:0 2px 8px rgba(128,128,128,0.3);">
                  </div>
                  <div style="text-align:left;">
                    <div style="font-size:0.85rem;color:#fff;font-weight:600;">Grey</div>
                    <div style="font-size:0.7rem;color:#a0aec0;" id="overlayGreyLabel">In Queue/Stack</div>
                  </div>
                </div>
                <div
                  style="display:flex;align-items:center;gap:0.5rem;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);padding:0.6rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                  <div
                    style="width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg, #3C3C3C, #1C1C1C);border:2px solid rgba(255,255,255,0.2);box-shadow:0 2px 8px rgba(0,0,0,0.3);">
                  </div>
                  <div style="text-align:left;">
                    <div style="font-size:0.85rem;color:#fff;font-weight:600;">Black</div>
                    <div style="font-size:0.7rem;color:#a0aec0;">Processed</div>
                  </div>
                </div>
                <div
                  style="display:flex;align-items:center;gap:0.5rem;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);padding:0.6rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                  <div
                    style="width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg, #00E676, #00C853);border:2px solid rgba(255,255,255,0.3);box-shadow:0 2px 8px rgba(0,230,118,0.3);">
                  </div>
                  <div style="text-align:left;">
                    <div style="font-size:0.85rem;color:#fff;font-weight:600;">Green</div>
                    <div style="font-size:0.7rem;color:#a0aec0;">Start Node</div>
                  </div>
                </div>
                <div
                  style="display:flex;align-items:center;gap:0.5rem;background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);padding:0.6rem 1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.15);box-shadow:0 4px 16px rgba(0,0,0,0.2);">
                  <div
                    style="width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg, #FF5252, #D32F2F);border:2px solid rgba(255,255,255,0.3);box-shadow:0 2px 8px rgba(255,82,82,0.3);">
                  </div>
                  <div style="text-align:left;">
                    <div style="font-size:0.85rem;color:#fff;font-weight:600;">Red</div>
                    <div style="font-size:0.7rem;color:#a0aec0;">Goal Node</div>
                  </div>
                </div>
              </div>

              <!-- Algorithm-specific description (updated dynamically by JS) -->
              <p id="overlayAlgoDescription"
                style="color:#cbd5e1;font-size:0.85rem;max-width:400px;line-height:1.5;margin-bottom:1.5rem;">
                <strong style="color:#48bb78;">BFS</strong> uses <strong>Queue (FIFO)</strong> â€” explores level by
                level, always finds shortest path in unweighted graphs
              </p>

              <button id="btnStartPathSim"
                style="background:linear-gradient(135deg,#48bb78 0%,#38a169 100%);color:white;border:none;padding:0.9rem 2.5rem;font-size:1rem;font-weight:600;border-radius:12px;cursor:pointer;box-shadow:0 4px 20px rgba(72,187,120,0.4);transition:all 0.3s ease;letter-spacing:0.02em;">
                â–¶ Start Simulation
              </button>
            </div>
          </div>

          <!-- Legend -->
          <div class="path-legend"
            style="display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.02); border-radius: 8px;">
            <div style="display: flex; align-items: center; gap: 0.4rem;">
              <div style="width: 18px; height: 18px; border-radius: 50%; background: #2C2C2C; border: 2px solid #666;">
              </div>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Processed</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.4rem;">
              <div style="width: 18px; height: 18px; border-radius: 50%; background: #FFFFFF; border: 2px solid #999;">
              </div>
              <span style="font-size: 0.8rem; color: var(--text-muted);">In Queue / Unvisited</span>
            </div>
          </div>

          <!-- Statistics Badges - Matching Sorting Visualizer -->
          <div class="path-stats"
            style="display: flex; gap: 0.75rem; justify-content: center; margin-bottom: 1rem; flex-wrap: wrap;">
            <div class="stat-badge"
              style="background: linear-gradient(135deg, rgba(237,137,54,0.15), rgba(237,137,54,0.08)); border: 1px solid rgba(237,137,54,0.3); border-radius: 12px; padding: 0.5rem 1rem; text-align: center; min-width: 80px;">
              <div id="nodesExploredStat" style="font-size: 1.4rem; font-weight: 700; color: #ed8936;">0</div>
              <div
                style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">
                Explored</div>
            </div>
            <div class="stat-badge"
              style="background: linear-gradient(135deg, rgba(72,187,120,0.15), rgba(72,187,120,0.08)); border: 1px solid rgba(72,187,120,0.3); border-radius: 12px; padding: 0.5rem 1rem; text-align: center; min-width: 80px;">
              <div id="pathLengthStat" style="font-size: 1.4rem; font-weight: 700; color: #48bb78;">â€”</div>
              <div
                style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">
                Path</div>
            </div>
            <div class="stat-badge"
              style="background: linear-gradient(135deg, rgba(159,122,234,0.15), rgba(159,122,234,0.08)); border: 1px solid rgba(159,122,234,0.3); border-radius: 12px; padding: 0.5rem 1rem; text-align: center; min-width: 80px;">
              <div id="currentStepStat" style="font-size: 1.4rem; font-weight: 700; color: #9f7aea;">0</div>
              <div
                style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">
                Step</div>
            </div>
          </div>
          <!-- Control Buttons -->
          <div class="path-controls" style="display: flex; justify-content: center; gap: 0.75rem; margin-bottom: 1rem;">
            <button id="btnPathPlay" class="sim-btn play-btn"
              style="background: linear-gradient(135deg, #48bb78, #38a169); color: white; border: none; padding: 0.6rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.4rem; font-size: 0.9rem;">
              â–¶ Play
            </button>
            <button id="btnPathStep" class="sim-btn step-btn"
              style="background: linear-gradient(135deg, #4299e1, #3182ce); color: white; border: none; padding: 0.6rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.4rem; font-size: 0.9rem;">
              â­ Step
            </button>
            <button id="btnPathReset" class="sim-btn reset-btn"
              style="background: linear-gradient(135deg, #ed8936, #dd6b20); color: white; border: none; padding: 0.6rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.4rem; font-size: 0.9rem;">
              â†º Reset
            </button>
          </div>

          <!-- Speed Slider -->
          <div style="display: flex; align-items: center; gap: 0.75rem; justify-content: center;">
            <span style="font-size: 0.8rem; color: var(--text-muted);">Speed:</span>
            <input type="range" id="pathSpeedSlider" min="1" max="5" value="1" style="width: 150px;"
              aria-label="Simulation speed" />
            <span id="pathSpeedLabel" style="font-size: 0.8rem; color: var(--text-muted); min-width: 40px;">1x</span>
          </div>

          <!-- Algorithm Selector -->
          <div style="margin-top: 1rem; text-align: center;">
            <select id="pathAlgoSelect" class="select-field" style="width: auto; min-width: 200px;"
              aria-label="Choose algorithm">
              <option value="bfs">ğŸŒŠ Breadth-First Search (BFS)</option>
              <option value="dfs">ğŸ” Depth-First Search (DFS)</option>
              <option value="dijkstra">âš¡ Dijkstra's Algorithm</option>
              <option value="greedy">ğŸ¯ Greedy Best-First Search</option>
              <option value="astar">â­ A* Search Algorithm</option>
            </select>
          </div>

          <!-- Goal Node Selector -->
          <div
            style="margin-top: 0.75rem; text-align: center; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
            <label for="goalNodeSelect" style="font-size: 0.85rem; color: var(--text-muted);">
              ğŸ¯ Goal Node:
            </label>
            <select id="goalNodeSelect" class="select-field"
              style="width: auto; min-width: 80px; padding: 0.4rem 0.75rem;" aria-label="Choose goal node">
              <!-- Options populated dynamically based on current graph nodes -->
            </select>
          </div>

          <!-- Random Graph Generator -->
          <div
            style="margin-top: 1.25rem; padding: 1rem; background: var(--bg-elevated); border-radius: 12px; border: 1px solid var(--border-subtle);">
            <h4 style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.75rem; color: var(--text-primary);">
              ğŸ² Random Graph Generator
            </h4>

            <!-- Nodes Slider -->
            <div style="margin-bottom: 0.75rem;">
              <label
                style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.25rem;">
                <span>Nodes:</span>
                <span id="graphNodesLabel" style="font-weight: 600; color: var(--text-primary);">8</span>
              </label>
              <input type="range" id="graphNodesSlider" min="4" max="12" value="8" style="width: 100%; cursor: pointer;"
                aria-label="Number of nodes" />
            </div>

            <!-- Edges Slider -->
            <div style="margin-bottom: 1rem;">
              <label
                style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.25rem;">
                <span>Edges:</span>
                <span id="graphEdgesLabel" style="font-weight: 600; color: var(--text-primary);">10</span>
              </label>
              <input type="range" id="graphEdgesSlider" min="7" max="28" value="10"
                style="width: 100%; cursor: pointer;" aria-label="Number of edges" />
            </div>

            <!-- Generate Button -->
            <button id="btnGenerateRandomGraph" style="background: linear-gradient(135deg, #9F7AEA, #805AD5); color: white; 
                           border: none; padding: 0.6rem 1.2rem; border-radius: 8px; 
                           font-weight: 600; cursor: pointer; width: 100%; font-size: 0.9rem;
                           transition: all 0.2s ease;">
              ğŸ² Generate Random Graph
            </button>
          </div>

          <!-- Edge List Input (Custom Graph) -->
          <div class="edge-input-panel"
            style="margin-top: 1rem; padding: 1rem; background: var(--bg-elevated); border-radius: 12px; border: 1px solid var(--border-subtle);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
              <h4 style="font-size: 0.9rem; font-weight: 600; color: var(--text-primary); margin: 0;">
                ğŸ“ Edge List Input
              </h4>
              <span
                style="background: var(--accent-forest); color: white; padding: 0.15rem 0.5rem; border-radius: 12px; font-size: 0.65rem; font-weight: 700;">LIVE
                SYNC</span>
            </div>

            <textarea id="pathEdgeListInput" class="graph-text-input" spellcheck="false"
              style="width: 100%; height: 140px; background: var(--bg-paper); color: var(--text-code); border: 1px solid var(--border-soft); border-radius: 8px; padding: 0.75rem; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; resize: vertical;"
              placeholder="Enter edges (one per line):
0 1
1 2
2 3

For weighted:
0 1 5
1 2 3"></textarea>

            <p style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted); display: flex; gap: 0.5rem;">
              <span>ğŸ’¡</span>
              Type edges here and they'll appear on the canvas instantly. Format: "u v [w]"
            </p>
          </div>
        </div>

        <!-- Right: State Arrays Panel -->
        <div class="state-arrays-panel" style="display: flex; flex-direction: column; gap: 0.75rem;">

          <!-- BFS: Queue Display (Q) -->
          <div id="bfsQueueBox" class="state-array-box"
            style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">Q</div>
            <div id="queueGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- Queue items will be rendered here -->
            </div>
          </div>

          <!-- DFS: Stack Display (hidden by default) -->
          <div id="dfsStackBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">Stack
            </div>
            <div id="stackGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- Stack items will be rendered here -->
            </div>
          </div>

          <!-- Dijkstra: Priority Queue Display (hidden by default) -->
          <div id="dijkstraPQBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              Priority Queue</div>
            <div id="priorityQueueGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- Priority Queue items: (distance, node) pairs -->
            </div>
          </div>

          <!-- Greedy: Open List Display (hidden by default) -->
          <div id="greedyOpenListBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              ğŸ¯ Open List <span style="font-weight: 400; font-size: 0.8rem; color: var(--text-muted);">sorted by
                h(n)</span>
            </div>
            <div id="openListGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- Open List items: (h, node) pairs -->
            </div>
          </div>

          <!-- Greedy: Closed List Display (hidden by default) -->
          <div id="greedyClosedListBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              âœ… Closed List <span style="font-weight: 400; font-size: 0.8rem; color: var(--text-muted);">visited
                nodes</span>
            </div>
            <div id="closedListGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- Closed List items: visited nodes -->
            </div>
          </div>

          <!-- A*: Open List Display (hidden by default) -->
          <div id="astarOpenListBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              â­ Open List <span style="font-weight: 400; font-size: 0.8rem; color: var(--text-muted);">sorted by f = g +
                h</span>
            </div>
            <div id="astarOpenListGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- A* Open List items: (f, node) with g, h details -->
            </div>
          </div>

          <!-- A*: Closed List Display (hidden by default) -->
          <div id="astarClosedListBox" class="state-array-box"
            style="display: none; background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              âœ“ Closed List <span style="font-weight: 400; font-size: 0.8rem; color: var(--text-muted);">explored
                nodes</span>
            </div>
            <div id="astarClosedListGrid" style="display: flex; flex-wrap: wrap; gap: 6px; min-height: 40px;">
              <!-- A* Closed List items: visited nodes -->
            </div>
          </div>

          <!-- Visited Array -->
          <div class="state-array-box"
            style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">Visited
            </div>
            <div id="visitedGrid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
              <!-- Will show 0/1 for each node -->
            </div>
          </div>

          <!-- Distance Array -->
          <div class="state-array-box"
            style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">
              Distance</div>
            <div id="distanceGrid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
              <!-- Distance values for each node -->
            </div>
          </div>

          <!-- Parent Array -->
          <div class="state-array-box"
            style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">Parent
            </div>
            <div id="parentGrid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
              <!-- Parent node labels for each node -->
            </div>
          </div>

          <!-- DFS-specific: Start/End Time (hidden by default) -->
          <div id="dfsStateArrays" style="display: none;">
            <div class="state-array-box"
              style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem; margin-bottom: 0.75rem;">
              <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">Start
                Time</div>
              <div id="startTimeGrid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
              </div>
            </div>
            <div class="state-array-box"
              style="background: var(--card-bg); border: 1px solid var(--border-subtle); border-radius: 12px; padding: 1rem;">
              <div style="font-weight: 600; margin-bottom: 0.5rem; color: var(--text-primary); font-size: 0.9rem;">End
                Time</div>
              <div id="endTimeGrid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Story Card -->
      <div class="story-card">
        <h3 class="story-title">ğŸŒŠ The Two Explorers</h3>
        <p class="mb-2">
          Imagine two explorers trying to find treasure in a maze:
        </p>
        <p class="mb-2">
          <strong style="color: var(--accent-sky)">BFS (The Cautious Explorer)</strong>
          checks every room at each distance level before going deeper. She's
          systematicâ€”first all rooms 1 step away, then 2 steps, then 3. This
          guarantees finding the shortest path!
        </p>
        <p>
          <strong style="color: var(--accent-plum)">DFS (The Adventurous Explorer)</strong>
          picks a path and follows it as deep as possible before backtracking.
          He might find the treasure quickly if he's lucky, but his path isn't
          always the shortest.
        </p>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATA STRUCTURES > Arrays Section
           Purpose: Visual array operations with interactive controls
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- ARRAYS -->
    <!-- ARRAYS -->
    <!-- Component: section-ds-array -->
    <section id="section-ds-array" class="section-hidden animate-in" aria-label="Arrays">
      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>ğŸ“Š</span> Arrays
          </div>
          <div class="viz-stat-display">
            <span style="opacity: 0.7; margin-right: 0.5rem">Current State:</span>
            <code id="arrayState" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">[5, 12, 8, 3, 15, 7]</code>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="arrayCanvas" class="hero-canvas" height="300" role="img" aria-label="Array visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls">
          <!-- Input Group: Value and Index -->
          <div class="control-group">
            <span class="hero-label">Input:</span>
            <input type="number" id="arrayInput" class="hero-input" placeholder="Value" min="-999" max="999" aria-label="Value">
            <input type="number" id="arrayIndex" class="hero-input" placeholder="Index" min="0" style="width: 90px" aria-label="Index">
          </div>

          <!-- Action Buttons Group -->
          <div class="action-group">
            <button class="hero-btn btn-primary" onclick="DS.array.insert()" title="Insert value at index (O(n))">
                â• Insert
            </button>
            <button class="hero-btn btn-danger" onclick="DS.array.remove()" title="Remove at index (O(n))">
                ğŸ—‘ï¸ Remove
            </button>
            <button class="hero-btn btn-info" onclick="DS.array.search()" title="Find value (O(n))">
                ğŸ” Find
            </button>
            <button class="hero-btn btn-warning" onclick="DS.array.update()" title="Update value at index (O(1))">
                âœï¸ Update
            </button>
          </div>
        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        
        <!-- LEFT COL: Explanation & Big-O -->
        <div>
          <div class="paper-card mb-4">
            <h3 class="mb-2">What is an Array?</h3>
            <p>
              An array is a collection of items stored at contiguous memory locations. 
              The idea is to store multiple items of the same type together.
            </p>
            <div class="complexity-grid">
              <div class="complexity-item">
                <div class="complexity-label">Access</div>
                <div class="complexity-val val-good">O(1)</div>
              </div>
              <div class="complexity-item">
                <div class="complexity-label">Search</div>
                <div class="complexity-val val-bad">O(n)</div>
              </div>
              <div class="complexity-item">
                <div class="complexity-label">Insert</div>
                <div class="complexity-val val-bad">O(n)</div>
              </div>
              <div class="complexity-item">
                <div class="complexity-label">Delete</div>
                <div class="complexity-val val-bad">O(n)</div>
              </div>
            </div>
          </div>

          <!-- Big-O Reference Table -->
          <div class="paper-card" style="overflow-x: auto;">
            <h3 class="mb-2" style="font-size: 1.1rem; color: var(--text-muted);">Comparisons</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <thead>
                <tr style="border-bottom: 2px solid var(--border-soft);">
                  <th style="text-align: left; padding: 0.5rem;">Structure</th>
                  <th style="padding: 0.5rem;">Access</th>
                  <th style="padding: 0.5rem;">Search</th>
                  <th style="padding: 0.5rem;">Insert</th>
                  <th style="padding: 0.5rem;">Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr style="background: rgba(45, 106, 79, 0.05);">
                  <td style="padding: 0.5rem; font-weight: 600;">Array</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-forest);">O(1)</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(n)</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(n)</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(n)</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;">Linked List</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(n)</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-coral);">O(n)</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-forest);">O(1)*</td>
                  <td style="padding: 0.5rem; text-align: center; color: var(--accent-forest);">O(1)*</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- RIGHT COL: Metaphor & Scenario -->
        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ…¿ï¸</span>
            <div class="metaphor-content">
              <h4>Think of it like: A Parking Lot Row</h4>
              <p style="font-size: 0.95rem">
                An array is like a row of numbered parking spots. Each spot has a fixed number.
                You can instantly park in spot #5. But if you want to add a *new* spot between #3 and #4,
                you'd have to repaint all the lines and move every car down one spot!
              </p>
            </div>
          </div>

          <div class="challenge-card mb-3">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Scenario: Music Playlist
            </h3>
            <p class="mb-2">Manage a playlist of 100 songs:</p>
            <ul style="margin-left: 1.5rem; font-size: 0.9rem; list-style-type: disc;">
              <li><strong>Play song #42:</strong> Instant O(1). Great!</li>
              <li><strong>Add song at #1:</strong> Slow O(n). Must shift 99 songs.</li>
              <li><strong>Shuffle:</strong> Easy O(n) swaps.</li>
            </ul>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">Solution</h3>
            <p class="mb-0" style="font-size: 0.9rem;">
              Use Arrays when you need fast random access and size doesn't change often.
              For frequent insertions/deletions, consider a Linked List.
            </p>
          </div>
        </div>

      </div>
    </section>

    <!-- STACKS -->
    <section id="section-ds-stack" class="section-hidden animate-in" aria-label="Stacks">
      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>ğŸ“š</span> Stacks
          </div>
          <div class="viz-stat-display">
            <span style="opacity: 0.7; margin-right: 0.5rem">Top Element:</span>
            <code id="stackState" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">[15]</code>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="stackCanvas" class="hero-canvas" height="300" role="img" aria-label="Stack visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls">
          <!-- Input Group -->
          <div class="control-group">
            <span class="hero-label">Input:</span>
            <input type="number" id="stackInput" class="hero-input" placeholder="Value" min="1" max="999" aria-label="Stack value">
          </div>

          <!-- Action Buttons Group -->
          <div class="action-group">
            <button class="hero-btn btn-primary" onclick="DS.stack.push()" aria-label="Push">
                â¬†ï¸ Push
            </button>
            <button class="hero-btn btn-danger" onclick="DS.stack.pop()" aria-label="Pop">
                â¬‡ï¸ Pop
            </button>
            <button class="hero-btn btn-info" onclick="DS.stack.peek()" aria-label="Peek">
                ğŸ‘€ Peek
            </button>
          </div>
        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        <!-- LEFT COL -->
        <div>
          <div class="page-header" style="text-align: left; padding: 0; margin-bottom: 2rem; background: none;">
            <h1>What is a Stack?</h1>
            <p>
              Your browser's back button? A stack. Every function call in your code? A stack. The undo feature in every app?
              Stack. Last In, First Out (LIFO)â€”the data structure that's secretly everywhere.
            </p>
          </div>

           <!-- Stack vs Queue Comparison -->
           <div class="paper-card mb-3">
           <h3 class="mb-2" style="color: var(--accent-forest);">ğŸ“Š Stack vs Queue Comparison</h3>
           <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
             <thead>
               <tr style="background: var(--accent-forest); color: white;">
                 <th style="padding: 0.5rem; text-align: left; border-radius: 4px 0 0 0;">Aspect</th>
                 <th style="padding: 0.5rem; text-align: center;">Stack (LIFO)</th>
                 <th style="padding: 0.5rem; text-align: center; border-radius: 0 4px 0 0;">Queue (FIFO)</th>
               </tr>
             </thead>
             <tbody>
               <tr style="border-bottom: 1px solid var(--border-soft);">
                 <td style="padding: 0.5rem;"><strong>Principle</strong></td>
                 <td style="padding: 0.5rem; text-align: center;">Last In, First Out</td>
                 <td style="padding: 0.5rem; text-align: center;">First In, First Out</td>
               </tr>
               <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-paper);">
                 <td style="padding: 0.5rem;"><strong>Add</strong></td>
                 <td style="padding: 0.5rem; text-align: center;"><code>push()</code> â†’ Top</td>
                 <td style="padding: 0.5rem; text-align: center;"><code>enqueue()</code> â†’ Back</td>
               </tr>
               <tr style="border-bottom: 1px solid var(--border-soft);">
                 <td style="padding: 0.5rem;"><strong>Remove</strong></td>
                 <td style="padding: 0.5rem; text-align: center;"><code>pop()</code> â† Top</td>
                 <td style="padding: 0.5rem; text-align: center;"><code>dequeue()</code> â† Front</td>
               </tr>
               <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-paper);">
                 <td style="padding: 0.5rem;"><strong>Peek</strong></td>
                 <td style="padding: 0.5rem; text-align: center;"><code>peek()</code> â†’ Top</td>
                 <td style="padding: 0.5rem; text-align: center;"><code>front()</code> â†’ Front</td>
               </tr>
               <tr>
                 <td style="padding: 0.5rem;"><strong>Use Cases</strong></td>
                 <td style="padding: 0.5rem; text-align: center; font-size: 0.85rem;">Undo, Recursion, Parentheses</td>
                 <td style="padding: 0.5rem; text-align: center; font-size: 0.85rem;">BFS, Scheduling, Print Queue</td>
               </tr>
             </tbody>
           </table>
           <div class="complexity-table mt-3">
             <div class="complexity-cell">
               <div class="complexity-label">Push/Pop</div>
               <div class="complexity-value good">O(1)</div>
             </div>
             <div class="complexity-cell">
               <div class="complexity-label">Peek</div>
               <div class="complexity-value good">O(1)</div>
             </div>
             <div class="complexity-cell">
               <div class="complexity-label">Search</div>
               <div class="complexity-value medium">O(n)</div>
             </div>
           </div>
         </div>
        </div>

        <!-- RIGHT COL -->
        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ¥</span>
            <div class="metaphor-content">
              <h4>Think of it like: Pancake Stack</h4>
              <p style="font-size: 0.95rem">
                You can only add a pancake on top, and you can only eat the
                top pancake first. The first pancake you made is the last one
                you'll eat!
              </p>
            </div>
          </div>

          <div class="challenge-card mb-3">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Scenario: Browser Back Button
            </h3>
            <p class="mb-2">You visit these pages in order:</p>
            <ol style="margin-left: 1.5rem; color: var(--text-body)">
              <li>google.com</li>
              <li>youtube.com</li>
              <li>youtube.com/video123</li>
              <li>twitter.com</li>
            </ol>
            <p class="mt-2">
              <strong>You press "Back" twice. Where are you now?</strong>
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Solution: youtube.com
            </h3>
            <p class="mb-2">
              Browsers use a <strong>stack</strong> for history!
            </p>
            <div class="flex items-center mb-2">
              <span class="step-indicator">1</span>
              <div>
                <strong>First Back:</strong> Pop twitter â†’ Now at
                youtube.com/video123
              </div>
            </div>
            <div class="flex items-center">
              <span class="step-indicator">2</span>
              <div>
                <strong>Second Back:</strong> Pop video123 â†’ Now at
                youtube.com âœ“
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- QUEUES -->
    <section id="section-ds-queue" class="section-hidden animate-in" aria-label="Queues">
      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>ğŸ«</span> Queues
          </div>
          <div class="viz-stat-display">
            <span style="opacity: 0.7; margin-right: 0.5rem">Front Element:</span>
            <code id="queueState" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">[3]</code>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="queueCanvas" class="hero-canvas" height="300" role="img" aria-label="Queue visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls">
          <!-- Input Group -->
          <div class="control-group">
            <span class="hero-label">Input:</span>
            <input type="number" id="queueInput" class="hero-input" placeholder="Value" min="1" max="999" aria-label="Queue value">
          </div>

          <!-- Action Buttons Group -->
          <div class="action-group">
            <button class="hero-btn btn-primary" onclick="DS.queue.enqueue()" aria-label="Enqueue">
                â¡ï¸ Enqueue
            </button>
            <button class="hero-btn btn-danger" onclick="DS.queue.dequeue()" aria-label="Dequeue">
                â¬…ï¸ Dequeue
            </button>
            <button class="hero-btn btn-info" onclick="DS.queue.front()" aria-label="Front">
                ğŸ‘€ Front
            </button>
          </div>
        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        <!-- LEFT COL: Explanation -->
        <div>
          <div class="page-header" style="text-align: left; padding: 0; margin-bottom: 2rem; background: none;">
            <h1>What is a Queue?</h1>
            <p>
              Print jobs, customer service lines, web requestsâ€”anything that needs "First In, First Out" (FIFO) uses a queue.
              It's the only data structure that is actually fair.
            </p>
          </div>

          <div class="paper-card mb-3" style="border-left: 4px solid var(--accent-sage);">
            <h3 class="mb-2">Key Operations</h3>
            <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
              <li style="display: flex; align-items: center; gap: 0.75rem;">
                <span style="background: var(--bg-warm); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; font-weight: bold; color: var(--accent-forest)">enqueue(x)</span>
                <span>Add <strong>x</strong> to the BACK (Wait in line).</span>
              </li>
              <li style="display: flex; align-items: center; gap: 0.75rem;">
                <span style="background: var(--bg-warm); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; font-weight: bold; color: var(--accent-coral)">dequeue()</span>
                <span>Remove from the FRONT (Next please!).</span>
              </li>
              <li style="display: flex; align-items: center; gap: 0.75rem;">
                <span style="background: var(--bg-warm); padding: 0.25rem 0.5rem; border-radius: 4px; font-family: monospace; font-weight: bold; color: var(--accent-cyan)">front()</span>
                <span>Look at who is first without removing them.</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- RIGHT COL: Metaphor & Challenge -->
        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸšŒ</span>
            <div class="metaphor-content">
              <h4>Think of it like: The Bus Stop</h4>
              <p style="font-size: 0.95rem">
                The first person to arrive at the bus stop is the first one to get on the bus. 
                If you come late, you go to the back of the line!
              </p>
            </div>
          </div>

          <div class="challenge-card mb-3">
             <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Scenario: Printer Spooler
            </h3>
            <p class="mb-2">Three people send documents to print:</p>
            <ol style="margin-left: 1.5rem; color: var(--text-body)">
              <li>Alice sends "Resume.pdf" (10:00 AM)</li>
              <li>Bob sends "Photo.jpg" (10:01 AM)</li>
              <li>Charlie sends "Homework.docx" (10:02 AM)</li>
            </ol>
            <p class="mt-2">
              <strong>If the printer jams on the first job, which file is stuck?</strong>
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Solution: Resume.pdf
            </h3>
            <p class="mb-2">
              Queues are <strong>FIFO</strong>. Alice was first in, so she is first out (to the printer).
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- LINKED LISTS -->
    <section id="section-ds-linkedlist" class="section-hidden animate-in" aria-label="Linked Lists">
      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>ğŸ”—</span> Linked Lists
          </div>
          
          <!-- TYPE SELECTOR IN HEADER (Premium Feature) -->
          <div class="viz-stat-display" style="padding: 0; background: transparent; border: none;">
             <div class="control-group" style="margin: 0;">
                <span class="hero-label">Type:</span>
                <select id="llType" class="hero-input" style="width: 140px; cursor: pointer;" aria-label="Linked list type"
                  onchange="DS.linkedListType = this.value; DS.renderLinkedList(); showToast('Switched to ' + this.options[this.selectedIndex].text);">
                  <option value="singly">Singly</option>
                  <option value="doubly">Doubly</option>
                  <option value="circular">Circular</option>
                  <option value="dummy-head">Dummy Head</option>
                </select>
             </div>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="linkedListCanvas" class="hero-canvas" height="300" role="img" aria-label="Linked list visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls">
          <!-- Input Group -->
          <div class="control-group">
            <span class="hero-label">Inputs:</span>
            <input type="number" id="llInput" class="hero-input" style="width: 90px;" placeholder="Value" aria-label="Linked list value" />
            <span class="hero-label" style="margin-left: 0.5rem">@</span>
            <input type="number" id="llIndex" class="hero-input" style="width: 70px;" placeholder="Idx" aria-label="Linked list position" />
          </div>

          <!-- Action Buttons Group -->
          <div class="action-group">
            <button class="hero-btn btn-primary" onclick="DS.linkedList.insert()" aria-label="Insert node">
                â• Insert
            </button>
            <button class="hero-btn btn-danger" onclick="DS.linkedList.remove()" aria-label="Remove node">
                ğŸ—‘ï¸ Remove
            </button>
          </div>
        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        <!-- LEFT: Intro & Variants -->
        <div>
           <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-sky);">
            
            <!-- Context Header moved inside for better alignment -->
            <div class="mb-4">
               <h2 style="color: var(--accent-sky); margin-bottom: 0.5rem; font-size: 1.5rem;">The Classic Chain</h2>
               <p style="color: var(--text-body); font-size: 0.95rem; line-height: 1.5;">
                  Unlike arrays, Linked Lists don't need contiguous memory. Each node holds data and a pointer to the next one.
                  Great for insertions where you don't want to shift everything!
               </p>
            </div>

            <h3 class="mb-3" style="color: var(--accent-sky); border-bottom: 1px solid var(--border-soft); padding-bottom: 0.5rem;">
              ğŸ”— Variants Comparison
            </h3>
            
            <table style="width: 100%; border-collapse: separate; border-spacing: 0; font-size: 0.9rem;">
              <thead>
                <tr style="color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.05em;">
                  <th style="padding: 0.75rem 0.5rem; text-align: left; border-bottom: 2px solid var(--border-soft); width: 25%;">Variant</th>
                  <th style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 2px solid var(--border-soft); width: 20%;">Prev Ptr</th>
                  <th style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 2px solid var(--border-soft); width: 20%;">Circular</th>
                  <th style="padding: 0.75rem 0.5rem; text-align: left; border-bottom: 2px solid var(--border-soft);">Best Use</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Singly</strong></td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 1px solid var(--border-soft); opacity: 0.3;">âŒ</td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 1px solid var(--border-soft); opacity: 0.3;">âŒ</td>
                  <td style="padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--border-soft);">Stacks, Simple lists</td>
                </tr>
                <tr style="background: rgba(var(--accent-sky-rgb), 0.05);">
                  <td style="padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Doubly</strong></td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 1px solid var(--border-soft);">âœ…</td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center; border-bottom: 1px solid var(--border-soft); opacity: 0.3;">âŒ</td>
                  <td style="padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--border-soft);">Browser History</td>
                </tr>
                <tr>
                  <td style="padding: 0.75rem 0.5rem;"><strong>Circular</strong></td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center; opacity: 0.3;">âŒ</td>
                  <td style="padding: 0.75rem 0.5rem; text-align: center;">âœ…</td>
                  <td style="padding: 0.75rem 0.5rem;">Music Playlists</td>
                </tr>
              </tbody>
            </table>

            <div class="complexity-table mt-4 flex gap-4" style="flex-wrap: wrap;">
              <div class="complexity-cell" style="flex: 1; min-width: 120px;">
                <div class="complexity-label">Insert (at head)</div>
                <div class="complexity-value good">O(1)</div>
              </div>
              <div class="complexity-cell" style="flex: 1; min-width: 120px;">
                <div class="complexity-label">Search</div>
                <div class="complexity-value medium">O(n)</div>
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT: Metaphor & Challenge -->
        <div>
          <div class="metaphor-box mb-4">
            <span class="metaphor-icon" aria-hidden="true">ğŸ—ºï¸</span>
            <div class="metaphor-content">
              <h4>Think of it like: Treasure Hunt</h4>
              <p style="font-size: 0.95rem">
                Each clue tells you strictly where to find the next clue. You can't
                skip aheadâ€”you must follow the chain from the beginning!
              </p>
            </div>
          </div>
          
          <div class="challenge-card mb-4">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Scenario: Music Playlist
            </h3>
            <p class="mb-2">
              You want a "Repeat All" mode where the last song plays the first song next.
              Which structure is best?
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Solution: Circular Linked List
            </h3>
            <div class="flex items-start gap-3">
              <span class="step-indicator" style="margin-top: 2px;">âœ“</span>
              <div>
                <strong>Circular:</strong> The Tail points back to Head, creating an infinite loop. Perfect for playlists!
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- BINARY TREES -->
    <section id="section-ds-tree" class="section-hidden animate-in" aria-label="Binary Search Trees">
      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>ğŸŒ³</span> Binary Search Trees
          </div>
          <div class="viz-stat-display">
            <span style="opacity: 0.7; margin-right: 0.5rem">Root:</span>
            <code id="bstRootVal" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">50</code>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="bstCanvas" class="hero-canvas" height="360" role="img" aria-label="BST visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls" style="flex-direction: column; gap: 0.75rem; padding: 0.75rem 1rem;">
          
          <!-- Top Row: Main Operations -->
          <div class="flex items-center justify-between w-full" style="gap: 1rem;">
            <!-- Input -->
            <div class="control-group">
              <span class="hero-label">Value:</span>
              <input type="number" id="bstInput" class="hero-input" style="width: 80px;" placeholder="50" aria-label="BST value">
            </div>

            <!-- Actions -->
            <div class="action-group">
              <button class="hero-btn btn-primary" onclick="DS.bst.insert()" aria-label="Insert into BST">
                  â• Insert
              </button>
              <button class="hero-btn btn-info" onclick="DS.bst.search()" aria-label="Search BST">
                  ğŸ” Find
              </button>
              <button class="hero-btn btn-danger" onclick="DS.bst.delete()" aria-label="Delete from BST">
                  ğŸ—‘ï¸ Delete
              </button>
            </div>
          </div>

          <!-- Bottom Row: Traversals -->
          <div class="flex items-center justify-center w-full" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 0.5rem; gap: 1rem;">
              <span class="hero-label" style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7;">Animations:</span>
              <div class="flex gap-2">
                 <button class="hero-btn btn-secondary" style="font-size: 0.8rem; padding: 0.25rem 0.75rem;" onclick="DS.bst.traverseAnimated('preorder')">â†—ï¸ Pre-order</button>
                 <button class="hero-btn btn-secondary" style="font-size: 0.8rem; padding: 0.25rem 0.75rem;" onclick="DS.bst.traverseAnimated('inorder')">â†”ï¸ In-order</button>
                 <button class="hero-btn btn-secondary" style="font-size: 0.8rem; padding: 0.25rem 0.75rem;" onclick="DS.bst.traverseAnimated('postorder')">â†™ï¸ Post-order</button>
              </div>
          </div>

        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        <!-- LEFT: Intro & Properties -->
        <div>
           <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-sage);">
            
            <!-- Context Header moved inside for better alignment -->
            <div class="mb-4">
               <h2 style="color: var(--accent-sage); margin-bottom: 0.5rem; font-size: 1.5rem;">The Self-Organizing Tree</h2>
               <p style="color: var(--text-body); font-size: 0.95rem; line-height: 1.5;">
                  Everything to the left is smaller. Everything to the right is bigger. This simple rule turns searching from
                  O(n) into O(log n). It's like a dictionary that organizes itself!
               </p>
            </div>

            <h3 class="mb-3" style="color: var(--accent-sage); border-bottom: 1px solid var(--border-soft); padding-bottom: 0.5rem;">
              ğŸŒ² BST Properties
            </h3>

            <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 0.75rem;">
               <li style="display: flex; align-items: start; gap: 0.75rem;">
                  <span style="font-weight: bold; color: var(--accent-sage);">L</span>
                  <span><strong>Left Subtree:</strong> All nodes are &lt; than root.</span>
               </li>
               <li style="display: flex; align-items: start; gap: 0.75rem;">
                  <span style="font-weight: bold; color: var(--accent-sage);">R</span>
                  <span><strong>Right Subtree:</strong> All nodes are &gt; than root.</span>
               </li>
               <li style="display: flex; align-items: start; gap: 0.75rem;">
                  <span style="font-weight: bold; color: var(--accent-sage);">U</span>
                  <span><strong>Unique:</strong> Ideally no duplicate values.</span>
               </li>
            </ul>
             
            <div class="complexity-table mt-4 flex gap-4" style="flex-wrap: wrap;">
              <div class="complexity-cell" style="flex: 1; min-width: 120px;">
                <div class="complexity-label">Search (Avg)</div>
                <div class="complexity-value good">O(log n)</div>
              </div>
              <div class="complexity-cell" style="flex: 1; min-width: 120px;">
                <div class="complexity-label">Insert (Avg)</div>
                <div class="complexity-value good">O(log n)</div>
              </div>
            </div>
            <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; text-align: right;">
               *Worst case O(n) if unbalanced (like a line)
            </p>
          </div>
        </div>

        <!-- RIGHT: Traversal & Challenge -->
        <div>
          <div class="metaphor-box mb-4">
             <span class="metaphor-icon" aria-hidden="true">ğŸ“‚</span>
            <div class="metaphor-content">
              <h4>Think of it like: Filing System</h4>
              <p style="font-size: 0.95rem">
                Files A-M go in the top drawer, N-Z in the bottom. Inside A-M, A-F is left, G-M is right. 
                You eliminate half the possibilities with every step!
              </p>
            </div>
          </div>

          <div class="paper-card mb-4" style="border-left: 4px solid var(--accent-coral);">
             <h3 class="mb-3">ğŸš¶ Traversal Types</h3>
             <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.75rem; text-align: center; font-size: 0.85rem;">
                <div style="background: var(--bg-warm); padding: 0.75rem 0.5rem; border-radius: 6px;">
                   <strong>In-Order</strong><br>
                   <span style="font-size: 0.75rem; color: var(--text-muted)">Left, Root, Right</span><br>
                   <span style="color: var(--accent-forest); font-weight: bold;">(Sorted!)</span>
                </div>
                <div style="background: var(--bg-warm); padding: 0.75rem 0.5rem; border-radius: 6px;">
                   <strong>Pre-Order</strong><br>
                   <span style="font-size: 0.75rem; color: var(--text-muted)">Root, Left, Right</span><br>
                   <span style="color: var(--text-muted); font-weight: bold;">(Copy)</span>
                </div>
                <div style="background: var(--bg-warm); padding: 0.75rem 0.5rem; border-radius: 6px;">
                   <strong>Post-Order</strong><br>
                   <span style="font-size: 0.75rem; color: var(--text-muted)">Left, Right, Root</span><br>
                   <span style="color: var(--accent-coral); font-weight: bold;">(Delete)</span>
                </div>
             </div>
          </div>
          
        </div>
      </div>
    </section>



    <!-- HEAPS -->
    <!-- HEAPS -->
    <section id="section-ds-heap" class="section-hidden animate-in" aria-label="Heaps">
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title-group">
            <h1 class="hero-title">â›°ï¸ Heaps</h1>
            <p class="hero-subtitle">The "King of the Hill" data structure. Always gives you the max (or min) element instantly.</p>
          </div>
          <!-- Type Selector in Header -->
          <div class="hero-tools">
             <div class="segmented-control">
                <button class="seg-btn active" onclick="DS.switchHeapType('max', this)">Max-Heap</button>
                <button class="seg-btn" onclick="DS.switchHeapType('min', this)">Min-Heap</button>
             </div>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <canvas id="heapCanvas" class="hero-canvas" height="450" role="img" aria-label="Heap visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls">
           <!-- Input Group -->
           <div class="control-group">
              <span class="hero-label">Input:</span>
              <input type="number" id="heapInput" class="hero-input" placeholder="Value" onkeydown="if(event.key==='Enter') DS.heap.insert()">
           </div>
           
           <!-- Action Buttons (Grouped Tightly) -->
           <div class="action-group">
              <button class="hero-btn btn-primary" onclick="DS.heap.insert()">
                 <span>â• Insert</span>
              </button>
              <button class="hero-btn btn-accent" onclick="DS.heap.extractRoot()">
                 <span>â¬†ï¸ Extract</span>
              </button>
              <button class="hero-btn btn-secondary" onclick="DS.heap.peek()">
                 <span>ğŸ‘€ Peek</span>
              </button>
           </div>
           
           <!-- State Display -->
           <div class="viz-stat-display" style="margin-left: auto;">
               <span class="state-label">Array:</span>
               <code id="heapState" class="state-value">[]</code>
           </div>
        </div>
      </div>
      
      <!-- THEORY & CONTEXT GRID (Restored) -->
      <div class="grid-2 mt-4 mb-4">
        <!-- LEFT: Complexity & Formulas -->
        <div>
           <!-- Formulas -->
           <div class="paper-card mb-3" style="border-left: 4px solid var(--accent-coral);">
            <h3 class="mb-2" style="color: var(--accent-coral);">ğŸ“ Array Index Formulas</h3>
            <p class="text-sm text-muted mb-3">
              Heaps are complete binary trees stored efficiently in arrays:
            </p>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td class="p-2"><strong>Left Child</strong></td>
                  <td class="p-2 font-mono text-forest">2*i + 1</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td class="p-2"><strong>Right Child</strong></td>
                  <td class="p-2 font-mono text-forest">2*i + 2</td>
                </tr>
                <tr>
                  <td class="p-2"><strong>Parent</strong></td>
                  <td class="p-2 font-mono text-forest">floor((i-1)/2)</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Time Complexity -->
          <div class="complexity-table flex gap-4">
            <div class="complexity-cell flex-1">
              <div class="complexity-label">Insert</div>
              <div class="complexity-value medium">O(log n)</div>
            </div>
            <div class="complexity-cell flex-1">
              <div class="complexity-label">Extract</div>
              <div class="complexity-value medium">O(log n)</div>
            </div>
            <div class="complexity-cell flex-1">
              <div class="complexity-label">Peek</div>
              <div class="complexity-value good">O(1)</div>
            </div>
          </div>
        </div>

        <!-- RIGHT: Metaphor & Explanation -->
        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ¥</span>
            <div class="metaphor-content">
              <h4>Think of it like: Hospital ER</h4>
              <p style="font-size: 0.95rem">
                In an ER, patients are treated by <strong>severity</strong> (Priority), not arrival time.
                The most critical patient is always moved to the front. That's a Priority Queue!
              </p>
            </div>
          </div>

          <div class="solution-card">
            <h3 class="mb-2 text-forest">
               Why Arrays?
            </h3>
            <p class="mb-2 text-sm">
              Because heaps are <strong>Complete Binary Trees</strong> (filled left-to-right), we don't need pointers!
              We can just use math index calculations. This makes heaps extremely memory efficient and cache-friendly.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- HASH TABLES -->
    <section id="section-ds-hash" class="section-hidden animate-in" aria-label="Hash Tables">

      
      <!-- HERO VISUALIZER SECTION -->
      <div class="hero-section">
        <div class="hero-header">
          <div class="hero-title">
            <span>#ï¸âƒ£</span> Hash Tables
          </div>
          <div class="viz-stat-display">
            <span style="opacity: 0.7; margin-right: 0.5rem">Next Hash:</span>
            <code id="hashNextVal" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);">0</code>
          </div>
        </div>

        <!-- MAIN CANVAS -->
        <div class="hero-canvas-container">
          <!-- Taller canvas for vertical buckets -->
          <canvas id="hashCanvas" class="hero-canvas" height="800" role="img" aria-label="Hash Table visualization"></canvas>
        </div>

        <!-- CONTROLS HUD -->
        <div class="hero-controls" style="flex-direction: column; gap: 0.75rem; padding: 0.75rem 1rem;">
          
          <div class="flex items-center justify-between w-full" style="gap: 1rem;">
             <!-- Inputs -->
            <div class="flex gap-3" style="flex: 1;">
               <div class="control-group" style="flex: 1;">
                 <span class="hero-label">Key:</span>
                 <input type="text" id="hashKey" class="hero-input" style="width: 100%;" placeholder="Alice" aria-label="Key" oninput="DS.updateHashPreview(this.value)">
               </div>
               <div class="control-group" style="flex: 1;">
                 <span class="hero-label">Value:</span>
                 <input type="text" id="hashValue" class="hero-input" style="width: 100%;" placeholder="123-456" aria-label="Value">
               </div>
            </div>

            <!-- Actions -->
            <div class="action-group">
              <button class="hero-btn btn-primary" onclick="DS.hash.put()" aria-label="Put key-value">
                  ğŸ“¥ Put
              </button>
              <button class="hero-btn btn-info" onclick="DS.hash.get()" aria-label="Get value">
                  ğŸ” Get
              </button>
              <button class="hero-btn btn-danger" onclick="DS.hash.remove()" aria-label="Remove key">
                  ğŸ—‘ï¸ Remove
              </button>
            </div>
          </div>

        </div>
      </div>

      <!-- THEORY & CONTEXT GRID -->
      <div class="grid-2 mb-4">
        <!-- LEFT: Theory & Complexity -->
        <div>
           <div class="page-header" style="text-align: left; padding: 0; margin-bottom: 2rem; background: none;">
            <h1>The O(1) Magic</h1>
            <p>
              Arrays are fast if you know the index. But what if the index is a name? 
              Hash Tables use a math function to turn "Alice" into an index like `4`. Instant access!
            </p>
          </div>

           <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-lavender);">
            <div class="mb-4">
              <h3 style="color: var(--accent-lavender); margin-bottom: 0.5rem;">âš¡ Speed & Efficiency</h3>
              <p style="font-size: 0.9rem; opacity: 0.8;">
                 Perfect for lookups (Maps, Sets, Caches).
              </p>
            </div>

            <div class="complexity-table flex gap-4" style="flex-wrap: wrap;">
              <div class="complexity-cell" style="flex: 1;">
                <div class="complexity-label">Avg Access</div>
                <div class="complexity-value good">O(1)</div>
              </div>
              <div class="complexity-cell" style="flex: 1;">
                <div class="complexity-label">Worst Case</div>
                <div class="complexity-value bad">O(n)</div>
              </div>
               <div class="complexity-cell" style="flex: 1;">
                <div class="complexity-label">Load Factor</div>
                <div class="complexity-value medium">&lt; 0.7</div>
              </div>
            </div>
            <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; text-align: right;">
               *Worst case happens when many keys collide (end up in same bucket)
            </p>
          </div>
        </div>

        <!-- RIGHT: Metaphor & Scenario -->
        <div>
          <div class="metaphor-box mb-4">
             <span class="metaphor-icon" aria-hidden="true">ğŸ·ï¸</span>
            <div class="metaphor-content">
              <h4>Think of it like: Labeled Bins</h4>
              <p style="font-size: 0.95rem">
                You sort mail into 26 bins (A-Z). To find "Mom's" letter, you go straight to bin 'M'.
                You don't check 'A', 'B', 'C'...
              </p>
            </div>
          </div>

          <div class="paper-card mb-4" style="border-left: 4px solid var(--accent-coral);">
             <h3 class="mb-3">ğŸ’¥ Handling Collisions</h3>
             <p class="mb-3" style="font-size: 0.9rem;">What if "Mom" and "Mike" both go to bin 'M'?</p>
             
             <div style="background: var(--bg-warm); padding: 0.75rem; border-radius: 6px; margin-bottom: 0.5rem;">
                <strong>ğŸ”— Chaining (This Demo)</strong>
                <p style="font-size: 0.8rem; margin-top: 0.25rem;">Just make a list! Both letters stay in bin 'M', one after another.</p>
             </div>
             <div style="background: var(--bg-warm); padding: 0.75rem; border-radius: 6px;">
                <strong>ğŸƒ Open Addressing</strong>
                <p style="font-size: 0.8rem; margin-top: 0.25rem;">"Bin 'M' is full? I'll try 'N' next." (Linear Probing)</p>
             </div>
          </div>
          
          <div class="challenge-card">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Scenario: Phone Contacts
            </h3>
            <p style="margin-bottom: 0.5rem;">
              You have 500 contacts. When you tap "Alice", how does it find her number instantly without checking 500 names?
            </p>
            <div style="display: flex; gap: 0.5rem; font-size: 0.85rem; background: rgba(0,0,0,0.2); padding: 0.5rem; border-radius: 4px;">
               <span>Step 1: Hash("Alice") â†’ 42</span><br>
               <span>Step 2: Go to Index 42</span>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- GRAPHS -->
    <section id="section-ds-graph" class="section-hidden animate-in" aria-label="Graphs">
      <div class="page-header" style="margin-bottom: 1rem; padding-bottom: 0;">
        <h1>ğŸ•¸ï¸ Graphs</h1>
      </div>


      <!-- ============================================================
           INTERACTIVE GRAPH EDITOR (Moved to Top)
           ============================================================ -->
      <div class="graph-editor-container mb-8" id="graphEditorContainer">

        <!-- Header with Title -->
        <div class="graph-editor-header">
          <h3 class="graph-editor-title">ğŸ•¸ï¸ Interactive Graph Editor</h3>
          <p class="graph-editor-subtitle">Build, visualize, and explore graphs with real-time feedback</p>
        </div>

        <!-- Control Bar - Organized with Section Labels -->
        <div class="graph-controls">

          <!-- Section 1: Mode Selection -->
          <div class="graph-control-section">
            <span class="graph-section-label">Mode</span>
            <div class="graph-mode-buttons">
              <button class="graph-mode-btn active" data-mode="force" title="Drag to move nodes, physics simulation">
                <span class="mode-icon">âš¡</span>
                <span class="mode-name">Force</span>
              </button>
              <button class="graph-mode-btn" data-mode="draw" title="Click to add nodes, drag to connect">
                <span class="mode-icon">âœï¸</span>
                <span class="mode-name">Draw</span>
              </button>
              <button class="graph-mode-btn" data-mode="delete" title="Click to remove nodes/edges">
                <span class="mode-icon">ğŸ—‘ï¸</span>
                <span class="mode-name">Delete</span>
              </button>
            </div>
          </div>

          <!-- Section 2: Graph Type Options -->
          <div class="graph-control-section">
            <span class="graph-section-label">Graph Type</span>
            <div class="graph-toggles">
              <label class="graph-toggle-switch">
                <input type="checkbox" id="graphDirectedToggle" class="toggle-checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label-text">Directed <span class="toggle-hint">(arrows)</span></span>
              </label>
              <label class="graph-toggle-switch">
                <input type="checkbox" id="graphWeightedToggle" class="toggle-checkbox">
                <span class="toggle-slider"></span>
                <span class="toggle-label-text">Weighted <span class="toggle-hint">(edge values)</span></span>
              </label>
            </div>
          </div>

          <!-- Section 3: Quick Actions -->
          <div class="graph-control-section">
            <span class="graph-section-label">Actions</span>
            <div class="graph-actions">
              <button class="graph-action-btn graph-action-primary" id="graphLoadSample"
                title="Load a sample pentagon graph">
                <span class="action-icon">ğŸ“Š</span>
                <span class="action-text">Load Example</span>
              </button>
              <button class="graph-action-btn graph-action-danger" id="graphClear" title="Clear all nodes and edges">
                <span class="action-icon">ğŸ§¹</span>
                <span class="action-text">Clear All</span>
              </button>
            </div>
          </div>

        </div>

        <!-- Main Editor Panels -->
        <div class="graph-editor-panels">

          <!-- Left Panel: Text Input -->
          <div class="graph-text-panel">
            <div class="graph-panel-header">
              <h4 class="graph-panel-title">ğŸ“ Edge List Input</h4>
              <span class="graph-panel-badge">Live Sync</span>
            </div>
            <textarea id="graphEdgeInput" class="graph-text-input" spellcheck="false"
              placeholder="# Example:\nA-B\nB-C\nC-A\n\n# Weighted:\nA-B: 5"></textarea>
            <div class="graph-input-footer">
              <span class="input-hint">Format: A-B or A-B: 5</span>
            </div>
          </div>

          <!-- Center: Canvas -->
          <div class="graph-canvas-wrapper">
            <canvas id="graphEditorCanvas" width="800" height="500"></canvas>

            <!-- Context Help (changes based on mode) -->
            <div class="graph-context-help" id="graphContextHelp">
              <span class="help-mode">Force Mode:</span> Drag nodes to reposition. Physics simulation keeps graph
              organized.
            </div>
          </div>

          <!-- Right Panel: Properties -->
          <div class="graph-properties-panel">
            <h4 class="graph-panel-title">ğŸ“Š Properties</h4>
            <div class="graph-property-list">
              <div class="graph-property-item">
                <span class="property-label">Vertices</span>
                <span class="property-value" id="propVertices">0</span>
              </div>
              <div class="graph-property-item">
                <span class="property-label">Edges</span>
                <span class="property-value" id="propEdges">0</span>
              </div>
              <div class="graph-property-divider"></div>
              <div class="graph-property-item">
                <span class="property-label">ğŸŒ³ Is Tree?</span>
                <span class="property-value" id="propIsTree">â€”</span>
              </div>
              <div class="graph-property-item">
                <span class="property-label">ğŸ”— Connected?</span>
                <span class="property-value" id="propConnected">â€”</span>
              </div>
              <div class="graph-property-item">
                <span class="property-label">ğŸ”„ Has Cycle?</span>
                <span class="property-value" id="propHasCycle">â€”</span>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">The Social Network</h3>
        <p>Facebook friend suggestions? That's graph theory! Each person is a <strong>node</strong>, each friendship is
          an <strong>edge</strong>.</p>
        <p class="mt-2">"People you may know" = friends of friends = nodes 2 edges away!</p>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸ“‹ Graph Terminology</h3>
          <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
            <tbody>
              <tr>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Vertex (Node)</strong>
                </td>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);">A point in the graph</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Edge</strong></td>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);">Connection between two
                  vertices</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Directed</strong></td>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);">Edges have direction (Aâ†’B)
                </td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Undirected</strong>
                </td>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);">Edges go both ways (Aâ†”B)</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);"><strong>Weighted</strong></td>
                <td style="padding: 0.5rem; border-bottom: 1px solid var(--border-soft);">Edges have values (distances)
                </td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;"><strong>Degree</strong></td>
                <td style="padding: 0.5rem;">Number of edges connected to a node</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="paper-card">
          <h3 class="mb-2">ğŸ—ƒï¸ How to Store Graphs</h3>
          <div style="margin-bottom: 1rem;">
            <strong style="color: var(--accent-forest);">Adjacency List</strong> (Most Common)
            <p style="font-size: 0.85rem; color: var(--text-muted);">Each node stores list of neighbors. Space: O(V+E)
            </p>
          </div>
          <div class="code-block">
            <pre><code>graph = {
  'A': ['B', 'C'],
  'B': ['A', 'D'],
  'C': ['A', 'D'],
  'D': ['B', 'C']
}</code></pre>
          </div>
          <div style="margin-top: 1rem;">
            <strong style="color: var(--accent-sage);">Adjacency Matrix</strong>
            <p style="font-size: 0.85rem; color: var(--text-muted);">2D array where matrix[i][j]=1 if edge exists.
              Space: O(VÂ²)</p>
          </div>
        </div>
      </div>

      <!-- Graph Storage Comparison Table -->
      <div class="paper-card mb-4"
        style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-forest);">
        <h3 class="mb-2" style="color: var(--accent-forest);">ğŸ“Š Adjacency List vs Matrix Comparison</h3>
        <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
          <thead>
            <tr style="background: var(--accent-forest); color: white;">
              <th style="padding: 0.5rem; text-align: left;">Operation</th>
              <th style="padding: 0.5rem; text-align: center;">Adjacency List</th>
              <th style="padding: 0.5rem; text-align: center;">Adjacency Matrix</th>
            </tr>
          </thead>
          <tbody>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Space</strong></td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-forest);">O(V
                + E)</td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-coral);">O(VÂ²)
              </td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
              <td style="padding: 0.5rem;"><strong>Check Edge (Aâ†’B)?</strong></td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace;">O(degree)</td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-forest);">O(1)
              </td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft);">
              <td style="padding: 0.5rem;"><strong>Find All Neighbors</strong></td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-forest);">
                O(degree)</td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-coral);">O(V)
              </td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
              <td style="padding: 0.5rem;"><strong>Add Edge</strong></td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-forest);">O(1)
              </td>
              <td style="padding: 0.5rem; text-align: center; font-family: monospace; color: var(--accent-forest);">O(1)
              </td>
            </tr>
            <tr>
              <td style="padding: 0.5rem;"><strong>Best For</strong></td>
              <td style="padding: 0.5rem; text-align: center; font-size: 0.8rem;">Sparse graphs (few edges)</td>
              <td style="padding: 0.5rem; text-align: center; font-size: 0.8rem;">Dense graphs (many edges)</td>
            </tr>
          </tbody>
        </table>
        <div class="complexity-table mt-3">
          <div class="complexity-cell">
            <div class="complexity-label">BFS/DFS</div>
            <div class="complexity-value medium">O(V+E)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">Traversal</div>
            <div class="complexity-value medium">O(V+E)</div>
          </div>
          <div class="complexity-cell">
            <div class="complexity-label">All Pairs</div>
            <div class="complexity-value bad">O(VÂ³)*</div>
          </div>
        </div>
        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">
          *Floyd-Warshall algorithm for all-pairs shortest paths.
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸŒŠ BFS (Breadth-First Search)</h3>
          <p class="mb-3" style="color: var(--text-muted);">Explore level by level. Uses a <strong>queue</strong>. Good
            for shortest path in unweighted graphs.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>from collections import deque

def bfs(graph, start):
    visited = set()
    queue = deque([start])
    visited.add(start)
    
    while queue:
        node = queue.popleft()
        print(node)  # Process node
        
        for neighbor in graph[node]:
            if neighbor not in visited:
                visited.add(neighbor)
                queue.append(neighbor)</code></pre>
          </div>
        </div>

        <div class="paper-card">
          <h3 class="mb-2">ğŸ”ï¸ DFS (Depth-First Search)</h3>
          <p class="mb-3" style="color: var(--text-muted);">Go deep before backtracking. Uses a <strong>stack</strong>
            (or recursion). Good for detecting cycles.</p>
          <div class="code-block">
            <div class="code-header">Python</div>
            <pre><code>def dfs(graph, node, visited=None):
    if visited is None:
        visited = set()
    
    visited.add(node)
    print(node)  # Process node
    
    for neighbor in graph[node]:
        if neighbor not in visited:
            dfs(graph, neighbor, visited)</code></pre>
          </div>
        </div>
      </div>

      <div class="paper-card">
        <h3 class="mb-2">ğŸ¯ BFS vs DFS</h3>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="background: var(--bg-elevated);">
              <th style="padding: 0.75rem; text-align: left;">Aspect</th>
              <th style="padding: 0.75rem; text-align: left;">BFS</th>
              <th style="padding: 0.75rem; text-align: left;">DFS</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Data Structure</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Queue</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Stack / Recursion</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Shortest Path</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft); color: var(--accent-forest);">
                Yes (unweighted)</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft); color: var(--accent-coral);">No
              </td>
            </tr>
            <tr>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">Space</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(width of graph)</td>
              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-soft);">O(depth of graph)</td>
            </tr>
            <tr>
              <td style="padding: 0.75rem;">Use Case</td>
              <td style="padding: 0.75rem;">Shortest path, level order</td>
              <td style="padding: 0.75rem;">Cycle detection, topological sort</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Cycle Detection & Algorithm Use Cases -->
      <div class="grid-2 mb-4">
        <div class="paper-card"
          style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-coral);">
          <h3 class="mb-2" style="color: var(--accent-coral);">ğŸ”„ Cycle Detection</h3>
          <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1rem;">
            Detecting cycles is crucial for many algorithms!
          </p>
          <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
            <tbody>
              <tr style="border-bottom: 1px solid var(--border-soft);">
                <td style="padding: 0.5rem;"><strong>Undirected</strong></td>
                <td style="padding: 0.5rem;">DFS: if you visit a node already in your path</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                <td style="padding: 0.5rem;"><strong>Directed</strong></td>
                <td style="padding: 0.5rem;">Track "in-progress" nodes (gray color in 3-color scheme)</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;"><strong>Linked List</strong></td>
                <td style="padding: 0.5rem;">Floyd's Tortoise & Hare (slow/fast pointer)</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="paper-card"
          style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-sage);">
          <h3 class="mb-2" style="color: var(--accent-sage);">ğŸ—ºï¸ Common Graph Algorithms</h3>
          <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
            <tbody>
              <tr style="border-bottom: 1px solid var(--border-soft);">
                <td style="padding: 0.5rem;"><strong>Dijkstra's</strong></td>
                <td style="padding: 0.5rem;">Shortest path (weighted, non-negative)</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                <td style="padding: 0.5rem;"><strong>Bellman-Ford</strong></td>
                <td style="padding: 0.5rem;">Shortest path (negative weights OK)</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--border-soft);">
                <td style="padding: 0.5rem;"><strong>Topological Sort</strong></td>
                <td style="padding: 0.5rem;">DAG ordering (prerequisites, build order)</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;"><strong>MST (Prim/Kruskal)</strong></td>
                <td style="padding: 0.5rem;">Minimum spanning connections</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Scenario Card -->
      <div class="paper-card prereq-card mb-4" style="border-left: 4px solid var(--accent-coral);">
        <h3 class="mb-2" style="color: var(--accent-coral);">
           ğŸ¯ Scenario: Course Prerequisites
        </h3>
        <p class="mb-2">
           You have courses with prerequisites: CSE110 â†’ CSE220 â†’ CSE300. How do you find a valid course order?
        </p>
      </div>

      <div class="paper-card topo-card">
         <h3 class="mb-2 text-forest">
            Solution: Topological Sort!
         </h3>
         <p class="mb-3 text-sm">
            Model courses as nodes, prerequisites as directed edges. Topological sort gives a valid order!
         </p>
         <div style="background: rgba(0,0,0,0.03); padding: 0.75rem; border-radius: 6px; margin-bottom: 0.5rem;">
            <span class="badge badge-primary">1</span>
            <span class="font-mono text-sm ml-2">Build graph: CSE110 â†’ CSE220 â†’ CSE300</span>
         </div>
         <div style="background: rgba(0,0,0,0.03); padding: 0.75rem; border-radius: 6px;">
            <span class="badge badge-primary">2</span>
            <span class="font-mono text-sm ml-2">DFS post-order reverse = [CSE110, CSE220, CSE300] âœ“</span>
         </div>
      </div>



    </section>

    <!-- DATA STRUCTURES SANDBOX -->
    <section id="section-ds-sandbox" class="section-hidden animate-in" aria-label="Data Structures Sandbox">
      <div class="page-header" style="position: relative;">
        <h1>ğŸ§ª Your DS Playground</h1>
        <p>
          <strong>This is YOUR space!</strong> Experiment with data structures,
          see how they work internally, and build confidence through hands-on practice! ğŸš€
        </p>
      </div>

      <!-- Cody Helper Welcome Banner -->

      <!-- Main Sandbox Area -->
      <div class="paper-card mb-4">
        <div class="flex items-center justify-between mb-3" style="flex-wrap: wrap; gap: 1rem;">
          <h3 style="margin: 0;">ğŸ® Choose Your Data Structure</h3>
          <select id="dsSandboxSelect" class="select-field" style="width: auto; min-width: 280px;">
            <option value="array">ğŸ“Š Array</option>
            <option value="stack">ğŸ“š Stack (LIFO)</option>
            <option value="queue">ğŸ« Queue (FIFO)</option>
            <option value="linkedlist">ğŸ”— Linked List</option>
          </select>
        </div>

        <!-- Subtle hint that changes with DS selection -->
        <div id="dsSandboxHint" style="
            background: var(--bg-cream);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border-left: 4px solid var(--accent-forest);
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: var(--text-muted);
          ">
          ğŸ’¡ <strong>Array:</strong> Access O(1) â€¢ Insert/Delete O(n) â€¢ Best for indexed access
        </div>

        <!-- Operations -->
        <div class="flex gap-2 mb-3" style="flex-wrap: wrap; align-items: center;">
          <input type="text" id="dsSandboxInput" class="input-field" style="width: 120px;" placeholder="Value" />
          <input type="number" id="dsSandboxIndex" class="input-field" style="width: 100px;"
            placeholder="Index (opt)" />
          <button class="op-btn op-insert" id="dsSandboxInsert">â• Add</button>
          <button class="op-btn op-delete" id="dsSandboxRemove">ğŸ—‘ï¸ Remove</button>
          <button class="op-btn op-search" id="dsSandboxSearch">ğŸ” Find</button>
          <button class="btn btn-secondary" id="dsSandboxClear" style="padding: 0.5rem 1rem;">ğŸ”„ Reset</button>
        </div>

        <!-- Data Structure Visualization -->
        <div
          style="background: var(--bg-paper); border: 2px solid var(--border-soft); padding: 1.5rem; border-radius: 12px; min-height: 120px;">
          <div
            style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px;">
            Your Data Structure</div>
          <div id="dsSandboxVisual"
            style="display: flex; gap: 0.5rem; flex-wrap: wrap; align-items: center; min-height: 60px;">
            <!-- Visual elements will be rendered here -->
          </div>
          <code id="dsSandboxState"
            style="display: block; margin-top: 1rem; color: var(--accent-forest); font-size: 1rem; font-weight: 600;">[5, 12, 8, 3, 15]</code>
        </div>

        <!-- Feedback message -->
        <div id="dsSandboxFeedback" style="
            margin-top: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            background: var(--bg-cream);
            color: var(--text-body);
            font-size: 0.9rem;
            display: none;
          "></div>
      </div>

      <!-- Subtle complexity reminder -->
      <div style="text-align: center; color: var(--text-muted); font-size: 0.85rem; opacity: 0.8;">
        ğŸ’¡ Tip: Try different data structures to see how operations differ!
      </div>
    </section>

    <!-- LAB SOLUTIONS -->
    <section id="section-lab-solutions" class="section-hidden animate-in" aria-label="Lab Solutions">
      <!-- Content loaded dynamically -->
    </section>

    <!-- MIDTERM SOLUTIONS -->
    <section id="section-midterm-solutions" class="section-hidden animate-in" aria-label="Midterm Solutions">
      <!-- Content loaded dynamically -->
    </section>

    <!-- FINAL SOLUTIONS -->
    <section id="section-final-solutions" class="section-hidden animate-in" aria-label="Final Solutions">
      <!-- Content loaded dynamically -->
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATABASE > SQL Lab
           Purpose: Interactive SQL playground with query execution
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- SQL LAB -->
    <section id="section-sql-lab" class="section-hidden animate-in" aria-label="SQL Lab">
      <div class="page-header">
        <h1>ğŸ§ª SQL Lab</h1>
        <p>
          SQL is the most in-demand skill on job postings. Seriouslyâ€”look it up. Practice real queries in your browser,
          no setup required. Make mistakes. That's how you learn.
        </p>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">â˜• The Coffee Shop Database</h3>
        <p class="mb-2">
          Youâ€™re helping a cozy coffee shop understand customers, orders, and
          sales. This dataset is small but realisticâ€”perfect for learning.
        </p>
        <p style="color: var(--text-body)">
          Tip: Press <code>Ctrl</code>/<code>Cmd</code> +
          <code>Enter</code> to run your query.
        </p>
      </div>

      <div class="sql-grid mb-4">
        <div class="flex flex-col gap-3">
          <div class="control-panel">
            <div class="sql-header-row mb-2">
              <div>
                <div class="control-label">ğŸ§  First Win (60 seconds)</div>
                <p style="margin-top: 0.25rem">
                  Click <strong>Run</strong> to see the first 10 products.
                </p>
              </div>
              <div class="sql-meta">
                <span class="badge badge-green" id="sqlReadyBadge">Loading SQL Engineâ€¦</span>
              </div>
            </div>

            <div class="sql-tabs" id="sqlLabTabs" aria-label="SQL Lab tabs">
              <button class="tab-btn active" data-target="sqlLabPaneEditor">
                âœï¸ Editor
              </button>
              <button class="tab-btn" data-target="sqlLabPaneSchema">
                ğŸ§¾ Schema
              </button>
              <button class="tab-btn" data-target="sqlLabPaneResults">
                ğŸ“Š Results
              </button>
            </div>

            <div id="sqlLabPaneEditor">
              <div class="sql-editor-wrap mb-2" aria-label="SQL editor">
                <textarea id="sqlLabEditor" aria-label="SQL Lab editor">
SELECT name, price_cents/100.0 AS price
FROM products
ORDER BY price_cents DESC
LIMIT 10;</textarea>
              </div>

              <div class="control-row" style="justify-content: space-between">
                <div class="control-row" style="flex-wrap: wrap; gap: 0.5rem">
                  <button id="btnSqlLabRun" class="btn btn-primary" aria-label="Run SQL query">
                    â–¶ï¸ Run
                  </button>
                  <button id="btnSqlLabBeautify" class="btn btn-secondary" aria-label="Beautify SQL">
                    âœ¨ Beautify
                  </button>
                  <button id="btnSqlLabReset" class="btn btn-secondary" aria-label="Reset database">
                    ğŸ”„ Reset DB
                  </button>
                  <div class="history-dropdown" style="position: relative">
                    <button id="btnSqlLabHistory" class="btn btn-secondary" aria-label="Query history">
                      ğŸ“œ History
                    </button>
                    <div id="sqlHistoryDropdown" class="collapsed" style="
                        position: absolute;
                        top: 100%;
                        left: 0;
                        background: var(--bg-paper);
                        border: 1px solid var(--border-soft);
                        border-radius: 8px;
                        padding: 0.5rem;
                        min-width: 250px;
                        max-height: 200px;
                        overflow-y: auto;
                        z-index: 100;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                        margin-top: 0.25rem;
                      ">
                      <div id="sqlHistoryList" style="font-size: 0.8rem"></div>
                    </div>
                  </div>
                </div>
                <div style="
                      color: var(--text-muted);
                      font-weight: 800;
                      font-size: 0.9rem;
                    ">
                  Output limited to <span id="sqlLabMaxRows">200</span> rows
                </div>
              </div>
            </div>

            <div id="sqlLabPaneSchema" class="sql-pane-hidden">
              <div class="notebook-card">
                <h3 class="mb-2">ğŸ§¾ Entity-Relationship Diagram</h3>
                <div class="er-diagram" style="
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1rem;
                    font-family: 'JetBrains Mono', monospace;
                    font-size: 0.75rem;
                  ">
                  <!-- customers table -->
                  <div class="er-table"
                    style="background: var(--bg-paper); border: 2px solid var(--accent-forest); border-radius: 8px; overflow: hidden">
                    <div style="background: var(--accent-forest); color: white; padding: 0.5rem; font-weight: bold">ğŸ‘¤
                      customers</div>
                    <div style="padding: 0.5rem">
                      <div>ğŸ”‘ id <span style="color: var(--text-muted)">INTEGER PK</span></div>
                      <div>name <span style="color: var(--text-muted)">TEXT</span></div>
                      <div>city <span style="color: var(--text-muted)">TEXT</span></div>
                    </div>
                  </div>
                  <!-- products table -->
                  <div class="er-table"
                    style="background: var(--bg-paper); border: 2px solid var(--accent-coral); border-radius: 8px; overflow: hidden">
                    <div style="background: var(--accent-coral); color: white; padding: 0.5rem; font-weight: bold">ğŸ“¦
                      products</div>
                    <div style="padding: 0.5rem">
                      <div>ğŸ”‘ id <span style="color: var(--text-muted)">INTEGER PK</span></div>
                      <div>name <span style="color: var(--text-muted)">TEXT</span></div>
                      <div>category <span style="color: var(--text-muted)">TEXT</span></div>
                      <div>price_cents <span style="color: var(--text-muted)">INTEGER</span></div>
                    </div>
                  </div>
                  <!-- orders table -->
                  <div class="er-table"
                    style="background: var(--bg-paper); border: 2px solid var(--accent-gold); border-radius: 8px; overflow: hidden">
                    <div style="background: var(--accent-gold); color: white; padding: 0.5rem; font-weight: bold">ğŸ§¾
                      orders</div>
                    <div style="padding: 0.5rem">
                      <div>ğŸ”‘ id <span style="color: var(--text-muted)">INTEGER PK</span></div>
                      <div>ğŸ”— customer_id <span style="color: var(--text-muted)">â†’ customers.id</span></div>
                      <div>order_date <span style="color: var(--text-muted)">TEXT</span></div>
                    </div>
                  </div>
                  <!-- order_items table -->
                  <div class="er-table"
                    style="background: var(--bg-paper); border: 2px solid var(--accent-blush); border-radius: 8px; overflow: hidden">
                    <div
                      style="background: var(--accent-blush); color: var(--text-heading); padding: 0.5rem; font-weight: bold">
                      ğŸ“‹ order_items</div>
                    <div style="padding: 0.5rem">
                      <div>ğŸ”— order_id <span style="color: var(--text-muted)">â†’ orders.id</span></div>
                      <div>ğŸ”— product_id <span style="color: var(--text-muted)">â†’ products.id</span></div>
                      <div>qty <span style="color: var(--text-muted)">INTEGER</span></div>
                    </div>
                  </div>
                </div>
                <p style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-muted)">
                  ğŸ”‘ = Primary Key &nbsp; ğŸ”— = Foreign Key
                </p>
              </div>

              <div class="paper-card">
                <h3 class="mb-2">ğŸ” Dataset Preview</h3>
                <p class="mb-2">
                  See a few rows so you can write queries confidently.
                </p>
                <div class="control-row mb-2">
                  <select id="sqlLabPreviewTable" class="select-field" style="min-width: 220px"
                    aria-label="Preview table">
                    <option value="customers">customers</option>
                    <option value="products" selected>products</option>
                    <option value="orders">orders</option>
                    <option value="order_items">order_items</option>
                  </select>
                  <button id="btnSqlLabPreview" class="btn btn-secondary" aria-label="Preview selected table">
                    ğŸ‘€ Preview
                  </button>
                </div>
                <div class="sql-results" id="sqlLabPreviewResults" aria-label="Dataset preview results"></div>
              </div>
            </div>

            <div id="sqlLabPaneResults" class="sql-pane-hidden">
              <div class="paper-card">
                <h3 class="mb-2">ğŸ“Š Results</h3>
                <div id="sqlLabResultsMeta" style="
                      color: var(--text-muted);
                      font-weight: 800;
                      margin-bottom: 0.75rem;
                    ">
                  Run a query to see results.
                </div>
                <div class="sql-results" id="sqlLabResults" aria-label="SQL results"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex flex-col gap-3">
          <div class="notebook-card">
            <h3 class="mb-2">ğŸ§­ SQL Lab Guide</h3>
            <p class="mb-2">
              Use the Lab when you want to explore freely. For structured
              challenges with validation and hints, go to
              <strong>SQL Practice</strong>.
            </p>
            <div class="metaphor-box mt-2">
              <span class="metaphor-icon" aria-hidden="true">ğŸª„</span>
              <div class="metaphor-content">
                <h4>Learning trick: Dual coding</h4>
                <p style="font-size: 0.95rem">
                  Read the story + see the schema + run a query. Youâ€™re
                  combining verbal + visual information, which improves memory
                  and understanding.
                </p>
              </div>
            </div>
          </div>

          <div class="challenge-card">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Mini Challenge
            </h3>
            <p class="mb-2">
              <strong>Question:</strong> Which customers placed orders in
              2025?
            </p>
            <p class="mb-2" style="color: var(--text-muted)">
              Hint: join <code>customers</code> â†’ <code>orders</code> and
              filter by date.
            </p>
            <p style="color: var(--text-body)">
              <strong>Try it in the editor.</strong> If you get stuck, go to
              SQL Practice for guided hints.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- SQL PRACTICE -->
    <section id="section-sql-practice" class="section-hidden animate-in" aria-label="SQL Practice">
      <div class="page-header">
        <h1>ğŸ SQL Practice</h1>
        <p>
          Short, story-based challenges with premium feedback: validation,
          diffs, hints, and explanations.
        </p>
      </div>

      <div class="sql-grid mb-4">
        <div class="flex flex-col gap-3">
          <div class="control-panel">
            <div class="sql-header-row mb-2">
              <div>
                <div class="control-label">Choose a challenge</div>
                <p style="margin-top: 0.25rem">
                  Solve it, then hit <strong>Check Answer</strong>. Your
                  progress saves automatically.
                </p>
              </div>
              <div class="sql-meta">
                <span class="badge badge-amber" id="sqlXpBadge">XP: 0</span>
                <span class="badge badge-sky" id="sqlStreakBadge">Streak: 0</span>
              </div>
            </div>

            <div class="control-row mb-2">
              <select id="sqlChallengeSelect" class="select-field" aria-label="SQL challenge select"></select>
              <button id="btnSqlNext" class="btn btn-secondary" aria-label="Next challenge">
                Next â¡ï¸
              </button>
            </div>

            <div class="story-card mb-3" id="sqlChallengeStory" style="box-shadow: 0 4px 18px rgba(212, 168, 83, 0.12)">
              <h3 class="story-title" id="sqlChallengeTitle">Loadingâ€¦</h3>
              <div class="flex items-center gap-2 mb-2" id="sqlChallengeBadges"></div>
              <p id="sqlChallengePrompt" style="font-size: 1.05rem"></p>
            </div>

            <div class="challenge-card mb-3" id="sqlHintsCard">
              <h3 class="mb-2" style="color: var(--accent-coral)">
                ğŸ§© Hints (progressive)
              </h3>
              <div class="control-row mb-2">
                <button id="btnSqlHint" class="btn btn-secondary" aria-label="Show hint">
                  ğŸ’¡ Show Hint
                </button>
                <button id="btnSqlReveal" class="btn btn-secondary" aria-label="Reveal solution">
                  ğŸ§¾ Reveal Solution
                </button>
                <span id="sqlAttempts" style="color: var(--text-muted); font-weight: 800">Attempts: 0</span>
              </div>
              <div id="sqlHints" style="color: var(--text-body)"></div>
              <div id="sqlSolution" style="margin-top: 0.75rem; display: none">
                <div class="control-label">
                  Solution (study it, then re-type from memory!)
                </div>
                <div style="
                      background: var(--bg-paper);
                      padding: 0.75rem 1rem;
                      border-radius: 10px;
                      margin-top: 0.5rem;
                      font-family: 'JetBrains Mono', monospace;
                      font-size: 0.9rem;
                      white-space: pre-wrap;
                    " id="sqlSolutionCode"></div>
              </div>
            </div>

            <div class="solution-card" id="sqlExplanationCard" style="display: none">
              <h3 class="mb-2" style="color: var(--accent-forest)">
                âœ… Explanation
              </h3>
              <div id="sqlExplanation" style="color: var(--text-body)"></div>
            </div>
          </div>
        </div>

        <div class="flex flex-col gap-3">
          <div class="control-panel">
            <div class="sql-tabs" id="sqlPracticeTabs" aria-label="SQL Practice tabs">
              <button class="tab-btn active" data-target="sqlPracticePaneEditor">
                âœï¸ Editor
              </button>
              <button class="tab-btn" data-target="sqlPracticePaneExpected">
                ğŸ¯ Expected
              </button>
              <button class="tab-btn" data-target="sqlPracticePaneResults">
                ğŸ“Š Results
              </button>
            </div>

            <div id="sqlPracticePaneEditor">
              <div class="sql-editor-wrap mb-2">
                <textarea id="sqlPracticeEditor" aria-label="SQL Practice editor"></textarea>
              </div>

              <div class="control-row" style="justify-content: space-between">
                <div class="control-row">
                  <button id="btnSqlCheck" class="btn btn-primary" aria-label="Check answer">
                    âœ… Check Answer
                  </button>
                  <button id="btnSqlReset" class="btn btn-secondary" aria-label="Reset this challenge">
                    ğŸ”„ Reset
                  </button>
                </div>
                <div id="sqlPracticeStatus" style="color: var(--text-muted); font-weight: 800">
                  Ready.
                </div>
              </div>
            </div>

            <div id="sqlPracticePaneExpected" class="sql-pane-hidden">
              <div class="paper-card">
                <h3 class="mb-2">ğŸ¯ Expected Output</h3>
                <p class="mb-2">
                  Your result must match this output (columns + rows). Some
                  challenges allow any order.
                </p>
                <div class="sql-results" id="sqlExpectedTable" aria-label="Expected results"></div>
              </div>
            </div>

            <div id="sqlPracticePaneResults" class="sql-pane-hidden">
              <div class="paper-card">
                <h3 class="mb-2">ğŸ“Š Your Output</h3>
                <div id="sqlPracticeResultsMeta" style="
                      color: var(--text-muted);
                      font-weight: 800;
                      margin-bottom: 0.75rem;
                    ">
                  Run check to see results.
                </div>
                <div class="sql-results" id="sqlPracticeResults" aria-label="Practice results"></div>

                <div class="paper-card" style="margin-top: 1rem">
                  <h3 class="mb-2">ğŸ§¾ Diff (premium feedback)</h3>
                  <div class="diff-box" id="sqlDiff" aria-label="Diff viewer">
                    No diff yet.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="notebook-card">
            <h3 class="mb-2">ğŸ† How you win</h3>
            <p class="mb-2">
              Fast onboarding, instant feedback, and tiny tasks. Donâ€™t aim for
              perfectionâ€”aim for <strong>reps</strong>.
            </p>
            <div class="complexity-table">
              <div class="complexity-cell">
                <div class="complexity-label">Run</div>
                <div class="complexity-value good">Instant</div>
              </div>
              <div class="complexity-cell">
                <div class="complexity-label">Hints</div>
                <div class="complexity-value medium">3 tiers</div>
              </div>
              <div class="complexity-cell">
                <div class="complexity-label">Validation</div>
                <div class="complexity-value good">Diff</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="story-card">
        <h3 class="story-title">ğŸ§  Active Recall Tip</h3>
        <p>
          After you solve a challenge, <strong>reset</strong> and re-type the
          query from memory. This is one of the fastest ways to build real
          skillâ€”especially if youâ€™re not confident with coding yet.
        </p>
      </div>
    </section>

    <!-- SQL LESSONS -->
    <section id="section-sql-lessons" class="section-hidden animate-in" aria-label="SQL Lessons">
      <div class="page-header">
        <h1>ğŸ“˜ SQL Lessons</h1>
        <p>
          Learn SQL step-by-step with interactive examples and visual explanations.
        </p>
      </div>

      <!-- Lesson 1: SELECT -->
      <div class="paper-card mb-4">
        <h3 class="mb-2" style="color: var(--accent-forest)">ğŸ“– Lesson 1: SELECT Basics</h3>
        <p class="mb-3">
          <strong>SELECT</strong> is how you retrieve data from a database. Think of it like asking a question.
        </p>
        <div class="notebook-card mb-3">
          <h4 class="mb-2">Syntax</h4>
          <pre
            style="background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem"><code>SELECT column1, column2
FROM table_name;</code></pre>
        </div>
        <div class="metaphor-box mb-3">
          <span class="metaphor-icon">ğŸ’¡</span>
          <div class="metaphor-content">
            <h4>Key Points</h4>
            <ul style="margin: 0; padding-left: 1.25rem">
              <li><code>SELECT *</code> gets all columns</li>
              <li><code>SELECT name, price</code> gets specific columns</li>
              <li><code>AS</code> renames columns: <code>price AS cost</code></li>
            </ul>
          </div>
        </div>
        <div class="challenge-card">
          <strong>ğŸ¯ Try it:</strong> Go to SQL Lab and run:<br>
          <code>SELECT name, price_cents FROM products;</code>
        </div>
      </div>

      <!-- Lesson 2: WHERE -->
      <div class="paper-card mb-4">
        <h3 class="mb-2" style="color: var(--accent-forest)">ğŸ“– Lesson 2: Filtering with WHERE</h3>
        <p class="mb-3">
          <strong>WHERE</strong> filters rows based on conditions. Only matching rows are returned.
        </p>
        <div class="notebook-card mb-3">
          <h4 class="mb-2">Syntax</h4>
          <pre
            style="background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem"><code>SELECT * FROM products
WHERE category = 'Coffee';</code></pre>
        </div>
        <div class="metaphor-box mb-3">
          <span class="metaphor-icon">ğŸ”§</span>
          <div class="metaphor-content">
            <h4>Operators</h4>
            <ul style="margin: 0; padding-left: 1.25rem">
              <li><code>=</code> equal, <code>!=</code> not equal</li>
              <li><code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> comparisons</li>
              <li><code>AND</code>, <code>OR</code> combine conditions</li>
              <li><code>IN ('a', 'b')</code> matches any in list</li>
              <li><code>LIKE '%pattern%'</code> text matching</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Lesson 3: JOINs -->
      <div class="paper-card mb-4">
        <h3 class="mb-2" style="color: var(--accent-forest)">ğŸ“– Lesson 3: JOIN - Combining Tables</h3>
        <p class="mb-3">
          <strong>JOIN</strong> connects rows from different tables using a common column (like customer_id).
        </p>

        <!-- Visual JOIN Diagrams -->
        <div class="grid-2 mb-3" style="gap: 1rem">
          <div class="notebook-card" style="text-align: center">
            <h4 class="mb-2">INNER JOIN</h4>
            <div style="display: flex; justify-content: center; gap: -20px">
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: rgba(47, 106, 87, 0.3); border: 3px solid var(--accent-forest)">
              </div>
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: rgba(224, 122, 95, 0.3); border: 3px solid var(--accent-coral); margin-left: -30px">
              </div>
            </div>
            <div
              style="width: 40px; height: 40px; background: var(--accent-gold); border-radius: 50%; margin: -50px auto 0; position: relative">
            </div>
            <p style="font-size: 0.8rem; margin-top: 1rem">Only matching rows from <strong>both</strong> tables</p>
          </div>
          <div class="notebook-card" style="text-align: center">
            <h4 class="mb-2">LEFT JOIN</h4>
            <div style="display: flex; justify-content: center">
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent-forest); opacity: 0.8; border: 3px solid var(--accent-forest)">
              </div>
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: rgba(224, 122, 95, 0.2); border: 3px dashed var(--accent-coral); margin-left: -30px">
              </div>
            </div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem"><strong>All</strong> from left table + matching from right
            </p>
          </div>
          <div class="notebook-card" style="text-align: center">
            <h4 class="mb-2">RIGHT JOIN</h4>
            <div style="display: flex; justify-content: center">
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: rgba(47, 106, 87, 0.2); border: 3px dashed var(--accent-forest); margin-right: -30px">
              </div>
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent-coral); opacity: 0.8; border: 3px solid var(--accent-coral)">
              </div>
            </div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem">Matching from left + <strong>all</strong> from right
            </p>
            <p style="font-size: 0.7rem; color: var(--text-muted);">Rarely usedâ€”just swap table order with LEFT JOIN</p>
          </div>
          <div class="notebook-card" style="text-align: center">
            <h4 class="mb-2">FULL OUTER JOIN</h4>
            <div style="display: flex; justify-content: center">
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent-forest); opacity: 0.8; border: 3px solid var(--accent-forest)">
              </div>
              <div
                style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent-coral); opacity: 0.8; border: 3px solid var(--accent-coral); margin-left: -30px">
              </div>
            </div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem"><strong>All</strong> from both tables, NULL where no match
            </p>
            <p style="font-size: 0.7rem; color: var(--text-muted);">Great for finding orphan records</p>
          </div>
        </div>

        <div class="notebook-card mb-3">
          <h4 class="mb-2">Syntax</h4>
          <pre
            style="background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem"><code>SELECT c.name, o.order_date
FROM customers c
JOIN orders o ON o.customer_id = c.id;</code></pre>
        </div>
      </div>

      <!-- Lesson 4: GROUP BY -->
      <div class="paper-card mb-4">
        <h3 class="mb-2" style="color: var(--accent-forest)">ğŸ“– Lesson 4: GROUP BY - Aggregations</h3>
        <p class="mb-3">
          <strong>GROUP BY</strong> combines rows with the same value, allowing you to use aggregate functions.
        </p>
        <div class="notebook-card mb-3">
          <h4 class="mb-2">Aggregate Functions</h4>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; font-size: 0.85rem">
            <div><code>COUNT(*)</code> - rows</div>
            <div><code>SUM(col)</code> - total</div>
            <div><code>AVG(col)</code> - average</div>
            <div><code>MIN(col)</code> - smallest</div>
            <div><code>MAX(col)</code> - largest</div>
            <div><code>COUNT(DISTINCT)</code> - unique</div>
          </div>
        </div>
        <div class="notebook-card mb-3">
          <h4 class="mb-2">Example</h4>
          <pre
            style="background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem"><code>SELECT category, COUNT(*) AS total
FROM products
GROUP BY category;</code></pre>
        </div>
        <div class="metaphor-box">
          <span class="metaphor-icon">âš ï¸</span>
          <div class="metaphor-content">
            <h4>HAVING vs WHERE</h4>
            <p style="margin: 0"><code>WHERE</code> filters <strong>before</strong> grouping.<br>
              <code>HAVING</code> filters <strong>after</strong> grouping (on aggregates).
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- SQL DRILLS (scaffold) -->
    <section id="section-sql-drills" class="section-hidden animate-in" aria-label="SQL Interview Drills">
      <div class="page-header">
        <h1>ğŸ§  SQL Interview Drills</h1>
        <p>
          Interview-style drills are coming soon. For now, build fundamentals
          in SQL Practice.
        </p>
      </div>
      <div class="paper-card">
        <h3 class="mb-2">Coming soon</h3>
        <p>
          Timed drills + common patterns (joins, group by, subqueries) with
          fast feedback.
        </p>
      </div>
    </section>

    <!-- SQL VISUALIZER -->
    <section id="section-sql-visualizer" class="section-hidden animate-in" aria-label="SQL Visualizer">
      <div class="page-header">
        <h1>ğŸ‘ï¸ SQL Visualizer</h1>
        <p>
          Write SQL queries and watch them transform your data in real-time. See changes instantly!
        </p>
      </div>

      <div class="sql-viz-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <!-- Query Editor Side -->
        <div class="paper-card">
          <h3 class="mb-2" style="color: var(--accent-forest)">âœï¸ Write Your Query</h3>
          <div class="sql-editor-wrap mb-3">
            <textarea id="sqlVizEditor" rows="8" placeholder="Try:
INSERT INTO products (id, name, category, price_cents) VALUES (11, 'Mocha', 'Coffee', 320);

UPDATE products SET price_cents = 200 WHERE name = 'Espresso';

DELETE FROM products WHERE id = 10;" style="
                width: 100%;
                font-family: 'JetBrains Mono', monospace;
                font-size: 0.9rem;
                padding: 1rem;
                border: 2px solid var(--border-soft);
                border-radius: 8px;
                background: var(--bg-paper);
                resize: vertical;
              "></textarea>
          </div>

          <!-- Query Template Buttons -->
          <div class="sql-query-buttons mb-3" id="sqlQueryButtons">
            <p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">Quick Add Query:</p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
              <button class="btn btn-sm" data-query="select" style="background: var(--accent-sky); color: white;">ğŸ“Š
                SELECT</button>
              <button class="btn btn-sm" data-query="insert" style="background: var(--accent-forest); color: white;">â•
                INSERT</button>
              <button class="btn btn-sm" data-query="update" style="background: var(--accent-amber); color: white;">âœï¸
                UPDATE</button>
              <button class="btn btn-sm" data-query="delete" style="background: var(--accent-coral); color: white;">ğŸ—‘ï¸
                DELETE</button>
            </div>
            <p id="sqlQueryNote"
              style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; display: none;"></p>
          </div>

          <div class="control-row" style="gap: 0.5rem">
            <button id="btnSqlVizRun" class="btn btn-primary">â–¶ï¸ Execute Query</button>
            <button id="btnSqlVizReset" class="btn btn-secondary">ğŸ”„ Reset Data</button>
          </div>
          <div id="sqlVizStatus" class="mt-3" style="
              padding: 0.75rem;
              border-radius: 8px;
              font-size: 0.9rem;
              display: none;
            "></div>
        </div>

        <!-- Live Table Side -->
        <div class="paper-card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem">
            <h3 style="color: var(--accent-forest)">ğŸ“Š Live Data Table</h3>
            <select id="sqlVizTableSelect" class="select-field" style="min-width: 150px">
              <option value="products" selected>products</option>
              <option value="customers">customers</option>
              <option value="orders">orders</option>
              <option value="order_items">order_items</option>
            </select>
          </div>
          <div id="sqlVizTableContainer" style="
              max-height: 400px;
              overflow: auto;
              border: 2px solid var(--border-soft);
              border-radius: 8px;
            ">
            <div class="sql-results" id="sqlVizTable"></div>
          </div>
          <p class="mt-2" style="font-size: 0.8rem; color: var(--text-muted)">
            ğŸ’¡ Run INSERT, UPDATE, or DELETE to see changes instantly!
          </p>
        </div>
      </div>

      <!-- Quick Reference -->
      <div class="paper-card mt-4">
        <h3 class="mb-2">ğŸ“ Quick SQL Reference</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; font-size: 0.85rem;">
          <div class="notebook-card">
            <strong style="color: var(--accent-forest)">INSERT</strong>
            <pre style="margin: 0.5rem 0 0; font-size: 0.75rem">INSERT INTO table (col1, col2)
VALUES (val1, val2);</pre>
          </div>
          <div class="notebook-card">
            <strong style="color: var(--accent-gold)">UPDATE</strong>
            <pre style="margin: 0.5rem 0 0; font-size: 0.75rem">UPDATE table
SET col = value
WHERE condition;</pre>
          </div>
          <div class="notebook-card">
            <strong style="color: var(--accent-coral)">DELETE</strong>
            <pre style="margin: 0.5rem 0 0; font-size: 0.75rem">DELETE FROM table
WHERE condition;</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATABASE > ERD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Component: section-db-erd -->
    <section id="section-db-erd" class="section-hidden animate-in" aria-label="Entity Relationship Diagrams">
      <div class="page-header">
        <h1>ğŸ“Š Entity-Relationship Diagrams</h1>
        <p>
          Design and visualize database structures using ERD notation. Learn to identify
          entities, attributes, relationships, and cardinality.
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div>
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® Interactive ERD Builder</h3>
            <div class="viz-container mb-3">
              <canvas id="erdCanvas" class="viz-canvas" height="350" style="cursor: grab" role="img"
                aria-label="ERD canvas - drag entities to reposition"></canvas>
            </div>

            <div class="flex gap-2 mb-3" style="flex-wrap: wrap">
              <button id="btnErdAddEntity" class="op-btn op-insert" aria-label="Add new entity">
                â• Add Entity
              </button>
              <button id="btnErdAddRelationship" class="btn btn-secondary" aria-label="Add relationship">
                ğŸ”— Add Relationship
              </button>
              <button id="btnErdNotation" class="btn btn-secondary" aria-label="Toggle notation style">
                ğŸ¦¶ Crow's Foot
              </button>
              <button id="btnErdReset" class="btn btn-secondary" aria-label="Reset ERD">
                ğŸ”„ Reset
              </button>
            </div>

            <!-- Entity Editor Panel -->
            <div id="erdEntityEditor" class="paper-card" style="display: none; background: var(--bg-cream)">
              <h4 class="mb-2">âœï¸ Edit Entity</h4>
              <div class="flex gap-2 mb-2">
                <input type="text" id="erdEntityName" class="input-field" placeholder="Entity name"
                  style="flex: 1; text-transform: uppercase" />
                <button id="btnErdSaveEntity" class="btn btn-primary">
                  ğŸ’¾ Save
                </button>
              </div>

              <div class="mb-2">
                <label class="control-label">Attributes (â˜‘ï¸ = Primary Key)</label>
                <div id="erdAttributesList" class="flex flex-col gap-1"></div>
                <button id="btnErdAddAttribute" class="btn btn-secondary mt-2" style="font-size: 0.8rem">
                  â• Add Attribute
                </button>
              </div>

              <button id="btnErdDeleteEntity" class="btn"
                style="background: var(--accent-coral); color: white; width: 100%">
                ğŸ—‘ï¸ Delete Entity
              </button>
            </div>

            <!-- Relationship Editor Panel -->
            <div id="erdRelEditor" class="paper-card" style="display: none; background: var(--bg-cream)">
              <h4 class="mb-2">âœï¸ Edit Relationship</h4>
              <div class="flex gap-2 mb-2">
                <input type="text" id="erdRelName" class="input-field" placeholder="Relationship name"
                  style="flex: 1; text-transform: uppercase" />
              </div>

              <div class="grid-2 gap-2 mb-2">
                <div>
                  <label class="control-label">Entity 1</label>
                  <select id="erdRelEntity1" class="select-field" style="width: 100%"></select>
                </div>
                <div>
                  <label class="control-label">Entity 2</label>
                  <select id="erdRelEntity2" class="select-field" style="width: 100%"></select>
                </div>
              </div>

              <div class="mb-2">
                <label class="control-label">Cardinality</label>
                <select id="erdRelCardinality" class="select-field" style="width: 100%">
                  <option value="1:1">1:1 (One-to-One)</option>
                  <option value="1:N" selected>1:N (One-to-Many)</option>
                  <option value="M:N">M:N (Many-to-Many)</option>
                </select>
              </div>

              <button onclick="ERDVisualizer.saveRelationshipEdit()" class="btn btn-primary" style="width: 100%">
                ğŸ’¾ Save Relationship
              </button>
            </div>
          </div>
        </div>

        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ¢</span>
            <div class="metaphor-content">
              <h4>Think of it like: Organization Chart</h4>
              <p style="font-size: 0.95rem">
                An ERD (Entity-Relationship Diagram) is a simple visual way to show how data is organized in a database.
                It uses boxes to represent things (called entities) like students, products, or orders, and lines to
                show how these things are connected to each other (called relationships). ERD helps us easily understand
                what data is stored, what information each item has, and how different data pieces are related, even
                before creating the actual database.
              </p>
            </div>
          </div>

          <!-- ERD Components Reference -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-forest);">
            <h3 class="mb-2" style="color: var(--accent-forest);">ğŸ“ ERD Components</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <thead>
                <tr style="background: var(--accent-forest); color: white;">
                  <th style="padding: 0.5rem; text-align: left;">Symbol</th>
                  <th style="padding: 0.5rem; text-align: left;">Name</th>
                  <th style="padding: 0.5rem; text-align: left;">Purpose</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;">â–­ Rectangle</td>
                  <td style="padding: 0.5rem;"><strong>Entity</strong></td>
                  <td style="padding: 0.5rem;">A "thing" we store data about</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                  <td style="padding: 0.5rem;">â—‡ Diamond</td>
                  <td style="padding: 0.5rem;"><strong>Relationship</strong></td>
                  <td style="padding: 0.5rem;">How entities connect</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;">â¬­ Ellipse</td>
                  <td style="padding: 0.5rem;"><strong>Attribute</strong></td>
                  <td style="padding: 0.5rem;">Properties of an entity</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;"><u>Underline</u></td>
                  <td style="padding: 0.5rem;"><strong>Primary Key</strong></td>
                  <td style="padding: 0.5rem;">Unique identifier</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Cardinality Reference -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-gold);">
            <h3 class="mb-2" style="color: var(--accent-gold);">ğŸ”¢ Cardinality Notations</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <thead>
                <tr style="background: var(--accent-gold); color: white;">
                  <th style="padding: 0.5rem; text-align: left;">Type</th>
                  <th style="padding: 0.5rem; text-align: center;">Chen</th>
                  <th style="padding: 0.5rem; text-align: left;">Example</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;">One-to-One</td>
                  <td style="padding: 0.5rem; text-align: center; font-weight: bold;">1 : 1</td>
                  <td style="padding: 0.5rem;">Person â†’ Passport</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                  <td style="padding: 0.5rem;">One-to-Many</td>
                  <td style="padding: 0.5rem; text-align: center; font-weight: bold;">1 : N</td>
                  <td style="padding: 0.5rem;">Department â†’ Employees</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;">Many-to-Many</td>
                  <td style="padding: 0.5rem; text-align: center; font-weight: bold;">M : N</td>
                  <td style="padding: 0.5rem;">Students â†” Courses</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="challenge-card mb-3">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Design Challenge
            </h3>
            <p class="mb-2">
              <strong>Scenario:</strong> Design an ERD for a Library System with:
            </p>
            <ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
              <li>Books (ISBN, title, author, year)</li>
              <li>Members (ID, name, email, join_date)</li>
              <li>Loans (book borrowed, member, due_date)</li>
            </ul>
            <p style="color: var(--text-muted)">
              ğŸ’¡ <em>Hint: What's the relationship between Members and Books?</em>
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Solution Insight
            </h3>
            <p class="mb-2">
              <strong>Members â† BORROWS â†’ Books</strong> is a <strong>M:N</strong> relationship!
            </p>
            <p style="color: var(--text-body)">
              One member can borrow many books, and one book can be borrowed by
              many members (over time). The LOANS table captures this relationship
              with additional attributes.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATABASE > EERD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Component: section-db-eerd -->
    <section id="section-db-eerd" class="section-hidden animate-in" aria-label="Enhanced Entity Relationship Diagrams">
      <div class="page-header">
        <h1>ğŸ”· Enhanced ER Diagrams (EERD)</h1>
        <p>
          Extend basic ERD concepts with specialization, generalization, and
          inheritance hierarchies for more complex data modeling.
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div>
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® EERD Hierarchy Builder</h3>
            <div class="viz-container mb-3">
              <canvas id="eerdCanvas" class="viz-canvas" height="380" style="cursor: grab" role="img"
                aria-label="EERD canvas - visualize inheritance hierarchies"></canvas>
            </div>

            <div class="flex gap-2 mb-3" style="flex-wrap: wrap">
              <button id="btnEerdAddSuper" class="op-btn op-insert" aria-label="Add superclass">
                â¬†ï¸ Add Superclass
              </button>
              <button id="btnEerdAddSub" class="btn btn-secondary" aria-label="Add subclass">
                â¬‡ï¸ Add Subclass
              </button>
              <button id="btnEerdToggleConstraint" class="btn btn-secondary" aria-label="Toggle constraint">
                ğŸ”€ Toggle d/o
              </button>
              <button id="btnEerdToggleCompleteness" class="btn btn-secondary" aria-label="Toggle completeness">
                âš¡ Total/Partial
              </button>
              <button id="btnEerdReset" class="btn btn-secondary" aria-label="Reset EERD">
                ğŸ”„ Reset
              </button>
            </div>

            <div class="notebook-card" style="background: var(--bg-cream)">
              <p style="font-size: 0.9rem; color: var(--text-body)">
                ğŸ’¡ <strong>Tip:</strong> Drag entities to reposition. The sample shows
                PERSON specializing into STUDENT, EMPLOYEE, and INSTRUCTOR.
              </p>
            </div>
          </div>
        </div>

        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸŒ³</span>
            <div class="metaphor-content">
              <h4>Think of it like: Family Tree</h4>
              <p style="font-size: 0.95rem">
                An EERD (Enhanced Entity-Relationship Diagram) is an advanced version of an ERD that shows more detailed
                and complex relationships in a database. It not only represents entities and their relationships but
                also includes special features like subclasses, inheritance, and constraints. EERD helps in clearly
                modeling real-world systems where one entity can have different types, making the database design more
                accurate and easier to understand.
              </p>
            </div>
          </div>

          <!-- EER Concepts -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid #1976D2;">
            <h3 class="mb-2" style="color: #1976D2;">ğŸ“ EER Concepts</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem; width: 35%;"><strong>Specialization</strong></td>
                  <td style="padding: 0.5rem;">Top-down: Define subclasses from superclass</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                  <td style="padding: 0.5rem;"><strong>Generalization</strong></td>
                  <td style="padding: 0.5rem;">Bottom-up: Combine entities into superclass</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;"><strong>Inheritance</strong></td>
                  <td style="padding: 0.5rem;">Subclass inherits all superclass attributes</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;"><strong>ISA Relationship</strong></td>
                  <td style="padding: 0.5rem;">"STUDENT <em>is a</em> PERSON"</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Constraints -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-coral);">
            <h3 class="mb-2" style="color: var(--accent-coral);">ğŸ”’ Specialization Constraints</h3>

            <div class="mb-3">
              <h4 style="font-size: 0.95rem; margin-bottom: 0.5rem;">Disjoint vs Overlapping</h4>
              <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem; width: 20%; text-align: center;">
                    <span
                      style="display: inline-block; width: 30px; height: 30px; border: 2px solid #C44536; border-radius: 50%; line-height: 26px; font-weight: bold; color: #C44536;">d</span>
                  </td>
                  <td style="padding: 0.5rem;"><strong>Disjoint:</strong> Entity can belong to only ONE subclass</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem; text-align: center;">
                    <span
                      style="display: inline-block; width: 30px; height: 30px; border: 2px solid #1976D2; border-radius: 50%; line-height: 26px; font-weight: bold; color: #1976D2;">o</span>
                  </td>
                  <td style="padding: 0.5rem;"><strong>Overlapping:</strong> Entity can belong to MULTIPLE subclasses
                  </td>
                </tr>
              </table>
            </div>

            <div>
              <h4 style="font-size: 0.95rem; margin-bottom: 0.5rem;">Total vs Partial</h4>
              <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem; width: 20%; text-align: center;">
                    <span style="border-bottom: 4px double #333; padding-bottom: 2px;">â•â•</span>
                  </td>
                  <td style="padding: 0.5rem;"><strong>Total:</strong> Every superclass instance MUST be in a subclass
                  </td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem; text-align: center;">
                    <span style="border-bottom: 2px solid #333; padding-bottom: 2px;">â”€â”€</span>
                  </td>
                  <td style="padding: 0.5rem;"><strong>Partial:</strong> Superclass instance MAY exist without subclass
                  </td>
                </tr>
              </table>
            </div>
          </div>

          <div class="challenge-card mb-3">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Modeling Challenge
            </h3>
            <p class="mb-2">
              <strong>Scenario:</strong> A university system has VEHICLES. Some are
              CARS (with num_doors), some are MOTORCYCLES (with engine_cc). A vehicle
              cannot be both.
            </p>
            <p style="color: var(--text-muted)">
              <strong>Question:</strong> Is this disjoint or overlapping? Total or partial?
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Solution
            </h3>
            <p class="mb-2">
              <strong>Disjoint (d)</strong> â€” A vehicle is either a car OR motorcycle, not both.
            </p>
            <p>
              <strong>Partial</strong> â€” Could have other vehicles (trucks, bikes) not yet modeled.
            </p>
          </div>
        </div>
      </div>
    </section>


    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATABASE > Schema
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Component: section-db-schema -->
    <!-- Component: section-relational-algebra -->
    <section id="section-relational-algebra" class="section-hidden animate-in" aria-label="Relational Algebra">
      <div class="page-header"
        style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 2rem; border-radius: 20px; color: white; margin-bottom: 2rem;">
        <h1>ğŸ”¢ Relational Algebra</h1>
        <p style="opacity: 0.9;">Master the mathematical foundation of SQL queries with interactive visualizations</p>
      </div>

      <div class="sql-grid mb-4">
        <!-- Left: Input Tables -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸ“Š Sample Tables</h3>
            <p class="mb-3" style="color: var(--text-muted);">These tables are used for all operations below.</p>

            <!-- Students Table -->
            <div class="notebook-card mb-3">
              <h4 class="mb-2" style="color: var(--accent-forest);">ğŸ‘¤ Students</h4>
              <table class="sql-table" id="raTableStudents">
                <thead>
                  <tr>
                    <th>id</th>
                    <th>name</th>
                    <th>major</th>
                    <th>gpa</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>Alice</td>
                    <td>CS</td>
                    <td>3.8</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>Bob</td>
                    <td>Math</td>
                    <td>3.5</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>Carol</td>
                    <td>CS</td>
                    <td>3.9</td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>David</td>
                    <td>Physics</td>
                    <td>3.2</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- Enrollments Table -->
            <div class="notebook-card">
              <h4 class="mb-2" style="color: var(--accent-coral);">ğŸ“š Enrollments</h4>
              <table class="sql-table" id="raTableEnrollments">
                <thead>
                  <tr>
                    <th>student_id</th>
                    <th>course</th>
                    <th>grade</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>DB101</td>
                    <td>A</td>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>AI201</td>
                    <td>B+</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>DB101</td>
                    <td>A-</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>AI201</td>
                    <td>A</td>
                  </tr>
                  <tr>
                    <td>4</td>
                    <td>PHY101</td>
                    <td>B</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Operator Reference -->
          <div class="notebook-card">
            <h3 class="mb-2">ğŸ“– Operator Reference</h3>
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 0.5rem; font-size: 0.9rem;">
              <div><strong>Ïƒ (sigma)</strong></div>
              <div>Selection - Filter rows</div>
              <div><strong>Ï€ (pi)</strong></div>
              <div>Projection - Select columns</div>
              <div><strong>â¨ (join)</strong></div>
              <div>Natural Join - Combine tables</div>
              <div><strong>âˆª (union)</strong></div>
              <div>Union - Combine row sets</div>
              <div><strong>âˆ© (intersect)</strong></div>
              <div>Intersection - Common rows</div>
              <div><strong>âˆ’ (minus)</strong></div>
              <div>Difference - Subtract rows</div>
              <div><strong>Ã— (cross)</strong></div>
              <div>Cartesian Product - All pairs</div>
              <div><strong>Ï (rho)</strong></div>
              <div>Rename - Change column name</div>
            </div>
          </div>
        </div>

        <!-- Right: Operations -->
        <div class="flex flex-col gap-3">
          <!-- Selection Operation -->
          <div class="paper-card">
            <h3 class="mb-2" style="color: var(--accent-forest);">Ïƒ Selection (Filter Rows)</h3>
            <p class="mb-2" style="color: var(--text-muted);">Like SQL's WHERE clause - keeps rows matching a
              condition.</p>

            <div class="control-row mb-2">
              <span>Ïƒ</span>
              <select id="raSelectionColumn" class="select-field" style="min-width: 100px;">
                <option value="major">major</option>
                <option value="gpa">gpa</option>
                <option value="name">name</option>
              </select>
              <select id="raSelectionOp" class="select-field" style="min-width: 60px;">
                <option value="=">=</option>
                <option value=">">&gt;</option>
                <option value="<">&lt;</option>
                <option value=">=">â‰¥</option>
                <option value="<=">â‰¤</option>
              </select>
              <input type="text" id="raSelectionValue" class="input-field" value="CS" style="width: 80px;">
              <span>(Students)</span>
            </div>
            <button class="btn btn-primary" onclick="RelationalAlgebra.runSelection()">â–¶ï¸ Apply Selection</button>

            <div id="raSelectionResult" class="mt-3"></div>
          </div>

          <!-- Projection Operation -->
          <div class="paper-card">
            <h3 class="mb-2" style="color: var(--accent-coral);">Ï€ Projection (Select Columns)</h3>
            <p class="mb-2" style="color: var(--text-muted);">Like SQL's SELECT column list - picks specific
              columns.</p>

            <div class="control-row mb-2" style="flex-wrap: wrap;">
              <span>Ï€</span>
              <label><input type="checkbox" id="raProjectId" checked> id</label>
              <label><input type="checkbox" id="raProjectName" checked> name</label>
              <label><input type="checkbox" id="raProjectMajor"> major</label>
              <label><input type="checkbox" id="raProjectGpa"> gpa</label>
              <span>(Students)</span>
            </div>
            <button class="btn btn-primary" onclick="RelationalAlgebra.runProjection()">â–¶ï¸ Apply Projection</button>

            <div id="raProjectionResult" class="mt-3"></div>
          </div>

          <!-- Join Operation -->
          <div class="paper-card">
            <h3 class="mb-2" style="color: var(--accent-gold);">â¨ Natural Join</h3>
            <p class="mb-2" style="color: var(--text-muted);">Combines tables on matching column values (Students.id
              = Enrollments.student_id).</p>

            <div class="control-row mb-2">
              <span>Students â¨ Enrollments</span>
              <span style="color: var(--text-muted);">ON id = student_id</span>
            </div>
            <button class="btn btn-primary" onclick="RelationalAlgebra.runJoin()">â–¶ï¸ Apply Join</button>

            <div id="raJoinResult" class="mt-3"></div>
          </div>

          <!-- Combined Expression -->
          <div class="challenge-card">
            <h3 class="mb-2" style="color: var(--accent-coral);">ğŸ§© Combined Expression</h3>
            <p class="mb-2">Try chaining operations like a real query:</p>
            <div class="notebook-card mb-2" style="font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">
              Ï€<sub>name, course, grade</sub> ( Ïƒ<sub>major='CS'</sub>(Students) â¨ Enrollments )
            </div>
            <p style="color: var(--text-muted); font-size: 0.85rem;">
              This is equivalent to:<br>
              <code>SELECT name, course, grade FROM Students JOIN Enrollments ON id = student_id WHERE major = 'CS'</code>
            </p>
            <button class="btn btn-primary" onclick="RelationalAlgebra.runCombined()">â–¶ï¸ Run Combined</button>
            <div id="raCombinedResult" class="mt-3"></div>
          </div>
        </div>
      </div>

      <!-- SQL Equivalence Section -->
      <div class="paper-card">
        <h3 class="mb-2">ğŸ”„ Relational Algebra â†” SQL Mapping</h3>
        <table class="sql-table">
          <thead>
            <tr>
              <th>Relational Algebra</th>
              <th>SQL Equivalent</th>
              <th>Purpose</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="font-family: monospace;">Ïƒ<sub>major='CS'</sub>(Students)</td>
              <td><code>SELECT * FROM Students WHERE major = 'CS'</code></td>
              <td>Filter rows</td>
            </tr>
            <tr>
              <td style="font-family: monospace;">Ï€<sub>name, gpa</sub>(Students)</td>
              <td><code>SELECT name, gpa FROM Students</code></td>
              <td>Select columns</td>
            </tr>
            <tr>
              <td style="font-family: monospace;">Students â¨ Enrollments</td>
              <td><code>SELECT * FROM Students JOIN Enrollments ON id = student_id</code></td>
              <td>Combine tables</td>
            </tr>
            <tr>
              <td style="font-family: monospace;">Students âˆª Alumni</td>
              <td><code>SELECT * FROM Students UNION SELECT * FROM Alumni</code></td>
              <td>Combine row sets</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Component: section-transactions -->
    <section id="section-transactions" class="section-hidden animate-in" aria-label="Transactions & ACID">
      <div class="page-header"
        style="background: linear-gradient(135deg, #f093fb, #f5576c); padding: 2rem; border-radius: 20px; color: white; margin-bottom: 2rem;">
        <h1>ğŸ” Transactions & ACID</h1>
        <p style="opacity: 0.9;">Visualize database transactions, concurrency problems, and isolation levels</p>
      </div>

      <div class="sql-grid mb-4">
        <!-- Left: Concepts -->
        <div class="flex flex-col gap-3">
          <!-- ACID Properties -->
          <div class="paper-card">
            <h3 class="mb-2">ğŸ”’ ACID Properties</h3>
            <div class="metaphor-box mb-2">
              <span class="metaphor-icon">A</span>
              <div class="metaphor-content">
                <h4>Atomicity</h4>
                <p style="margin: 0; font-size: 0.9rem;">All or nothing. If any part fails, the entire transaction rolls
                  back.</p>
              </div>
            </div>
            <div class="metaphor-box mb-2">
              <span class="metaphor-icon">C</span>
              <div class="metaphor-content">
                <h4>Consistency</h4>
                <p style="margin: 0; font-size: 0.9rem;">Database moves from one valid state to another. All
                  rules/constraints are satisfied.</p>
              </div>
            </div>
            <div class="metaphor-box mb-2">
              <span class="metaphor-icon">I</span>
              <div class="metaphor-content">
                <h4>Isolation</h4>
                <p style="margin: 0; font-size: 0.9rem;">Concurrent transactions don't interfere with each other (as if
                  executed serially).</p>
              </div>
            </div>
            <div class="metaphor-box">
              <span class="metaphor-icon">D</span>
              <div class="metaphor-content">
                <h4>Durability</h4>
                <p style="margin: 0; font-size: 0.9rem;">Once committed, data persists even if the system crashes.</p>
              </div>
            </div>
          </div>

          <!-- Isolation Levels -->
          <div class="notebook-card">
            <h3 class="mb-2">ğŸ“Š Isolation Levels</h3>
            <table class="sql-table" style="font-size: 0.85rem;">
              <thead>
                <tr>
                  <th>Level</th>
                  <th>Dirty Read</th>
                  <th>Non-Repeatable</th>
                  <th>Phantom</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>READ UNCOMMITTED</td>
                  <td>âŒ Possible</td>
                  <td>âŒ Possible</td>
                  <td>âŒ Possible</td>
                </tr>
                <tr>
                  <td>READ COMMITTED</td>
                  <td>âœ… Prevented</td>
                  <td>âŒ Possible</td>
                  <td>âŒ Possible</td>
                </tr>
                <tr>
                  <td>REPEATABLE READ</td>
                  <td>âœ… Prevented</td>
                  <td>âœ… Prevented</td>
                  <td>âŒ Possible</td>
                </tr>
                <tr>
                  <td>SERIALIZABLE</td>
                  <td>âœ… Prevented</td>
                  <td>âœ… Prevented</td>
                  <td>âœ… Prevented</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Right: Interactive Simulator -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® Transaction Simulator</h3>
            <p class="mb-3" style="color: var(--text-muted);">Watch two transactions execute concurrently and see
              potential anomalies.</p>

            <!-- Scenario Selector -->
            <div class="control-row mb-3">
              <label>Scenario:</label>
              <select id="txScenarioSelect" class="select-field" style="min-width: 200px;"
                onchange="TransactionSimulator.loadScenario(this.value)">
                <option value="dirty-read">Dirty Read</option>
                <option value="lost-update">Lost Update</option>
                <option value="non-repeatable">Non-Repeatable Read</option>
                <option value="phantom">Phantom Read</option>
              </select>
            </div>

            <!-- Data Display -->
            <div class="notebook-card mb-3">
              <h4 class="mb-2">ğŸ“¦ Database State</h4>
              <div style="display: flex; gap: 2rem; justify-content: center;">
                <div style="text-align: center;">
                  <div style="font-size: 0.8rem; color: var(--text-muted);">Account Balance</div>
                  <div id="txDataValue" style="font-size: 2rem; font-weight: bold; color: var(--accent-forest);">$1000
                  </div>
                </div>
                <div style="text-align: center;">
                  <div style="font-size: 0.8rem; color: var(--text-muted);">Committed?</div>
                  <div id="txCommitStatus" style="font-size: 1.2rem;">âœ… Yes</div>
                </div>
              </div>
            </div>

            <!-- Transaction Panels -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;" class="mb-3">
              <!-- Transaction A -->
              <div class="notebook-card" style="border: 2px solid var(--accent-forest);">
                <h4 style="color: var(--accent-forest);">ğŸ…°ï¸ Transaction A</h4>
                <div id="txALog"
                  style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; min-height: 100px; background: #f5f5f5; padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem;">
                  <div style="color: var(--text-muted);">Waiting to start...</div>
                </div>
                <div id="txAStatus" style="margin-top: 0.5rem; font-size: 0.85rem;">Status: Idle</div>
              </div>

              <!-- Transaction B -->
              <div class="notebook-card" style="border: 2px solid var(--accent-coral);">
                <h4 style="color: var(--accent-coral);">ğŸ…±ï¸ Transaction B</h4>
                <div id="txBLog"
                  style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; min-height: 100px; background: #f5f5f5; padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem;">
                  <div style="color: var(--text-muted);">Waiting to start...</div>
                </div>
                <div id="txBStatus" style="margin-top: 0.5rem; font-size: 0.85rem;">Status: Idle</div>
              </div>
            </div>

            <!-- Controls -->
            <div class="control-row" style="justify-content: center; gap: 1rem;">
              <button class="btn btn-primary" onclick="TransactionSimulator.start()">â–¶ï¸ Start Simulation</button>
              <button class="btn btn-secondary" onclick="TransactionSimulator.step()">â­ï¸ Step</button>
              <button class="btn btn-secondary" onclick="TransactionSimulator.reset()">ğŸ”„ Reset</button>
            </div>

            <!-- Anomaly Alert -->
            <div id="txAnomalyAlert" class="challenge-card mt-3" style="display: none;">
              <h4 style="color: var(--accent-coral);">âš ï¸ Anomaly Detected!</h4>
              <p id="txAnomalyText"></p>
            </div>
          </div>

          <!-- Explanation Card -->
          <div class="notebook-card">
            <h3 class="mb-2" id="txScenarioTitle">ğŸ“– Dirty Read Explained</h3>
            <p id="txScenarioDesc" style="color: var(--text-body);">
              A <strong>Dirty Read</strong> occurs when Transaction B reads data that Transaction A has modified but not
              yet committed. If A rolls back, B has read "phantom" data that never existed.
            </p>
            <div class="mt-2"
              style="font-family: monospace; font-size: 0.85rem; background: var(--bg-paper); padding: 0.5rem; border-radius: 4px;">
              <div>T1: UPDATE accounts SET balance = 500 WHERE id = 1;</div>
              <div style="color: var(--accent-coral);">T2: SELECT balance FROM accounts WHERE id = 1; -- Reads 500
                (uncommitted!)</div>
              <div>T1: ROLLBACK; -- Balance reverts to 1000</div>
              <div style="color: var(--accent-coral);">T2 now has incorrect data!</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Component: section-btree -->
    <section id="section-btree" class="section-hidden animate-in" aria-label="B-Tree Index Visualizer">
      <div class="page-header"
        style="background: linear-gradient(135deg, #11998e, #38ef7d); padding: 2rem; border-radius: 20px; color: white; margin-bottom: 2rem;">
        <h1>ğŸŒ³ B-Tree Index Visualizer</h1>
        <p style="opacity: 0.9;">Understand how database indexes work with interactive B+ Tree operations</p>
      </div>

      <div class="sql-grid mb-4">
        <!-- Left: Controls -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® Operations</h3>

            <!-- Insert -->
            <div class="control-row mb-3">
              <input type="number" id="btreeInsertValue" class="input-field" placeholder="Value" value="25"
                style="width: 100px;">
              <button class="btn btn-primary" onclick="BTreeVisualizer.insert()">â• Insert</button>
            </div>

            <!-- Search -->
            <div class="control-row mb-3">
              <input type="number" id="btreeSearchValue" class="input-field" placeholder="Value" value="15"
                style="width: 100px;">
              <button class="btn btn-secondary" onclick="BTreeVisualizer.search()">ğŸ” Search</button>
            </div>

            <!-- Bulk Insert -->
            <div class="control-row mb-3">
              <button class="btn btn-secondary" onclick="BTreeVisualizer.insertRandom()">ğŸ² Random Insert</button>
              <button class="btn btn-secondary" onclick="BTreeVisualizer.reset()">ğŸ”„ Reset</button>
            </div>

            <!-- Tree Order -->
            <div class="control-row mb-3">
              <label>Order (max children):</label>
              <select id="btreeOrder" class="select-field" onchange="BTreeVisualizer.setOrder(this.value)">
                <option value="3">3 (B-Tree)</option>
                <option value="4" selected>4 (Common)</option>
                <option value="5">5 (Wider)</option>
              </select>
            </div>
          </div>

          <!-- Info Panel -->
          <div class="notebook-card">
            <h3 class="mb-2">ğŸ“Š Tree Statistics</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.9rem;">
              <div>Keys:</div>
              <div id="btreeKeyCount">0</div>
              <div>Height:</div>
              <div id="btreeHeight">1</div>
              <div>Nodes:</div>
              <div id="btreeNodeCount">1</div>
              <div>Order:</div>
              <div id="btreeOrderDisplay">4</div>
            </div>
          </div>

          <!-- Search Result -->
          <div id="btreeSearchResult" class="challenge-card" style="display: none;">
            <h4 id="btreeSearchTitle">ğŸ” Search Result</h4>
            <p id="btreeSearchText"></p>
            <div id="btreeSearchPath" style="font-family: monospace; font-size: 0.85rem;"></div>
          </div>

          <!-- Explanation -->
          <div class="metaphor-box">
            <span class="metaphor-icon">ğŸ“š</span>
            <div class="metaphor-content">
              <h4>Why B-Trees?</h4>
              <p style="margin: 0; font-size: 0.9rem;">
                B-Trees keep data sorted and allow searches, insertions, and deletions in <strong>O(log n)</strong>
                time.
                They're the backbone of database indexes because they minimize disk reads.
              </p>
            </div>
          </div>
        </div>

        <!-- Right: Canvas -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸŒ³ B+ Tree Visualization</h3>
            <div class="viz-container" style="background: #fafafa; border-radius: 12px; overflow: hidden;">
              <canvas id="btreeCanvas" width="600" height="400" style="width: 100%; height: 400px;"></canvas>
            </div>
            <p class="mt-2" style="color: var(--text-muted); font-size: 0.85rem;">
              ğŸ’¡ <strong>Tip:</strong> Insert values and watch nodes split when they overflow!
            </p>
          </div>

          <!-- Operations Log -->
          <div class="notebook-card">
            <h3 class="mb-2">ğŸ“ Operation Log</h3>
            <div id="btreeLog"
              style="font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; max-height: 150px; overflow-y: auto; background: #f5f5f5; padding: 0.5rem; border-radius: 4px;">
              <div style="color: var(--text-muted);">Operations will appear here...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Reference Section -->
      <div class="paper-card">
        <h3 class="mb-2">ğŸ“– B-Tree Properties</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
          <div class="notebook-card">
            <h4>ğŸ”¢ Order (m)</h4>
            <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.9rem;">
              <li>Max <strong>m</strong> children per node</li>
              <li>Max <strong>m-1</strong> keys per node</li>
              <li>Min <strong>âŒˆm/2âŒ‰</strong> children (except root)</li>
            </ul>
          </div>
          <div class="notebook-card">
            <h4>âš¡ Complexity</h4>
            <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.9rem;">
              <li>Search: <strong>O(log n)</strong></li>
              <li>Insert: <strong>O(log n)</strong></li>
              <li>Delete: <strong>O(log n)</strong></li>
            </ul>
          </div>
          <div class="notebook-card">
            <h4>ğŸ’¾ Database Use</h4>
            <ul style="margin: 0; padding-left: 1.25rem; font-size: 0.9rem;">
              <li>CREATE INDEX uses B-Trees</li>
              <li>Leaf nodes store row pointers</li>
              <li>Non-leaf nodes are navigation aids</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Component: section-nosql -->
    <section id="section-nosql" class="section-hidden animate-in" aria-label="NoSQL Introduction">
      <div class="page-header"
        style="background: linear-gradient(135deg, #FF9966, #FF5E62); padding: 2rem; border-radius: 20px; color: white; margin-bottom: 2rem;">
        <h1>ğŸƒ Introduction to NoSQL</h1>
        <p style="opacity: 0.9;">Beyond rows and columns: Document, Key-Value, Graph, and Column-family stores</p>
      </div>

      <div class="grid-2 mb-4">
        <!-- Left: Concepts -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸ¤” Why NoSQL?</h3>
            <p class="mb-3">
              Relational databases (SQL) are great for structured data and complex queries, but they struggle with:
            </p>
            <ul style="list-style-type: none; padding: 0;">
              <li class="mb-2">ğŸ“‰ <strong>Scalability:</strong> Hard to scale horizontally (sharding is complex).</li>
              <li class="mb-2">ğŸ”„ <strong>Flexibility:</strong> Schema changes require downtime or migrations.</li>
              <li class="mb-2">âš¡ <strong>Speed:</strong> Joins can be slow for massive datasets.</li>
            </ul>
            <p>
              <strong>NoSQL</strong> (Not Only SQL) databases emerged to solve these problems by trading ACID guarantees
              for performance and scalability (CAP Theorem).
            </p>
          </div>

          <div class="notebook-card">
            <h3 class="mb-2">ğŸ“¦ Types of NoSQL</h3>
            <div class="accordion">
              <details open>
                <summary>ğŸ“„ Document Stores (e.g., MongoDB)</summary>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                  Data is stored as JSON-like documents. Flexible schema.
                  <br><em>Best for:</em> Content management, catalogs, user profiles.
                </p>
                <pre style="background: #f5f5f5; padding: 0.5rem; border-radius: 4px; font-size: 0.8rem;">
    {
      "_id": 1,
      "name": "Alice",
      "skills": ["Java", "Python"]
    }</pre>
              </details>
              <details>
                <summary>ğŸ”‘ Key-Value Stores (e.g., Redis)</summary>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                  Simple hash table. Extremely fast.
                  <br><em>Best for:</em> Caching, session management, leaderboards.
                </p>
              </details>
              <details>
                <summary>ğŸ•¸ï¸ Graph Databases (e.g., Neo4j)</summary>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                  Nodes and edges. Optimized for relationships.
                  <br><em>Best for:</em> Social networks, recommendation engines.
                </p>
              </details>
              <details>
                <summary>ğŸ“Š Column-Family (e.g., Cassandra)</summary>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                  Wide-column stores. High write throughput.
                  <br><em>Best for:</em> Time-series data, IoT logs.
                </p>
              </details>
            </div>
          </div>
        </div>

        <!-- Right: Comparison -->
        <div class="flex flex-col gap-3">
          <div class="paper-card">
            <h3 class="mb-2">ğŸ†š SQL vs NoSQL</h3>
            <table class="sql-table" style="font-size: 0.85rem;">
              <thead>
                <tr>
                  <th>Feature</th>
                  <th>SQL (Relational)</th>
                  <th>NoSQL (Non-Relational)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Schema</strong></td>
                  <td>Fixed, rigid</td>
                  <td>Dynamic, flexible</td>
                </tr>
                <tr>
                  <td><strong>Scaling</strong></td>
                  <td>Vertical (bigger server)</td>
                  <td>Horizontal (more servers)</td>
                </tr>
                <tr>
                  <td><strong>Data</strong></td>
                  <td>Structured (Tables)</td>
                  <td>Unstructured (Docs, Graphs)</td>
                </tr>
                <tr>
                  <td><strong>Transactions</strong></td>
                  <td>ACID (Strong consistency)</td>
                  <td>BASE (Eventual consistency)</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="metaphor-box">
            <span class="metaphor-icon">âš–ï¸</span>
            <div class="metaphor-content">
              <h4>The CAP Theorem</h4>
              <p style="margin: 0; font-size: 0.9rem;">
                In a distributed system, you can only have 2 of the 3:
              </p>
              <ul style="margin: 0.5rem 0 0 1rem; font-size: 0.9rem;">
                <li><strong>Consistency:</strong> Everyone sees the same data at the same time.</li>
                <li><strong>Availability:</strong> The system is always up.</li>
                <li><strong>Partition Tolerance:</strong> The system works even if network fails.</li>
              </ul>
              <p style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-muted);">
                SQL usually chooses CA. NoSQL usually chooses AP or CP.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="section-db-schema" class="section-hidden animate-in" aria-label="Database Schema Design">
      <div class="page-header">
        <h1>ğŸ—ï¸ Three-Level Schema Architecture</h1>
        <p>
          Understand the ANSI/SPARC three-level database architecture: External,
          Conceptual, and Internal schemas with data independence.
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div>
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® Schema Level Viewer</h3>

            <div class="flex gap-2 mb-3" style="flex-wrap: wrap">
              <button id="btnSchemaAll" class="btn btn-primary active" aria-label="View all levels">
                ğŸ“Š All Levels
              </button>
              <button id="btnSchemaExternal" class="btn btn-secondary" aria-label="View external level">
                ğŸ‘¥ External
              </button>
              <button id="btnSchemaConceptual" class="btn btn-secondary" aria-label="View conceptual level">
                ğŸ“ Conceptual
              </button>
              <button id="btnSchemaInternal" class="btn btn-secondary" aria-label="View internal level">
                ğŸ’¾ Internal
              </button>
            </div>

            <div class="viz-container mb-3">
              <canvas id="schemaCanvas" class="viz-canvas" height="380" role="img"
                aria-label="Three-level schema architecture visualization"></canvas>
            </div>

            <div class="flex gap-2 mb-3">
              <button id="btnSchemaGenDDL" class="btn btn-secondary" aria-label="Generate DDL" style="width: 100%">
                ğŸ“ Generate DDL from Conceptual Schema
              </button>
            </div>

            <pre id="schemaDDLOutput" class="code-block"
              style="display: none; max-height: 200px; overflow-y: auto; font-size: 0.75rem; background: #1a1a2e; color: #e0e0e0; padding: 1rem; border-radius: 8px;"></pre>
          </div>
        </div>

        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ¢</span>
            <div class="metaphor-content">
              <h4>Think of it like: Building Blueprint Levels</h4>
              <p style="font-size: 0.95rem">
                <strong>External:</strong> What tenants see (apartment layouts)<br>
                <strong>Conceptual:</strong> Architect's blueprint (structure)<br>
                <strong>Internal:</strong> Engineering specs (pipes, wiring)
              </p>
            </div>
          </div>

          <!-- Three Levels Reference - READABLE VERSION -->
          <div class="paper-card mb-3"
            style="background: #ffffff; border: 3px solid #2f6a57; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
            <h3 class="mb-3" style="color: #1b5e20; font-size: 1.5rem; font-weight: 700;">ğŸ“ Three-Level Architecture
            </h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 1.1rem;">
              <thead>
                <tr style="background: #2f6a57; color: #ffffff;">
                  <th style="padding: 1rem; text-align: left; font-size: 1.2rem; font-weight: 700;">Level</th>
                  <th style="padding: 1rem; text-align: left; font-size: 1.2rem; font-weight: 700;">Purpose</th>
                  <th style="padding: 1rem; text-align: left; font-size: 1.2rem; font-weight: 700;">Users</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 2px solid #ce93d8; background: #F3E5F5;">
                  <td style="padding: 1.2rem; color: #4a148c; font-weight: 700; font-size: 1.1rem;">External</td>
                  <td style="padding: 1.2rem; color: #4a148c; font-size: 1rem;">User views, subsets of data</td>
                  <td style="padding: 1.2rem; color: #4a148c; font-size: 1rem;">End users, Apps</td>
                </tr>
                <tr style="border-bottom: 2px solid #81c784; background: #E8F5E9;">
                  <td style="padding: 1.2rem; color: #1b5e20; font-weight: 700; font-size: 1.1rem;">Conceptual</td>
                  <td style="padding: 1.2rem; color: #1b5e20; font-size: 1rem;">Logical structure, entities,
                    relationships</td>
                  <td style="padding: 1.2rem; color: #1b5e20; font-size: 1rem;">DBAs, Designers</td>
                </tr>
                <tr style="background: #E3F2FD;">
                  <td style="padding: 1.2rem; color: #0d47a1; font-weight: 700; font-size: 1.1rem;">Internal</td>
                  <td style="padding: 1.2rem; color: #0d47a1; font-size: 1rem;">Physical storage, indexes, files</td>
                  <td style="padding: 1.2rem; color: #0d47a1; font-size: 1rem;">System, DBMS</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Data Independence - READABLE VERSION -->
          <div class="paper-card mb-3"
            style="background: #fffbf0; border: 3px solid #d4a017; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
            <h3 class="mb-3" style="color: #b8860b; font-size: 1.4rem; font-weight: 700;">ğŸ”“ Data Independence</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 1.1rem;">
              <tbody>
                <tr style="border-bottom: 2px solid #f0d890; background: #fff8dc;">
                  <td style="padding: 1.2rem; width: 40%; color: #8b6914; font-weight: 700; font-size: 1.1rem;">Logical
                    Independence</td>
                  <td style="padding: 1.2rem; color: #5d4e0d; font-size: 1rem;">Change conceptual schema without
                    affecting external views</td>
                </tr>
                <tr style="background: #fff8dc;">
                  <td style="padding: 1.2rem; color: #8b6914; font-weight: 700; font-size: 1.1rem;">Physical
                    Independence</td>
                  <td style="padding: 1.2rem; color: #5d4e0d; font-size: 1rem;">Change internal storage without
                    affecting conceptual schema</td>
                </tr>
              </tbody>
            </table>
            <p
              style="margin-top: 1rem; font-size: 1rem; color: #7a6519; background: #fffacd; padding: 0.75rem; border-radius: 8px;">
              ğŸ’¡ <em>This is why you can add indexes or move files without rewriting SQL queries!</em>
            </p>
          </div>

          <div class="challenge-card mb-3">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Quick Check
            </h3>
            <p class="mb-2">
              <strong>Question:</strong> A company wants to switch from HDD storage to SSD.
              Which level changes, and does the SQL code need to be rewritten?
            </p>
          </div>

          <div class="solution-card">
            <h3 class="mb-2" style="color: var(--accent-forest)">
              Answer
            </h3>
            <p class="mb-2">
              Only the <strong>Internal Level</strong> changes (file storage location).
            </p>
            <p>
              <strong>No SQL changes needed!</strong> Physical independence protects the
              conceptual and external levels from storage changes.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTION: DATABASE > Normalization
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Component: section-db-normalization -->
    <section id="section-db-normalization" class="section-hidden animate-in" aria-label="Database Normalization">
      <div class="page-header">
        <h1>ğŸ”§ Database Normalization</h1>
        <p>
          Learn to eliminate data redundancy and anomalies by decomposing tables
          through normal forms: 1NF â†’ 2NF â†’ 3NF â†’ BCNF.
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div>
          <div class="paper-card">
            <h3 class="mb-2">ğŸ® Step-by-Step Normalization</h3>

            <div class="flex gap-2 mb-3 items-center" style="flex-wrap: wrap">
              <button id="btnNormPrev" class="btn btn-secondary" aria-label="Previous step">
                â¬…ï¸ Prev
              </button>
              <button id="btnNormNext" class="btn btn-primary" aria-label="Next step">
                Next â¡ï¸
              </button>
              <span id="normStepIndicator" style="font-weight: bold; color: var(--text-muted); margin-left: auto;">Step
                0/4</span>
              <button id="btnNormAnimate" class="btn btn-secondary" aria-label="Animate all steps">
                â–¶ï¸ Animate
              </button>
              <button id="btnNormReset" class="btn btn-secondary" aria-label="Reset">
                ğŸ”„ Reset
              </button>
            </div>

            <div class="viz-container mb-3">
              <canvas id="normCanvas" class="viz-canvas" height="350" role="img"
                aria-label="Normalization step visualization"></canvas>
            </div>

            <div id="normInfo" class="notebook-card" style="min-height: 100px;">
              <!-- Dynamically populated -->
            </div>
          </div>
        </div>

        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸ§¹</span>
            <div class="metaphor-content">
              <h4>Think of it like: Decluttering a Room</h4>
              <p style="font-size: 0.95rem">
                Normalization is the process of organizing data in a database to keep it clean and efficient. It helps
                remove repeated data, reduce errors, and make sure each piece of information is stored in the right
                place. By breaking large tables into smaller, well-structured ones and linking them properly,
                normalization makes databases easier to manage, update, and maintain.
              </p>
            </div>
          </div>

          <!-- Normal Forms Reference -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-forest);">
            <h3 class="mb-2" style="color: var(--accent-forest);">ğŸ“ Normal Forms</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <thead>
                <tr style="background: var(--accent-forest); color: white;">
                  <th style="padding: 0.5rem; text-align: left;">Form</th>
                  <th style="padding: 0.5rem; text-align: left;">Rule</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;"><strong>1NF</strong></td>
                  <td style="padding: 0.5rem;">Atomic values only (no repeating groups)</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                  <td style="padding: 0.5rem;"><strong>2NF</strong></td>
                  <td style="padding: 0.5rem;">1NF + No partial dependencies on PK</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;"><strong>3NF</strong></td>
                  <td style="padding: 0.5rem;">2NF + No transitive dependencies</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;"><strong>BCNF</strong></td>
                  <td style="padding: 0.5rem;">Every determinant is a candidate key</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Functional Dependencies -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), var(--bg-cream)); border: 2px solid var(--accent-gold);">
            <h3 class="mb-2" style="color: var(--accent-gold);">ğŸ”— Functional Dependencies</h3>
            <p style="font-size: 0.9rem; margin-bottom: 0.75rem;">
              A functional dependency <strong>X â†’ Y</strong> means: if you know X, you can determine Y.
            </p>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem; width: 40%;"><strong>Full FD</strong></td>
                  <td style="padding: 0.5rem;">Y depends on ALL of X (no subset)</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft); background: var(--bg-cream);">
                  <td style="padding: 0.5rem;"><strong>Partial FD</strong></td>
                  <td style="padding: 0.5rem;">Y depends on only PART of composite PK</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;"><strong>Transitive FD</strong></td>
                  <td style="padding: 0.5rem;">X â†’ Y â†’ Z (indirect dependency)</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Anomalies -->
          <div class="paper-card mb-3"
            style="background: linear-gradient(135deg, var(--bg-paper), #FFEBEE); border: 2px solid var(--accent-coral);">
            <h3 class="mb-2" style="color: var(--accent-coral);">âš ï¸ Data Anomalies</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
              <tbody>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem; width: 35%;"><strong>Insert</strong></td>
                  <td style="padding: 0.5rem;">Can't add data without adding unrelated data</td>
                </tr>
                <tr style="border-bottom: 1px solid var(--border-soft);">
                  <td style="padding: 0.5rem;"><strong>Update</strong></td>
                  <td style="padding: 0.5rem;">Must update same info in multiple places</td>
                </tr>
                <tr>
                  <td style="padding: 0.5rem;"><strong>Delete</strong></td>
                  <td style="padding: 0.5rem;">Deleting one thing removes unrelated info</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="challenge-card">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Quick Practice
            </h3>
            <p class="mb-2">
              <strong>Table:</strong> StudentCourse(StudentID, CourseID, StudentName, CourseName, Grade)
            </p>
            <p class="mb-2">
              <strong>PK:</strong> (StudentID, CourseID)
            </p>
            <p style="color: var(--text-muted)">
              <strong>Question:</strong> Is StudentName a partial or full dependency?
            </p>
            <details style="margin-top: 0.75rem;">
              <summary style="cursor: pointer; color: var(--accent-forest); font-weight: bold;">Show Answer</summary>
              <p style="margin-top: 0.5rem;">
                <strong>Partial dependency!</strong> StudentName depends only on StudentID,
                not the full composite key (StudentID, CourseID). This violates 2NF.
              </p>
            </details>
          </div>
        </div>
      </div>
    </section>

    <!-- QUIZ MODE -->
    <section id="section-quiz-mode" class="section-hidden animate-in" aria-label="Quiz Mode">
      <div class="page-header">
        <h1>ğŸ§  Quiz Mode</h1>
        <p>
          Test your knowledge with interactive quizzes. Earn XP and track your mastery!
        </p>
      </div>

      <!-- Quiz Selection (shown before quiz starts) -->
      <div id="quizSelection" class="paper-card">
        <h3 class="mb-3">ğŸ“š Choose a Topic</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
          <button class="quiz-topic-btn" data-topic="sorting"
            style="padding: 1.5rem; background: var(--bg-card); border: 2px solid var(--border-soft); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.2s;">
            <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">âš¡</span>
            <strong>Sorting Algorithms</strong>
            <span style="display: block; color: var(--text-muted); font-size: 0.85rem;">15 questions</span>
          </button>
          <button class="quiz-topic-btn" data-topic="complexity"
            style="padding: 1.5rem; background: var(--bg-card); border: 2px solid var(--border-soft); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.2s;">
            <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">ğŸ“Š</span>
            <strong>Time Complexity</strong>
            <span style="display: block; color: var(--text-muted); font-size: 0.85rem;">10 questions</span>
          </button>
          <button class="quiz-topic-btn" data-topic="sql"
            style="padding: 1.5rem; background: var(--bg-card); border: 2px solid var(--border-soft); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.2s;">
            <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">ğŸ—„ï¸</span>
            <strong>SQL Basics</strong>
            <span style="display: block; color: var(--text-muted); font-size: 0.85rem;">15 questions</span>
          </button>
          <button class="quiz-topic-btn" data-topic="ds"
            style="padding: 1.5rem; background: var(--bg-card); border: 2px solid var(--border-soft); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.2s;">
            <span style="font-size: 2rem; display: block; margin-bottom: 0.5rem;">ğŸ“š</span>
            <strong>Data Structures</strong>
            <span style="display: block; color: var(--text-muted); font-size: 0.85rem;">12 questions</span>
          </button>
        </div>
        <div class="control-row mt-4" style="gap: 1rem;">
          <button id="btnQuizRandom" class="btn btn-primary" style="flex: 1;">ğŸ² Random Mix (10 questions)</button>
        </div>
      </div>

      <!-- Quiz Question Card (shown during quiz) -->
      <div id="quizQuestionCard" class="paper-card collapsed">
        <!-- Progress Bar -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
          <span id="quizProgress">Question 1 of 10</span>
          <span id="quizTimer" style="font-weight: 600; color: var(--accent-amber);">â±ï¸ 0:30</span>
        </div>
        <div
          style="height: 6px; background: var(--border-soft); border-radius: 3px; margin-bottom: 1.5rem; overflow: hidden;">
          <div id="quizProgressBar"
            style="height: 100%; width: 10%; background: linear-gradient(90deg, #8B5CF6, #A78BFA); transition: width 0.3s;">
          </div>
        </div>

        <!-- Question -->
        <h3 id="quizQuestion" style="margin-bottom: 1.5rem; line-height: 1.5;">Loading question...</h3>

        <!-- Answer Options -->
        <div id="quizOptions" style="display: flex; flex-direction: column; gap: 0.75rem;">
          <!-- Options rendered here -->
        </div>

        <!-- Submit Button -->
        <div class="control-row mt-4" style="gap: 0.75rem;">
          <button id="btnQuizSubmit" class="btn btn-primary" style="flex: 1;" disabled>Submit Answer</button>
          <button id="btnQuizSkip" class="btn btn-secondary">Skip</button>
        </div>
      </div>

      <!-- Quiz Feedback (shown after answering) -->
      <div id="quizFeedback" class="paper-card collapsed" style="text-align: center; padding: 2rem;">
        <span id="quizFeedbackIcon" style="font-size: 4rem;">âœ…</span>
        <h3 id="quizFeedbackTitle" style="margin: 1rem 0;">Correct!</h3>
        <p id="quizFeedbackText" style="color: var(--text-muted); margin-bottom: 1rem;">Explanation here</p>
        <p id="quizFeedbackXP" style="font-weight: 600; color: var(--accent-forest);">+10 XP</p>
        <button id="btnQuizNext" class="btn btn-primary mt-3">Next Question â†’</button>
      </div>

      <!-- Quiz Results (shown at end) -->
      <div id="quizResults" class="paper-card collapsed" style="text-align: center; padding: 2rem;">
        <span style="font-size: 4rem;">ğŸ“Š</span>
        <h2 style="margin: 1rem 0;">Quiz Complete!</h2>
        <div id="quizScoreDisplay"
          style="font-size: 3rem; font-weight: 700; color: var(--accent-forest); margin: 1rem 0;">8/10</div>
        <div id="quizStars" style="font-size: 2rem; margin: 0.5rem 0;">â­â­â­â­â˜†</div>
        <p id="quizXPEarned" style="font-size: 1.25rem; font-weight: 600; color: var(--accent-amber);">+80 XP earned!
        </p>
        <div
          style="display: flex; gap: 0.5rem; margin-top: 1rem; font-size: 0.9rem; color: var(--text-muted); justify-content: center;">
          <span id="quizTimeSpent">Time: 2:45</span>
          <span>â€¢</span>
          <span id="quizAvgTime">Avg: 16.5s/question</span>
        </div>
        <div class="control-row mt-4" style="gap: 0.75rem; justify-content: center;">
          <button id="btnQuizRetry" class="btn btn-secondary">Try Again</button>
          <button id="btnQuizNewTopic" class="btn btn-primary">New Topic</button>
        </div>
      </div>
    </section>

    <!-- DAILY CHALLENGE -->
    <section id="section-daily-challenge" class="section-hidden animate-in" aria-label="Daily Challenge">
      <div class="page-header">
        <h1>ğŸ¯ Daily Challenge</h1>
        <p>
          Complete today's challenge to maintain your streak and earn bonus XP!
        </p>
      </div>

      <!-- Streak & Stats Bar -->
      <div class="paper-card mb-4"
        style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
        <div style="display: flex; gap: 2rem; align-items: center;">
          <div>
            <span style="font-size: 2rem">ğŸ”¥</span>
            <span id="dailyStreakCount" style="font-size: 2rem; font-weight: 700; color: var(--accent-coral)">0</span>
            <span style="color: var(--text-muted)">day streak</span>
          </div>
          <div>
            <span style="font-size: 1.5rem">â­</span>
            <span id="dailyChallengesCompleted" style="font-size: 1.5rem; font-weight: 600">0</span>
            <span style="color: var(--text-muted)">completed</span>
          </div>
        </div>
        <div id="dailyTimeRemaining" style="color: var(--text-muted); font-size: 0.9rem;">
          â° New challenge in <span id="dailyCountdown">--:--:--</span>
        </div>
      </div>

      <!-- Today's Challenge Card -->
      <div id="dailyChallengeCard" class="paper-card"
        style="border: 3px solid var(--accent-coral); position: relative; overflow: hidden;">
        <div
          style="position: absolute; top: 0; right: 0; background: var(--accent-coral); color: white; padding: 0.25rem 1rem; border-radius: 0 0 0 12px; font-weight: 600;">
          TODAY
        </div>

        <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem;">
          <span id="dailyChallengeBadge"
            style="padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; background: var(--accent-amber); color: var(--text-dark)">Medium</span>
          <span id="dailyChallengeType" style="color: var(--text-muted)">SQL Query</span>
        </div>

        <h2 id="dailyChallengeTitle" style="margin-bottom: 0.5rem; color: var(--accent-forest)">Loading today's
          challenge...</h2>
        <p id="dailyChallengeDesc" style="margin-bottom: 1.5rem; color: var(--text-body)">
          Please wait while we fetch your daily challenge.
        </p>

        <!-- Challenge Content Area -->
        <div id="dailyChallengeContent" class="mb-3"
          style="min-height: 150px; background: var(--bg-paper); border-radius: 12px; padding: 1rem;">
          <!-- Dynamically filled based on challenge type -->
        </div>

        <!-- Answer Input -->
        <div id="dailyChallengeInput" class="mb-3">
          <!-- Dynamically filled based on challenge type -->
        </div>

        <!-- Actions -->
        <div class="control-row" style="gap: 0.75rem;">
          <button id="btnDailySubmit" class="btn btn-primary" style="flex: 1;">âœ“ Submit Answer</button>
          <button id="btnDailyHint" class="btn btn-secondary">ğŸ’¡ Hint</button>
          <button id="btnDailySkip" class="btn btn-secondary">â­ï¸ Skip</button>
        </div>

        <!-- Hint Display -->
        <div id="dailyHintBox" class="mt-3 collapsed"
          style="background: rgba(196, 148, 42, 0.15); padding: 1rem; border-radius: 8px; border-left: 4px solid var(--accent-amber);">
          <strong>ğŸ’¡ Hint:</strong> <span id="dailyHintText"></span>
        </div>
      </div>

      <!-- Streak Calendar -->
      <div class="paper-card mt-4">
        <h3 class="mb-2">ğŸ“… Your Challenge Calendar</h3>
        <div id="dailyCalendar"
          style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; text-align: center;">
          <!-- Calendar days will be generated here -->
        </div>
        <div style="margin-top: 1rem; display: flex; gap: 1.5rem; font-size: 0.85rem; color: var(--text-muted);">
          <span>ğŸ”¥ Completed</span>
          <span>â­ Perfect</span>
          <span>â„ï¸ Freeze used</span>
          <span>â¬œ Missed</span>
        </div>
      </div>

      <!-- Challenge History -->
      <div class="paper-card mt-4">
        <h3 class="mb-2">ğŸ“œ Recent Challenges</h3>
        <div id="dailyChallengeHistory">
          <p style="color: var(--text-muted)">Complete today's challenge to start your history!</p>
        </div>
      </div>
    </section>

    <!-- RECURSION STORY -->
    <section id="section-story-recursion" class="section-hidden animate-in" aria-label="Recursion story">
      <div class="page-header">
        <h1>ğŸ”„ The Tale of Recursion</h1>
        <p>
          Recursion is either the most elegant concept in programming or the most confusing. Usually both at once. If it
          doesn't click immediately, watch the Tower of Hanoi three times. Then try explaining it to someone. That's
          when it clicks.
        </p>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸ¯ The Tower of Hanoi</h3>
        <p class="mb-3" style="font-size: 1.1rem; line-height: 1.8">
          In an ancient temple, monks must move 64 golden disks from one
          pillar to another. But there are sacred rules: only one disk at a
          time, and a larger disk can never rest on a smaller one.
        </p>
        <p style="font-size: 1.1rem; line-height: 1.8">
          The head monk realized a profound truth:
          <em>"To move 64 disks, I must first move 63 disks. To move 63 disks,
            I must first move 62..."</em>
          This is <strong>recursion</strong>â€”solving a big problem by solving
          smaller versions of itself!
        </p>
      </div>

      <div class="grid-2 mb-4">
        <div class="paper-card">
          <h3 class="mb-2">ğŸ§  The Recursion Pattern</h3>
          <div style="
                background: var(--bg-paper);
                padding: 1.25rem;
                border-radius: 12px;
                font-family: 'JetBrains Mono', monospace;
                font-size: 0.9rem;
                line-height: 1.8;
              ">
            <span style="color: var(--accent-plum)">function</span>
            <span style="color: var(--accent-forest)">solveRecursively</span>(problem) {<br />
            &nbsp;&nbsp;<span style="color: var(--text-muted)">// Base case: simplest problem</span><br />
            &nbsp;&nbsp;<span style="color: var(--accent-coral)">if</span>
            (problem is tiny) {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;<span style="color: var(--accent-coral)">return</span>
            simple solution<br />
            &nbsp;&nbsp;}<br /><br />
            &nbsp;&nbsp;<span style="color: var(--text-muted)">// Recursive case: break down</span><br />
            &nbsp;&nbsp;smaller = makeProblemSmaller(problem)<br />
            &nbsp;&nbsp;<span style="color: var (--accent-coral)">return</span>
            <span style="color: var(--accent-forest)">solveRecursively</span>(smaller)<br />
            }
          </div>
        </div>

        <div>
          <div class="metaphor-box mb-3">
            <span class="metaphor-icon" aria-hidden="true">ğŸª†</span>
            <div class="metaphor-content">
              <h4>Think of it like: Russian Nesting Dolls</h4>
              <p style="font-size: 0.95rem">
                Each doll contains a smaller doll inside. To find the tiniest
                doll, you keep opening dolls until there's nothing left to
                open. That's your base case!
              </p>
            </div>
          </div>

          <div class="challenge-card">
            <h3 class="mb-2" style="color: var(--accent-coral)">
              ğŸ¯ Key Insight
            </h3>
            <p><strong>Every recursive function needs:</strong></p>
            <ol style="
                  margin-left: 1.5rem;
                  color: var(--text-body);
                  margin-top: 0.5rem;
                ">
              <li>
                <strong>Base case:</strong> When to stop (prevents infinite
                loop!)
              </li>
              <li>
                <strong>Recursive case:</strong> How to make the problem
                smaller
              </li>
              <li>
                <strong>Progress:</strong> Each call must move toward base
                case
              </li>
            </ol>
          </div>
        </div>
      </div>

      <!-- Recursion Sandbox: Call Stack Visualizer -->
      <div class="paper-card mb-4" id="recursionSandbox">
        <h3 class="mb-3">ğŸ§ª Recursion Sandbox: Fibonacci Call Stack</h3>
        <p class="text-muted mb-3">Watch how recursive calls stack up and unwind. Enter a number to see fib(n)
          visualized!</p>

        <div class="grid-2 mb-3" style="gap: 1.5rem">
          <div>
            <div class="control-group mb-3">
              <label class="control-label" for="fibInput">Calculate fib(n) where n =</label>
              <div class="flex gap-2">
                <input type="number" id="fibInput" class="input-field" value="5" min="1" max="8" style="width: 80px">
                <button id="btnFibStart" class="btn btn-primary">â–¶ï¸ Visualize</button>
                <button id="btnFibStep" class="btn btn-secondary" disabled>â­ï¸ Step</button>
                <button id="btnFibReset" class="btn btn-coral">ğŸ”„ Reset</button>
              </div>
            </div>

            <div class="fib-result-box" style="
                background: var(--bg-paper);
                padding: 1rem;
                border-radius: 8px;
                font-family: 'JetBrains Mono', monospace;
                margin-bottom: 1rem;
              ">
              <div style="color: var(--text-muted); margin-bottom: 0.5rem;">Result:</div>
              <div id="fibResult" style="font-size: 1.5rem; font-weight: 700; color: var(--accent-forest);">â€”</div>
            </div>

            <div class="fib-stats" style="display: flex; gap: 1rem;">
              <div class="stat-box"
                style="flex: 1; background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; text-align: center;">
                <div style="font-size: 0.75rem; color: var(--text-muted);">Calls Made</div>
                <div id="fibCalls" style="font-size: 1.25rem; font-weight: 700; color: var(--accent-amber);">0</div>
              </div>
              <div class="stat-box"
                style="flex: 1; background: var(--bg-paper); padding: 0.75rem; border-radius: 8px; text-align: center;">
                <div style="font-size: 0.75rem; color: var(--text-muted);">Max Depth</div>
                <div id="fibDepth" style="font-size: 1.25rem; font-weight: 700; color: var(--accent-coral);">0</div>
              </div>
            </div>
          </div>

          <div>
            <div style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 0.5rem;">ğŸ“š Call Stack (grows
              down):</div>
            <div id="fibCallStack" style="
                background: var(--bg-sidebar);
                border-radius: 8px;
                padding: 1rem;
                min-height: 200px;
                max-height: 300px;
                overflow-y: auto;
                font-family: 'JetBrains Mono', monospace;
                font-size: 0.8rem;
              ">
              <div style="color: var(--text-light); opacity: 0.5; text-align: center; padding: 2rem 0;">
                Click "Visualize" to see the call stack
              </div>
            </div>
          </div>
        </div>

        <div class="solution-card" style="margin-top: 1rem;">
          <p><strong>ğŸ’¡ Notice:</strong> fib(5) makes <strong>15 calls!</strong> Each increase in n nearly doubles the
            calls. This is why recursive Fibonacci is O(2â¿) - exponential time! Memoization can fix this.</p>
        </div>
      </div>
    </section>

    <!-- BIG O STORY -->
    <section id="section-story-bigo" class="section-hidden animate-in" aria-label="Big O story">
      <div class="page-header">
        <h1>ğŸï¸ The Great Algorithm Race</h1>
        <p>
          Big O is THE interview topic. "What's the time complexity?" will be asked in every coding interview. Master
          this, and you're ahead of 80% of candidates. The difference between O(n) and O(nÂ²) is the difference between 1
          second and 3 hours.
        </p>
      </div>

      <div class="story-card mb-4">
        <h3 class="story-title">ğŸ Race Day at Algorithm Stadium</h3>
        <p class="mb-3" style="font-size: 1.1rem; line-height: 1.8">
          Five racers compete on a special track. The track's length is
          determined by the <strong>input size (n)</strong>. With a small
          input (n=10), all racers finish quickly. But watch what happens as n
          grows...
        </p>
      </div>

      <div class="paper-card mb-4">
        <div class="viz-container mb-3">
          <canvas id="bigoCanvas" class="viz-canvas" height="300" role="img" aria-label="Big O plot"></canvas>
        </div>
        <div class="control-group">
          <label class="control-label" for="bigoSlider">Input Size (n): <span id="bigoN">10</span></label>
          <input type="range" id="bigoSlider" min="5" max="100" value="10" class="slider"
            aria-label="Big O input size" />
        </div>
      </div>

      <div class="grid-2">
        <div class="notebook-card">
          <h3 class="mb-3">ğŸ† The Contestants</h3>
          <div class="flex items-center gap-2 mb-2">
            <span class="badge badge-green">O(1)</span><strong>The Flash</strong> â€” Constant time, always instant
          </div>
          <div class="flex items-center gap-2 mb-2">
            <span class="badge badge-green">O(log n)</span><strong>The Strategist</strong> â€” Divides problem in half
            each
            step
          </div>
          <div class="flex items-center gap-2 mb-2">
            <span class="badge badge-amber">O(n)</span><strong>The Steady Runner</strong> â€” Checks every item once
          </div>
          <div class="flex items-center gap-2 mb-2">
            <span class="badge badge-amber">O(n log n)</span><strong>The Smart Sorter</strong> â€” Efficient sorting
          </div>
          <div class="flex items-center gap-2">
            <span class="badge badge-coral">O(nÂ²)</span><strong>The Slowpoke</strong> â€” Checks every pair
          </div>
        </div>

        <div class="solution-card">
          <h3 class="mb-3" style="color: var(--accent-forest)">
            ğŸ’¡ The Lesson
          </h3>
          <p class="mb-2">At n=10, all racers seem similar.</p>
          <p class="mb-2">At n=100, differences become clear.</p>
          <p class="mb-2">At n=1000, slow algorithms become unusable!</p>
          <p style="font-weight: 800; color: var(--accent-forest)">
            Big O tells us how algorithms scale. Always pick the fastest racer
            for your track!
          </p>
        </div>
      </div>
    </section>

    <!-- E-LECTURE: ALGORITHMS (REDESIGNED HUB) -->
    <section id="section-electure-algorithms" class="section-hidden animate-in" aria-label="Algorithm E-Lectures">
              ğŸ‘†</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Selection Sort</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 10 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Select the smallest element each
            pass.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Insertion Sort Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('insertion-sort')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ“¥</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Insertion Sort</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 10 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Insert each element into sorted
            position.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Heap Sort Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;" onclick="ELectureEngineV5.start('heap-sort')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #f43f5e, #e11d48); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ”ï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Heap Sort</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Build a heap and extract
            elements.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Linear Search Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('linear-search')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #6366f1, #4f46e5); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ“</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Linear Search</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 8 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Check every element one by one.
          </p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- BFS Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('bfs-pathfinding')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6, #2563eb); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸŒŠ</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Breadth-First Search</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Explore level by level for
            shortest path.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- DFS Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('dfs-pathfinding')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #a855f7, #9333ea); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ”</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Depth-First Search</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 11 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Dive deep before backtracking.
          </p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Dijkstra Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('dijkstra-pathfinding')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ“</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Dijkstra's Algorithm</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 14 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Weighted shortest path algorithm.
          </p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- A* Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('astar-pathfinding')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #eab308, #ca8a04); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              â­</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">A* Pathfinding</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 14 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Smart heuristic-guided
            pathfinding.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+200 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Greedy Best-First Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer;"
          onclick="ELectureEngineV5.start('greedy-bestfirst')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #22c55e, #16a34a); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ¯</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Greedy Best-First</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 10 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Fast heuristic-only pathfinding.
          </p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

      </div>

      <!-- Practice Problems Section -->
      <div id="practiceProblemsContainer" style="margin-top: 3rem;">
        <h2 style="color: white; margin-bottom: 1.5rem;">ğŸ§  Practice Problems with Walkthroughs</h2>
        <p style="color: rgba(255,255,255,0.7); margin-bottom: 1.5rem;">Click any problem to see both Naive (O(nÂ²)) and
          Optimal solutions visualized step-by-step!</p>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
          <!-- Two Sum -->
          <div class="problem-card" onclick="ProblemWalkthroughEngine.load('twoSum')"
            style="background: linear-gradient(135deg, rgba(99,102,241,0.3), rgba(139,92,246,0.3)); border-radius: 16px; padding: 1.25rem; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s;">
            <span
              style="background: #66bb6a; color: #1a1a2e; padding: 0.2rem 0.6rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600;">EASY</span>
            <h3 style="color: white; margin: 0.75rem 0 0.5rem;">Two Sum</h3>
            <p style="color: rgba(255,255,255,0.6); font-size: 0.85rem; margin-bottom: 0.75rem;">Find two numbers that
              add up to target</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.75rem;">
              <span
                style="background: rgba(255,255,255,0.1); padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; color: rgba(255,255,255,0.7);">HashMap</span>
            </div>
            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5);">
              <span>ğŸ¢ O(nÂ²)</span> â†’ <span style="color: #66bb6a;">ğŸš€ O(n)</span>
            </div>
          </div>

          <!-- Binary Search -->
          <div class="problem-card" onclick="ProblemWalkthroughEngine.load('binarySearch')"
            style="background: linear-gradient(135deg, rgba(99,102,241,0.3), rgba(139,92,246,0.3)); border-radius: 16px; padding: 1.25rem; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s;">
            <span
              style="background: #66bb6a; color: #1a1a2e; padding: 0.2rem 0.6rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600;">EASY</span>
            <h3 style="color: white; margin: 0.75rem 0 0.5rem;">Binary Search</h3>
            <p style="color: rgba(255,255,255,0.6); font-size: 0.85rem; margin-bottom: 0.75rem;">Find target in sorted
              array</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.75rem;">
              <span
                style="background: rgba(255,255,255,0.1); padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; color: rgba(255,255,255,0.7);">Divide
                & Conquer</span>
            </div>
            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5);">
              <span>ğŸ¢ O(n)</span> â†’ <span style="color: #66bb6a;">ğŸš€ O(log n)</span>
            </div>
          </div>

          <!-- Contains Duplicate -->
          <div class="problem-card" onclick="ProblemWalkthroughEngine.load('containsDuplicate')"
            style="background: linear-gradient(135deg, rgba(99,102,241,0.3), rgba(139,92,246,0.3)); border-radius: 16px; padding: 1.25rem; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: all 0.3s;">
            <span
              style="background: #66bb6a; color: #1a1a2e; padding: 0.2rem 0.6rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600;">EASY</span>
            <h3 style="color: white; margin: 0.75rem 0 0.5rem;">Contains Duplicate</h3>
            <p style="color: rgba(255,255,255,0.6); font-size: 0.85rem; margin-bottom: 0.75rem;">Check if array has
              duplicates</p>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.75rem;">
              <span
                style="background: rgba(255,255,255,0.1); padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; color: rgba(255,255,255,0.7);">HashSet</span>
            </div>
            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5);">
              <span>ğŸ¢ O(nÂ²)</span> â†’ <span style="color: #66bb6a;">ğŸš€ O(n)</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Problem Walkthrough Container (Hidden by default) -->
      <div id="problemWalkthroughContainer"></div>

    </section>

    <!-- E-LECTURE: ALGORITHMS (REDESIGNED HUB) -->
    <section id="section-electure-algorithms" class="section-hidden animate-in" aria-label="Algorithm E-Lectures">
      
      <div class="electure-hub-container">
        
        <!-- Hero Section -->
        <div class="electure-hero">
          <div style="z-index: 2;">
            <h1>Algorithm Masterclass</h1>
            <p>Deep dive into the logic behind the code. Watch step-by-step visual walkthroughs, analyze time complexity, and master the fundamentals of computer science.</p>
            
            <div class="hero-stats">
              <div class="stat-item">
                <span class="stat-value">12</span>
                <span class="stat-label">Modules</span>
              </div>
              <div class="stat-item">
                <span class="stat-value">4.5h</span>
                <span class="stat-label">Content</span>
              </div>
              <div class="stat-item">
                <span class="stat-value">XP+</span>
                <span class="stat-label">Rewards</span>
              </div>
            </div>
            
            <button class="btn hero-action-btn" id="btnHeroPractice"
              onclick="document.getElementById('practiceProblemsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' })">
              ğŸ“ Jump to Practice Problems
            </button>
          </div>
          
          <!-- Abstract Background Graphic -->
          <div style="position: absolute; right: -50px; top: -50px; width: 300px; height: 300px; background: radial-gradient(circle, rgba(59,130,246,0.3) 0%, rgba(0,0,0,0) 70%); border-radius: 50%; opacity: 0.6;"></div>
        </div>

        <!-- Filter & Search Bar -->
        <div class="electure-controls">
          <div class="filter-group">
            <button class="filter-btn active" data-filter="all">All Topics</button>
            <button class="filter-btn" data-filter="sorting">Sorting</button>
            <button class="filter-btn" data-filter="search">Search</button>
            <button class="filter-btn" data-filter="graph">Trees & Graphs</button>
          </div>
          
          <div class="search-wrapper">
             <span class="search-icon">
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
             </span>
             <input type="text" class="search-input" placeholder="Search lectures..." id="lectureSearch">
          </div>
        </div>

        <!-- Course Grid -->
        <div class="electure-grid" id="electureGrid">
          
          <!-- Bubble Sort -->
          <div class="course-card" data-category="sorting" onclick="ELectureEngineV5.start('bubble-sort')">
            <div class="card-cover cover-algorithms">
              <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ«§</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Sorting Algorithms</span>
              <h3 class="card-title">Bubble Sort</h3>
              <p class="card-desc">The foundations of sorting. Learn how adjacent swapping ripples data into place.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">12m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
            <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Quick Sort -->
          <div class="course-card" data-category="sorting" onclick="ELectureEngineV5.start('quick-sort')">
            <div class="card-cover cover-datastructures">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">âš¡</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Divide & Conquer</span>
              <h3 class="card-title">Quick Sort</h3>
              <p class="card-desc">Master the industry-standard sorting algorithm using pivot partitioning logic.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-intermediate">Intermediate</span>
                <span class="meta-pill">15m</span>
                <span class="meta-pill">+150 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Merge Sort -->
          <div class="course-card" data-category="sorting" onclick="ELectureEngineV5.start('merge-sort')">
            <div class="card-cover cover-algorithms">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ”€</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Divide & Conquer</span>
              <h3 class="card-title">Merge Sort</h3>
              <p class="card-desc">Learn stable sorting by recursively splitting and merging sorted subarrays.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-intermediate">Intermediate</span>
                <span class="meta-pill">14m</span>
                <span class="meta-pill">+150 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Binary Search -->
          <div class="course-card" data-category="search" onclick="ELectureEngineV5.start('binary-search')">
             <div class="card-cover cover-datastructures">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ”</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Search Algorithms</span>
              <h3 class="card-title">Binary Search</h3>
              <p class="card-desc">Eliminate half the data at every step. The gold standard for sorted search.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">10m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- BFS (Graph) -->
          <div class="course-card" data-category="graph" onclick="alert('Coming soon!')">
            <div class="card-cover cover-database">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸŒŠ</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Graph Traversal</span>
              <h3 class="card-title">Breadth-First Search</h3>
              <p class="card-desc">Explore graphs layer by layer. Essential for finding shortest paths.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-intermediate">Intermediate</span>
                <span class="meta-pill">18m</span>
                <span class="meta-pill">+200 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

        </div> <!-- End Grid -->
      </div>
    </section>

    <!-- E-LECTURE: DATA STRUCTURES (REDESIGNED HUB) -->
    <section id="section-electure-datastructures" class="section-hidden animate-in" aria-label="Data Structure E-Lectures">
      
      <div class="electure-hub-container">
        
        <!-- Hero Section -->
        <div class="electure-hero">
          <div style="z-index: 2;">
            <h1>Data Structure Deep Dive</h1>
            <p>Understand how data is organized, managed, and stored. Master the building blocks of efficient software, from Linked Lists to complex Graphs.</p>
            
            <div class="hero-stats">
              <div class="stat-item">
                <span class="stat-value">8</span>
                <span class="stat-label">Modules</span>
              </div>
              <div class="stat-item">
                <span class="stat-value">3.2h</span>
                <span class="stat-label">Content</span>
              </div>
              <div class="stat-item">
                <span class="stat-value">XP+</span>
                <span class="stat-label">Rewards</span>
              </div>
            </div>
            
            <button class="btn hero-action-btn" id="btnHeroPracticeDS"
              onclick="document.getElementById('practiceProblemsContainer').scrollIntoView({ behavior: 'smooth', block: 'start' })">
              ğŸ“ Jump to Practice Problems
            </button>
          </div>
          
          <!-- Abstract Background Graphic -->
          <div style="position: absolute; right: -50px; top: -50px; width: 300px; height: 300px; background: radial-gradient(circle, rgba(16,185,129,0.3) 0%, rgba(0,0,0,0) 70%); border-radius: 50%; opacity: 0.6;"></div>
        </div>

        <!-- Filter & Search Bar -->
        <div class="electure-controls">
          <div class="filter-group">
            <button class="filter-btn active" data-filter="all">All Topics</button>
            <button class="filter-btn" data-filter="linear">Linear</button>
            <button class="filter-btn" data-filter="tree">Trees</button>
            <button class="filter-btn" data-filter="advanced">Advanced</button>
          </div>
          
          <div class="search-wrapper">
             <span class="search-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
             </span>
             <input type="text" class="search-input" placeholder="Search data structures..." id="dsSearch">
          </div>
        </div>

        <!-- Course Grid -->
        <div class="electure-grid" id="electureGridDS">
          
          <!-- Stack Operations -->
          <div class="course-card" data-category="linear" onclick="ELectureEngineV5.start('stack-operations')">
            <div class="card-cover" style="background: linear-gradient(135deg, #ec4899, #be185d);">
              <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ“š</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Linear Data Structures</span>
              <h3 class="card-title">Stack Operations</h3>
              <p class="card-desc">Master LIFO (Last-In-First-Out) with Push, Pop, and Peek operations.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">10m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
            <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Linked List -->
          <div class="course-card" data-category="linear" onclick="ELectureEngineV5.start('linked-list-traversal')">
            <div class="card-cover" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ”—</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Linear Data Structures</span>
              <h3 class="card-title">Linked List Traversal</h3>
              <p class="card-desc">Navigate node chains manually. Understand pointers and dynamic memory.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">11m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Binary Tree -->
          <div class="course-card" data-category="tree" onclick="ELectureEngineV5.start('binary-tree-traversal')">
            <div class="card-cover" style="background: linear-gradient(135deg, #22c55e, #15803d);">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸŒ³</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Tree Data Structures</span>
              <h3 class="card-title">Binary Tree Traversal</h3>
              <p class="card-desc">Explore Pre-order, In-order, and Post-order recursive patterns.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-intermediate">Intermediate</span>
                <span class="meta-pill">14m</span>
                <span class="meta-pill">+150 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Queue Operations -->
          <div class="course-card" data-category="linear" onclick="alert('Coming soon!')">
             <div class="card-cover" style="background: linear-gradient(135deg, #f59e0b, #b45309);">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ«</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Linear Data Structures</span>
              <h3 class="card-title">Queue Operations</h3>
              <p class="card-desc">Master FIFO (First-In-First-Out) with Enqueue and Dequeue logic.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">10m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Hash Table -->
          <div class="course-card" data-category="advanced" onclick="alert('Coming soon!')">
            <div class="card-cover" style="background: linear-gradient(135deg, #a855f7, #7e22ce);">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ—‚ï¸</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Advanced Data Structures</span>
              <h3 class="card-title">Hash Table Magic</h3>
              <p class="card-desc">Understand key-value mapping, collisions, and O(1) average lookup.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-intermediate">Intermediate</span>
                <span class="meta-pill">14m</span>
                <span class="meta-pill">+150 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

           <!-- Array Deep Dive -->
          <div class="course-card" data-category="linear" onclick="alert('Coming soon!')">
            <div class="card-cover" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
               <div class="play-overlay">â–¶</div>
              <span class="card-icon">ğŸ“Š</span>
            </div>
            <div class="card-content">
              <span class="card-topic">Linear Data Structures</span>
              <h3 class="card-title">Array Deep Dive</h3>
              <p class="card-desc">Memory layout, resizing logic, and multi-dimensional array access.</p>
              
              <div class="card-meta">
                <span class="meta-pill diff-beginner">Beginner</span>
                <span class="meta-pill">12m</span>
                <span class="meta-pill">+100 XP</span>
              </div>
            </div>
             <div class="progress-track">
               <div class="progress-fill" style="width: 0%"></div>
            </div>
          </div>

        </div> <!-- End Grid -->
      </div>
            <span class="badge" style="background: var(--bg-paper);">Coming Soon</span>
          </div>
        </div>

        <!-- Heap Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer; opacity: 0.7;" title="Coming Soon">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #ef4444, #dc2626); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              â›°ï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Heap & Priority Queue</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 15 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Min/Max heap, heapify, and
            applications.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <span class="badge" style="background: var(--bg-paper);">Coming Soon</span>
          </div>
        </div>

        <!-- BFS Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer; opacity: 0.7;" title="Coming Soon">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #14b8a6, #0d9488); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸŒŠ</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">BFS - Level by Level</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Breadth-first search with queue
            visualization.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <span class="badge" style="background: var(--bg-paper);">Coming Soon</span>
          </div>
        </div>

        <!-- DFS Card - NEW -->
        <div class="paper-card electure-card" style="cursor: pointer; opacity: 0.7;" title="Coming Soon">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ•³ï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">DFS - Go Deep First</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Depth-first search with recursion
            animation.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <span class="badge" style="background: var(--bg-paper);">Coming Soon</span>
          </div>
        </div>

      </div>
    </section>

    <!-- E-LECTURE: SQL -->
    <section id="section-electure-sql" class="section-hidden animate-in" aria-label="SQL E-Lectures">
      <div class="page-header"
        style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 2rem; border-radius: 20px; color: white; margin-bottom: 2rem;">
        <h1>ğŸ“ SQL E-Lectures</h1>
        <p style="opacity: 0.9;">Master SQL with step-by-step explanations, code examples, and visual demonstrations</p>
      </div>

      <!-- Beginner Section -->
      <h2 style="margin: 2rem 0 1rem; color: var(--text-heading); font-size: 1.3rem;">
        ğŸŒ± Beginner Level
      </h2>
      <div class="electure-library-grid"
        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">

        <!-- SELECT Basics Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-select-basics')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ“Š</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">SELECT Basics</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Querying data with SELECT, WHERE,
            ORDER BY, DISTINCT, and aliases.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- DDL Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-ddl')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ—ï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">DDL Operations</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 10 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">CREATE, ALTER, DROP, TRUNCATE -
            defining database structure.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- DML Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-dml')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              âœï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">DML Operations</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Beginner â€¢ 10 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">INSERT, UPDATE, DELETE -
            manipulating data in tables.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+100 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

      </div>

      <!-- Intermediate Section -->
      <h2 style="margin: 2rem 0 1rem; color: var(--text-heading); font-size: 1.3rem;">
        ğŸ“ˆ Intermediate Level
      </h2>
      <div class="electure-library-grid"
        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">

        <!-- JOIN Operations Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-joins')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ”—</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">JOIN Operations</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 18 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">INNER, LEFT, RIGHT, FULL, CROSS,
            and SELF joins explained.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Aggregate Functions Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-aggregates')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #ec4899, #db2777); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ§®</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Aggregate Functions</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 15 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">COUNT, SUM, AVG, GROUP BY, and
            HAVING for data analysis.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Subqueries Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-subqueries')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #06b6d4, #0891b2); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ”„</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Subqueries</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Intermediate â€¢ 14 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Nested queries, correlated
            subqueries, IN, and EXISTS.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+150 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

      </div>

      <!-- Advanced Section -->
      <h2 style="margin: 2rem 0 1rem; color: var(--text-heading); font-size: 1.3rem;">
        ğŸš€ Advanced Level
      </h2>
      <div class="electure-library-grid"
        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">

        <!-- Window Functions Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-window-functions')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #ef4444, #dc2626); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸªŸ</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Window Functions</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 20 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">ROW_NUMBER, RANK, LAG, LEAD, and
            running totals.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+200 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- CTEs Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-cte')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #6366f1, #4f46e5); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ“¦</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Common Table Expressions</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 14 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">WITH clause and recursive CTEs
            for cleaner queries.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+200 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Transactions Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-transactions')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #14b8a6, #0d9488); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ”’</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Transactions & ACID</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 16 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">COMMIT, ROLLBACK, isolation
            levels, and data integrity.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+200 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Indexes Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-indexes')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #f97316, #ea580c); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              âš¡</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Indexes & Performance</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 16 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">B-trees, composite indexes,
            EXPLAIN, and optimization.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+200 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

        <!-- Views Card -->
        <div class="paper-card electure-card" style="cursor: pointer; transition: all 0.3s;"
          onclick="ELectureEngineV5.startSQL('sql-views')">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div
              style="width: 60px; height: 60px; background: linear-gradient(135deg, #84cc16, #65a30d); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
              ğŸ‘ï¸</div>
            <div>
              <h3 style="margin: 0; font-size: 1.1rem;">Views</h3>
              <span style="font-size: 0.8rem; color: var(--text-muted);">Advanced â€¢ 12 min</span>
            </div>
          </div>
          <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">Virtual tables and materialized
            views for reusability.</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 0.85rem; color: var(--accent-forest); font-weight: 600;">+175 XP</span>
            <button class="btn btn-primary" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Start â†’</button>
          </div>
        </div>

      </div>
    </section>

    <!-- ALGORITHMS MIDTERM SOLUTIONS -->
    <section id="section-algo-midterm-solutions" class="section-hidden animate-in"
      aria-label="Algorithms Midterm Solutions">
      <!-- Content loaded dynamically by router -->
    </section>

    <!-- ALGORITHMS FINAL SOLUTIONS -->
    <section id="section-algo-final-solutions" class="section-hidden animate-in"
      aria-label="Algorithms Final Solutions">
      <!-- Content loaded dynamically by router -->
    </section>
  </main>

  <!-- Toast (also serves as aria-live announcer) -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true">
    Message
  </div>

  <!-- Celebration Overlay (for confetti) -->
  <div id="celebrationOverlay" class="celebration-overlay"></div>

  <!-- CodeMirror scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/sql/sql.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>

  <!-- Main Application JavaScript -->
  <!-- ES Modules only - app.js fully modularized -->
  <!-- Legacy IIFE - No longer needed, all components extracted to ES modules -->
  <!-- <script defer src="https://rdpviz.vercel.app/css-source/js/app.js"></script> -->


</body>

</html>